{"remainingRequest":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/admin/components/request.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/admin/components/request.vue","mtime":1580199338329},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  export default {\n    data: () => ({\n\n  today: '2019-01-08',\n    selectedType: 'month',\n    events: [\n     \n      {\n        title: 'Vacation',\n        details: 'Going to the beach!',\n        date: '2018-12-31',\n        open: false\n      },\n      {\n        title: 'Vacation',\n        details: 'Going to the beach!',\n        date: '2019-01-01',\n        open: false\n      },\n      {\n        title: 'Meeting',\n        details: 'Spending time on how we do not have enough time',\n        date: '2019-01-07',\n        open: false\n      },\n      {\n        title: '30th Birthday',\n        details: 'Celebrate responsibly',\n        date: '2019-01-03',\n        open: false\n      },\n      {\n        title: 'New Year',\n        details: 'Eat chocolate until you pass out',\n        date: '2019-01-01',\n        open: false\n      },\n      {\n        title: 'Conference',\n        details: 'Mute myself the whole time and wonder why I am on this call',\n        date: '2019-01-21',\n        open: false\n      },\n      {\n        title: 'Hackathon',\n        details: 'Code like there is no tommorrow',\n        date: '2019-02-01',\n        open: false\n      }\n    ],\n      user_info: {},\n      token: '',\n      calander_dialog:false,\n      err_show: false,\n      error: '',\n      search: '',\n      urL: 'http://109.224.53.155',\n      dialog: false,\n      items: [],\n      filter: [{\n        id: 0,\n        name: 'الكل'\n      }, {\n        id: 1,\n        name: 'الحجز المقبول'\n      }, {\n        id: 2,\n        name: 'الحجز المرفوض'\n      }, {\n        id: 3,\n        name: 'الحجز المعلق'\n      }],\n      item_selected: {user:{name:''},item:{name:''}},\n      loding_accept: false,\n      loding_cancel: false,\n      headers: [{\n          text: 'رقم التعريف',\n          align: 'center',\n          sortable: false,\n          value: 'id',\n        },\n        {\n          text: 'اسم الحجز',\n          align: 'center',\n          sortable: false,\n          value: 'item.name',\n        },\n        {\n          text: 'اسم المستخدم',\n          align: 'center',\n          sortable: false,\n          value: 'user.name',\n        },\n\n        // { text: 'الوصف', value: 'disc' },\n        {\n          text: 'سعر الحجز',\n           align: 'center',\n          value: 'item.item_price.price'\n        },\n\n\n        {\n          text: 'تاريخ الاضافة',\n          value: 'created_at',\n           align: 'center',\n          sortable: false\n        },\n\n        {\n          text: ' ',\n          value: 'status',\n          align: 'center',\n        },\n        {\n          text: ' ',\n          value: 'action',\n          align: 'center',\n        },\n      ],\n      editedIndex: -1,\n      editedItem: {\n        name: '',\n        calories: 0,\n        fat: 0,\n        carbs: 0,\n        protein: 0,\n      },\n      defaultItem: {\n        name: '',\n        calories: 0,\n        fat: 0,\n        carbs: 0,\n        protein: 0,\n      },\n\n\n      valid: false,\n      page: 1,\n      pageCount: 0,\n      current_page: 1,\n      last_page: 0,\n      loading: false\n\n\n    }),\n\n\n\n    methods: {\n      selectrequest(item){\n      \n        this.dialog=true;\n        this.item_selected=item;\n      },\n\n          open (event) {\n      alert(event.title)\n    },\n    dateClick(event,isAdd) {\n      alert('date clicked - isAdd?'+isAdd)\n      //this.today = event.date;\n      //this.selectedType = 'day';\n      console.log(event);\n    }\n    ,\n       viewDay () {\n         alert('asd');\n        // this.focus = date\n        // this.type = 'day'\n      },\n\n      confirme_Item_booking(item) {\n        var conf = 0;\n        swal({\n            title: \"هل انت متاكد\",\n\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then((willDelete) => {\n            if (willDelete) {\n              conf = 1;\n\n\n\n\n              var data = {\n                reservation_id: item.id\n              };\n              this.loding_accept = true;\n              axios({\n                  method: 'post',\n                  url: this.urL + \"/confirmReservation\",\n                  data: data\n                })\n                .then(response => {\n\n                    this.dialog = false;\n                    this.getitems()\n                    swal(\"تمت الموافقة\", {\n                      icon: \"success\",\n                    });\n\n                  }\n\n                )\n                .catch(error => {\n\n                  this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n                }).finally(d => {\n\n                  this.loding_accept = false\n                });\n\n\n\n              // swal(\"Your imaginary file is safe!\");\n            }\n          });\n      },\n\n      deleteItem(item) {\n        const index = this.items.indexOf(item)\n        this.cancelReservation(item);\n\n\n\n\n      },\n      cancelReservation(item) {\n        var conf = 0;\n        swal({\n            title: \"هل انت متاكد\",\n\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then((willDelete) => {\n            if (willDelete) {\n\n              this.loding_cancel = true;\n              axios({\n                  method: 'get',\n                  url: this.urL + \"/ownerCancelReservation/\" + item.id,\n                  headers: {\n                    token: this.token\n                  }\n                })\n                .then(response => {\n                  this.$swal(\"تم الالغاء\", {\n                    icon: \"success\",\n                  })\n                  this.dialog = false;\n                  this.getitems()\n                  // this.items.splice(index, 1)\n                })\n                .catch(error => {\n                  this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n                }).finally(d => {\n                  this.loding_cancel = false;\n                });\n            }\n          });\n      },\n\n\n\ngetMoreitems(){\n\n if(this.current_page<=this.last_page){\n   this.current_page=this.page;\n   this.getitems();\n}\n\n},\n      getitems() {\n\n        var url = this.urL + \"/getOwnerReservations?page=\"+this.current_page;\n        this.loading = true;\n        axios({\n          method: 'get',\n          url: url,\n          headers: {\n            token: this.token\n          }\n\n        }).then(response => {\n          this.items = response.data.Data.data;\n          this.last_page=response.data.Data.last_page;\n          this.pageCount=response.data.Data.last_page;\n       \n this.events.push(\n  {\n    title: 'Vacationxxxxxxx',\n        details: 'Going to the beach!',\n        date: '2019-01-22',\n        open: false\n  }\n\n );\n\n\n             for (var i = 0; i < this.items.length; i++) {\n//            alert(this.items[i].created_at);\n// this.events.push(\n//   {\n//     title: 'Vacationxxxxxxx',\n//         details: 'Going to the beach!',\n//         date: '2019-12-22',\n//         open: false\n//   }\n\n//  );\n\n\n\n          }\n\n\n\n\n\n\n        }).catch(error => {\n          this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n        }).finally(s => {\n          this.loading = false;\n         \n        });\n      },\n\n\n\n\n\n    },\n\n    mounted() {\n      this.token = localStorage.getItem('access_token');\n      this.user_info = JSON.parse(localStorage.getItem('user_info'));\n\n      this.getitems();\n\n    },\n    computed: {\n\n       eventsMap () {\n      const map = {}\n      this.events.forEach(e => (map[e.date] = map[e.date] || []).push(e))\n      return map\n    },\n\n      selected() {\n        if(this.current_page!=this.page){ \n       \n        this.getMoreitems();\n       \n       }\n      \n        // if (this.items.length > 0) {\n        //   if (this.page > 1) {\n\n        //   }\n        // }\n      },\n    },\n\n\n    watch: {\n      selected: 'search by sub_cat_id',\n    },\n  }\n",{"version":3,"sources":["request.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkSA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;AAIA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;;;;;;;AAOA;AACA;AACA;AACA;;AAEA;AACA;;;;;;AAMA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA","file":"request.vue","sourceRoot":"src/components/admin/components","sourcesContent":["<template>\n  <v-layout column=\"\">\n\n    <v-dialog v-model=\"dialog\" width=\"500\">\n      <v-card>\n        <v-container grid-list-xs>\n\n\n          <v-col>\n\n            <v-row class=\"mb-3\">\n              <h2 style=\"color:#000\">معلومات الحجز</h2>\n            </v-row>\n            <v-divider class=\"mb-3\"></v-divider>\n            <v-row class=\"mb-2\" justify=\"center\">\n              <v-col cols=\"4\">\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-user</v-icon>\n                  <label>اسم الزبون</label>\n                </v-row>\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-bookmark</v-icon>\n                  <label>اسم الحجز</label>\n                </v-row>\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-calendar-day</v-icon>\n                  <label> التاريخ</label>\n                </v-row>\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-clock</v-icon>\n                  <label> الوقت</label>\n                </v-row>\n\n              </v-col>\n\n              <v-col>\n                <v-row class=\"mb-2\"><label> {{item_selected.user.name}}</label></v-row>\n                <v-row class=\"mb-2\"><label> {{item_selected.item.name}}</label></v-row>\n                <v-row class=\"mb-2\"><label> {{item_selected.from_date}}\n                    <v-chip style=\"margin-left:5px;margin-right:5px;\">></v-chip>\n                    {{item_selected.to_date}}</label></v-row>\n\n                <v-row class=\"mb-2\"><label>{{item_selected.from_time+\":00   \"}}\n                    <v-chip style=\"margin-left:5px;margin-right:5px;\">></v-chip>\n                    {{item_selected.to_time+\":00  \"}}</label></v-row>\n              </v-col>\n            </v-row>\n            <v-spacer></v-spacer>\n            <v-container>\n              <v-divider class=\"mb-3\"></v-divider>\n              <v-row justify=\"space-between\">\n                <span v-if=\"item_selected.confirm==0 && item_selected.active==1\">\n\n                  <v-btn color=\"success\" @click=\"confirme_Item_booking(item_selected)\" width=\"120\"\n                    style=\"margin-left:10px\">\n                    <span v-show=\"!loding_accept\">\n                      <v-icon right>fas fa-check</v-icon>\n                      قبول\n                    </span>\n                    <v-progress-circular indeterminate color=\"white\" v-show=\"loding_accept\"></v-progress-circular>\n                  </v-btn>\n\n                  <v-btn color=\"#f95252\" width=\"120\" dark=\"\" @click=\"deleteItem(item_selected)\">\n\n                    <span v-show=\"!loding_cancel\">\n                      <v-icon right size=\"18\">fas fa-trash-alt</v-icon>\n                      رفض\n                    </span>\n                    <v-progress-circular indeterminate color=\"white\" v-show=\"loding_cancel\"></v-progress-circular>\n                  </v-btn>\n                </span>\n\n\n\n\n                <v-btn color=\"#bdc3c7\" @click=\"dialog=false\">\n                  الغاء\n                </v-btn>\n              </v-row>\n            </v-container>\n\n          </v-col>\n        </v-container>\n      </v-card>\n    </v-dialog>\n\n    <v-row>\n<!-- @page-count=\"pageCount = $event\" -->\n      <v-data-table :headers=\"headers\" :items=\"items\" :page.sync=\"page\" \n        sort-by=\"calories\" class=\"elevation-1 request_table\" style=\"width:96%\" items-per-page=\"15\" :search=\"search\"\n        hide-default-footer=\"\" :loading=\"loading\" loading-text=\"جاري تحميل البيانات\">\n\n        <template v-slot:top>\n          <v-toolbar flat color=\"white\" pb-5>\n\n            <v-toolbar-title>الحجوزات</v-toolbar-title>\n            <v-divider class=\"mx-4\" inset vertical></v-divider>\n            <v-spacer></v-spacer>\n            <v-row justify=\"end\" style=\"margin-top:20px;\">\n              <div style=\"width:auto\">\n             \n                <v-dialog v-model=\"calander_dialog\" width=\"800\">\n\n                  <v-card width=\"800\" pa-4>\n        <v-layout>\n      <v-flex>\n        <v-sheet height=\"500\" style=\"padding:40px\">\n          <v-calendar\n            :now=\"today\"\n            :value=\"today\"\n            color=\"primary\"\n            :type=\"selectedType\"\n            @click:day=\"(event)=>dateClick(event,true)\"\n          >\n            <template v-slot:day=\"{ date }\">\n              <template v-for=\"event in eventsMap[date]\">\n                <v-menu\n                  :key=\"event.title\"\n                  v-model=\"event.open\"\n                  full-width\n                  offset-x\n                >\n                  <template v-slot:activator=\"{ on }\">\n                    <div\n                      v-if=\"!event.time\"\n                      v-ripple\n                      class=\"my-event\"\n                      v-on=\"on\"\n                      v-html=\"event.title\"\n                    ></div>\n                  </template>\n                  <v-card\n                    color=\"grey lighten-4\"\n                    min-width=\"350px\"\n                    flat\n                  >\n                    <v-toolbar\n                      color=\"primary\"\n                      dark\n                    >\n                      <v-btn icon>\n                        <v-icon>edit</v-icon>\n                      </v-btn>\n                      <v-toolbar-title v-html=\"event.title\"></v-toolbar-title>\n                      <v-spacer></v-spacer>\n                      <v-btn icon>\n                        <v-icon>favorite</v-icon>\n                      </v-btn>\n                      <v-btn icon>\n                        <v-icon>more_vert</v-icon>\n                      </v-btn>\n                    </v-toolbar>\n                    <v-card-title primary-title>\n                      <span v-html=\"event.details\"></span>\n                    </v-card-title>\n                    <v-card-actions>\n                      <v-btn\n                        flat\n                        color=\"secondary\"\n                      >\n                        Cancel\n                      </v-btn>\n                    </v-card-actions>\n                  </v-card>\n                </v-menu>\n              </template>\n            </template>\n          </v-calendar>\n        </v-sheet>\n      </v-flex>\n    </v-layout>\n\n                  </v-card>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn color=\"red lighten-2\" dark v-on=\"on\" style=\"margin-left:10px\">\n                      عرض الجدول\n                    </v-btn>\n                  </template>\n\n                </v-dialog>\n              </div>\n\n              <div style=\"width:auto\">\n                <v-text-field v-model=\"search\" append-icon=\"mdi-search\" outlined=\"\" dense=\"\" label=\"بحث\" single-line\n                  hide-details></v-text-field>\n              </div>\n              <div style=\"width:auto;margin-right:10px\">\n                <v-select dense=\"\" :items=\"filter\" item-value=\"id\" item-text=\"name\" outlined=\"\" placeholder=\"فلترة\"\n                  @change=\"dis()\"></v-select>\n              </div>\n\n\n\n            </v-row>\n\n          </v-toolbar>\n        </template>\n        <template v-slot:bottom>\n          <v-pagination v-model=\"page\" :length=\"pageCount\"></v-pagination>\n        </template>\n        <!-- edit reservation -->\n        <template v-slot:item.status=\"{ item }\">\n          <span v-if=\"item.active==1\">\n\n\n            <!-- reservation not confirm  -->\n\n            <v-row wrap v-if=\"item.confirm==0\" justify=\"center\">\n              <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"primary\">fas fa-clock</v-icon> -->\n              <v-chip dark=\"\" class=\"res_pinding_chip\" color=\"#fff5e7\">معلق\n\n                <v-icon left size=\"12\">fas fa-clock</v-icon>\n              </v-chip>\n            </v-row>\n\n            <!-- Accepted reservation -->\n            <v-row row wrap v-if=\"item.confirm==1\" justify=\"center\">\n              <span>\n                <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"success\">fas fa-check-square </v-icon> -->\n                <v-chip dark=\"\" class=\"res_accept_chip\" color=\"#e9f8e9\">مقبول\n                  <v-icon left size=\"12\">fas fa-check-square</v-icon>\n                </v-chip>\n              </span>\n            </v-row>\n            <!-- reservation canceld by owner -->\n            <v-row row wrap v-if=\"item.confirm==2\" justify=\"center\">\n              <span>\n                <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"error\">fas fa-trash-alt</v-icon> -->\n                <v-chip dark=\"\" class=\"res_cancel_chip\" color=\"#fee5e3\">\n\n                  ملغي\n                  <v-icon left size=\"12\">fas fa-trash-alt</v-icon>\n                </v-chip>\n              </span>\n\n\n            </v-row>\n\n          </span>\n          <span v-else>\n            <!-- reservation cancel by user -->\n            <v-row row wrap justify=\"center\">\n\n              <span>\n                <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"#f5af19\">fas fa-exclamation</v-icon> -->\n                <v-chip dark=\"\" class=\"res_cancel_user_chip\" color=\"#feebe5\">\n\n\n                  ملغي من المستخدم\n                  <v-icon left size=\"12\">fas fa-trash-alt</v-icon>\n                </v-chip>\n              </span>\n            </v-row>\n          </span>\n\n\n        </template>\n\n        <!-- edit reservation -->\n        <template v-slot:item.action=\"{ item }\">\n          <v-btn text icon @click=\"selectrequest(item)\">\n            <v-icon size=\"50\">fas fa-edit</v-icon>\n          </v-btn>\n\n\n        </template>\n        <template v-slot:no-data>\n          <h4>لاتوجد بيانات</h4>\n        </template>\n\n\n\n      </v-data-table>\n\n    </v-row>\n    <v-row>\n      <v-pagination v-model=\"page\"  prev-icon=\"mdi-menu-right\" next-icon=\"mdi-menu-left\" circle=\"\"\n      :length=\"pageCount\"></v-pagination>\n\n    </v-row>\n  </v-layout>\n\n</template>\n\n\n<script>\n  export default {\n    data: () => ({\n\n  today: '2019-01-08',\n    selectedType: 'month',\n    events: [\n     \n      {\n        title: 'Vacation',\n        details: 'Going to the beach!',\n        date: '2018-12-31',\n        open: false\n      },\n      {\n        title: 'Vacation',\n        details: 'Going to the beach!',\n        date: '2019-01-01',\n        open: false\n      },\n      {\n        title: 'Meeting',\n        details: 'Spending time on how we do not have enough time',\n        date: '2019-01-07',\n        open: false\n      },\n      {\n        title: '30th Birthday',\n        details: 'Celebrate responsibly',\n        date: '2019-01-03',\n        open: false\n      },\n      {\n        title: 'New Year',\n        details: 'Eat chocolate until you pass out',\n        date: '2019-01-01',\n        open: false\n      },\n      {\n        title: 'Conference',\n        details: 'Mute myself the whole time and wonder why I am on this call',\n        date: '2019-01-21',\n        open: false\n      },\n      {\n        title: 'Hackathon',\n        details: 'Code like there is no tommorrow',\n        date: '2019-02-01',\n        open: false\n      }\n    ],\n      user_info: {},\n      token: '',\n      calander_dialog:false,\n      err_show: false,\n      error: '',\n      search: '',\n      urL: 'http://109.224.53.155',\n      dialog: false,\n      items: [],\n      filter: [{\n        id: 0,\n        name: 'الكل'\n      }, {\n        id: 1,\n        name: 'الحجز المقبول'\n      }, {\n        id: 2,\n        name: 'الحجز المرفوض'\n      }, {\n        id: 3,\n        name: 'الحجز المعلق'\n      }],\n      item_selected: {user:{name:''},item:{name:''}},\n      loding_accept: false,\n      loding_cancel: false,\n      headers: [{\n          text: 'رقم التعريف',\n          align: 'center',\n          sortable: false,\n          value: 'id',\n        },\n        {\n          text: 'اسم الحجز',\n          align: 'center',\n          sortable: false,\n          value: 'item.name',\n        },\n        {\n          text: 'اسم المستخدم',\n          align: 'center',\n          sortable: false,\n          value: 'user.name',\n        },\n\n        // { text: 'الوصف', value: 'disc' },\n        {\n          text: 'سعر الحجز',\n           align: 'center',\n          value: 'item.item_price.price'\n        },\n\n\n        {\n          text: 'تاريخ الاضافة',\n          value: 'created_at',\n           align: 'center',\n          sortable: false\n        },\n\n        {\n          text: ' ',\n          value: 'status',\n          align: 'center',\n        },\n        {\n          text: ' ',\n          value: 'action',\n          align: 'center',\n        },\n      ],\n      editedIndex: -1,\n      editedItem: {\n        name: '',\n        calories: 0,\n        fat: 0,\n        carbs: 0,\n        protein: 0,\n      },\n      defaultItem: {\n        name: '',\n        calories: 0,\n        fat: 0,\n        carbs: 0,\n        protein: 0,\n      },\n\n\n      valid: false,\n      page: 1,\n      pageCount: 0,\n      current_page: 1,\n      last_page: 0,\n      loading: false\n\n\n    }),\n\n\n\n    methods: {\n      selectrequest(item){\n      \n        this.dialog=true;\n        this.item_selected=item;\n      },\n\n          open (event) {\n      alert(event.title)\n    },\n    dateClick(event,isAdd) {\n      alert('date clicked - isAdd?'+isAdd)\n      //this.today = event.date;\n      //this.selectedType = 'day';\n      console.log(event);\n    }\n    ,\n       viewDay () {\n         alert('asd');\n        // this.focus = date\n        // this.type = 'day'\n      },\n\n      confirme_Item_booking(item) {\n        var conf = 0;\n        swal({\n            title: \"هل انت متاكد\",\n\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then((willDelete) => {\n            if (willDelete) {\n              conf = 1;\n\n\n\n\n              var data = {\n                reservation_id: item.id\n              };\n              this.loding_accept = true;\n              axios({\n                  method: 'post',\n                  url: this.urL + \"/confirmReservation\",\n                  data: data\n                })\n                .then(response => {\n\n                    this.dialog = false;\n                    this.getitems()\n                    swal(\"تمت الموافقة\", {\n                      icon: \"success\",\n                    });\n\n                  }\n\n                )\n                .catch(error => {\n\n                  this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n                }).finally(d => {\n\n                  this.loding_accept = false\n                });\n\n\n\n              // swal(\"Your imaginary file is safe!\");\n            }\n          });\n      },\n\n      deleteItem(item) {\n        const index = this.items.indexOf(item)\n        this.cancelReservation(item);\n\n\n\n\n      },\n      cancelReservation(item) {\n        var conf = 0;\n        swal({\n            title: \"هل انت متاكد\",\n\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then((willDelete) => {\n            if (willDelete) {\n\n              this.loding_cancel = true;\n              axios({\n                  method: 'get',\n                  url: this.urL + \"/ownerCancelReservation/\" + item.id,\n                  headers: {\n                    token: this.token\n                  }\n                })\n                .then(response => {\n                  this.$swal(\"تم الالغاء\", {\n                    icon: \"success\",\n                  })\n                  this.dialog = false;\n                  this.getitems()\n                  // this.items.splice(index, 1)\n                })\n                .catch(error => {\n                  this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n                }).finally(d => {\n                  this.loding_cancel = false;\n                });\n            }\n          });\n      },\n\n\n\ngetMoreitems(){\n\n if(this.current_page<=this.last_page){\n   this.current_page=this.page;\n   this.getitems();\n}\n\n},\n      getitems() {\n\n        var url = this.urL + \"/getOwnerReservations?page=\"+this.current_page;\n        this.loading = true;\n        axios({\n          method: 'get',\n          url: url,\n          headers: {\n            token: this.token\n          }\n\n        }).then(response => {\n          this.items = response.data.Data.data;\n          this.last_page=response.data.Data.last_page;\n          this.pageCount=response.data.Data.last_page;\n       \n this.events.push(\n  {\n    title: 'Vacationxxxxxxx',\n        details: 'Going to the beach!',\n        date: '2019-01-22',\n        open: false\n  }\n\n );\n\n\n             for (var i = 0; i < this.items.length; i++) {\n//            alert(this.items[i].created_at);\n// this.events.push(\n//   {\n//     title: 'Vacationxxxxxxx',\n//         details: 'Going to the beach!',\n//         date: '2019-12-22',\n//         open: false\n//   }\n\n//  );\n\n\n\n          }\n\n\n\n\n\n\n        }).catch(error => {\n          this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n        }).finally(s => {\n          this.loading = false;\n         \n        });\n      },\n\n\n\n\n\n    },\n\n    mounted() {\n      this.token = localStorage.getItem('access_token');\n      this.user_info = JSON.parse(localStorage.getItem('user_info'));\n\n      this.getitems();\n\n    },\n    computed: {\n\n       eventsMap () {\n      const map = {}\n      this.events.forEach(e => (map[e.date] = map[e.date] || []).push(e))\n      return map\n    },\n\n      selected() {\n        if(this.current_page!=this.page){ \n       \n        this.getMoreitems();\n       \n       }\n      \n        // if (this.items.length > 0) {\n        //   if (this.page > 1) {\n\n        //   }\n        // }\n      },\n    },\n\n\n    watch: {\n      selected: 'search by sub_cat_id',\n    },\n  }\n</script>"]}]}