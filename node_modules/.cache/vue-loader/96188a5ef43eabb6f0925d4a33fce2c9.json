{"remainingRequest":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/item.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/item.vue","mtime":1580034665041},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  import GoogleMap from '../components/mapitemlocation'\n  import RatingDailog from '../components/ratingdailog'\n  import {\n    EventBus\n  } from '../event-bus.js';\n  export default {\n    props: ['item'],\n\n    data: () => ({\n      urL: 'http://109.224.53.155',\n      model: 0,\n      rating: 4,\nrating_dailog:false,\n      valid_day: true,\n      date: '',\n      time: '',\n      dayselectid:0,\n      dayoffer: [],\n      auths: localStorage.getItem('authenticat'),\n      date_dialog: false,\n      time_dialog: false,\n      booking_dialog: false,\n      address: '',\n      aa: [],\n      loading: false,\n      color: 'color:green',\n      urL: \"http://109.224.53.155\",\n\n      iMages: [],\n\n      nameRules: [\n        v => !!v || 'هذا الحقل مطلوب  ',\n      ],\n      id: '',\n      markers:[],\n      token: '',\n      info: null,\n      offers: [],\n      booking_schedual: [],\n      timeline_status: [false, false, false, false, false, false, false],\n      reserv_date: [],\n      post_data: {\n        client_id: \"1\",\n        item_id: \"\",\n        from_date: \"\",\n        to_date: \"\",\n        from_time: \"\",\n        to_time: \"\",\n        number: \"1\",\n        loading: false,\n\n      },\n      sechdual_info: []\n\n    }),\n    mounted() {\n      // \n      this.token = localStorage.getItem('access_token');\n\n      this.id = this.$route.params.id;\n      this.getItemDetails();\n    },\n\n    created() {\n\n      //  EventBus.$emit('booking_dialog', this.booking_dialog=true);\n\n      // EventBus.$on('booking_dialog', booking_dialog => {\n\n\n      //   this.booking_dialog = true;\n      //   //  alert(this.booking_dialog);\n\n      // });\n\n      // EventBus.$on('authenticat', authenticat => {\n\n      //   this.auths = true;\n\n      // });\n\n\n\n    },\n    methods: {\n\n      GetOffersDays() {\n\n\n\n\n\n\n        var days = [\"اﻷحد\", \"اﻷثنين\", \"الثلاثاء\", \"اﻷربعاء\", \"الخميس\", \"الجمعة\", \"السبت\"];\n\n\n\n        for (var i = 0; i < this.offers.length; i++) {\n\n\n          //alert(this.offers[i]['offer_to_date']);\n          var from_date = new Date(this.offers[i]['offer_from_date']);\n          var to_date = new Date(this.offers[i]['offer_to_date']);\n          var new_date = new Date(this.offers[i]['offer_to_date']);\n\n          var Difference_In_Time = to_date.getTime() - from_date.getTime();\n\n          // To calculate the no. of days between two dates \n          var Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);\n          //alert(Difference_In_Days);\n          //alert(Difference_In_Days);\n          for (var i = 0; i < Difference_In_Days + 1; i++) {\n            // alert(i);\n            var x = from_date.getDay() + i;\n            if (x > 6) {\n              // this.dayoffer.push(days[x-7]);\n              this.dayoffer.push(x - 7);\n\n\n\n            } else {\n              // this.dayoffer.push(days[x]);\n\n              this.dayoffer.push(x);\n            }\n\n\n            //alert(x);\n\n\n\n\n          }\n\n          // alert(from_date.getDay());   0  17\n\n          //  alert(to_date.getDay());   2 22\n\n\n\n          //  this.dayoffer.push(days[from_date.getDay()]);\n\n          //  this.dayoffer.push(days[to_date.getDay()]);\n          //alert(this.dayoffer[1]);\n          // this.dayoffer.push(days[to_date.getDay()]);\n          // alert(from_date.getDay())\n          // alert(to_date.getDay())\n          // alert(this.offers[i]['offer_from_date']);\n          // alert(days[date.getDay()]);\n\n\n        }\n      },\n\n\n\n      getItemDetails() {\n\n\n        var url = this.urL + \"/getItemBy/\" + this.id;\n        axios.get(url).then(response => {\n          this.info = response.data.Data[0];\n          this.iMages = this.info.images;\n          \n          this.address = response.data.Data[0].address.province.province_name;\n          this.offers = response.data.Data[0].offers;\n          this.reserv_date = response.data.Data[0].reservation\n\n          \n          this.GetOffersDays();\n          this.getDate_andTime(this.id);\n\n        })\n      },\n\n      getDate_andTime(id) {\n\n        var url = this.urL + \"/getDaysTime/\" + id;\n        axios.get(url).then(response => {\n          this.booking_schedual = response.data.Data;\n          var times_text = [\n            \"1:00 ص\", \"2:00 ص\", \"3:00 ص\", \"4:00 ص \", \"5:00 ص\", \"6:00 ص\", \"7:00 ص \", \"8:00 ص\", \"9:00 ص\", \"10:00 ص\",\n            \"11:00 ص\", \"12:00 ص\", \"1:00 م\", \"2:00 م\", \"3:00 م\", \"4:00 م \", \"5:00 م\", \"6:00 م\", \"7:00 م \",\n            \"8:00 م\", \"9:00 م\",\n            \"10:00 م\", \"11:00 م\", \"12:00 م\",\n          ];\n\n          for (var day = 0; day < 7; day++) {\n\n            var offer = '';\n            for (var i = 0; i < this.dayoffer.length; i++) {\n\n              if (this.dayoffer[i] == day) {\n\n                var offer = 1;\n\n              }\n\n\n\n            }\n\n            this.sechdual_info.push({\n              day_name: this.getdays(day + 1),\n              time_duration: ['غير متوفر'],\n              status: false,\n              offer: offer\n\n\n\n            });\n            for (var i = 0; i < this.booking_schedual.length; i++) {\n              if (day >= this.booking_schedual[i].from_day && day <= this.booking_schedual[i].to_day) {\n\n                var t = [];\n\n                for (var time = 0; time < this.booking_schedual[i].time_to_open.length; time++) {\n\n\n                  var from_time = this.booking_schedual[i].time_to_open[time].from_time.split(\":\");\n                  var totime = this.booking_schedual[i].time_to_open[time].to_time.split(\":\");\n\n\n\n                  t.push(from_time[0] + \":\" + from_time[1] + \" - \" +\n                    totime[0] + \":\" + totime[1])\n\n                }\n\n                this.sechdual_info[day].time_duration = t\n                this.sechdual_info[day].status = true\n\n\n\n                this.timeline_status[day] = true;\n\n              }\n            }\n\n\n\n          }\n\n\n\n        })\n\n      },\n      allowedDates(val) {\n\n        var mydate = new Date(val);\n        var day = mydate.getDay();\n\n        var result = false\n        for (var i = 0; i < this.booking_schedual.length; i++) {\n\n          if (day >= this.booking_schedual[i].from_day - 1 && day <= this.booking_schedual[i].to_day - 1) {\n\n            result = true;\n          }\n          if (day == 6 && this.booking_schedual[i].from_day == 0) {\n\n            result = true;\n          }\n        }\n\n\n        if (this.booking_schedual[0].every_day == 1) {\n          result = true;\n        }\n        //         for(var a=0;a<this.reserv_date.length;a++){\n\n\n        //    if (val == this.reserv_date[a].from_date ) {\n\n        //             result = false;\n        //           }\n\n\n        // }\n\n\n        var hourResv = this.chackDateCompletReservation();\n        var hour_valid = 0;\n        for (var a = 0; a < this.reserv_date.length; a++) {\n\n          var hours = this.reserv_date[a].from_time.split(\":\");\n          var hour = parseInt(hours[0]);\n\n          for (var b = 0; b < hourResv.length; b++) {\n\n\n\n\n            if (hourResv[b] == hour && val == this.reserv_date[a].from_date) {\n              hour_valid++;\n\n            }\n          }\n\n        }\n\n        if (hourResv.length == hour_valid) {\n          result = false;\n        }\n        return result;\n\n      },\n\n      chackDateCompletReservation() {\n        var houresReserv = [];\n        for (var h = 0; h < 24; h++) {\n          for (var i = 0; i < this.booking_schedual.length; i++) {\n            for (var ii = 0; ii < this.booking_schedual[i].time_to_open.length; ii++) {\n\n              var hours = this.booking_schedual[i].time_to_open[ii].from_time.split(\":\");\n              var hour = parseInt(hours[0]);\n\n              var hours1 = this.booking_schedual[i].time_to_open[ii].to_time.split(\":\");\n              var hour1 = parseInt(hours1[0]);\n\n              if (h >= hour && h <= hour1 || this.booking_schedual[i].every_day == 1) {\n\n                houresReserv.push(h);\n              }\n            }\n\n          }\n        }\n        return houresReserv;\n      },\n\n\n      allowedHours(v) {\n\n\n\n        var result = false;\n        for (var i = 0; i < this.booking_schedual.length; i++) {\n          for (var ii = 0; ii < this.booking_schedual[i].time_to_open.length; ii++) {\n\n            var hours = this.booking_schedual[i].time_to_open[ii].from_time.split(\":\");\n            var hour = parseInt(hours[0]);\n\n            var hours1 = this.booking_schedual[i].time_to_open[ii].to_time.split(\":\");\n            var hour1 = parseInt(hours1[0]);\n\n            if (v >= hour && v <= hour1  && this.booking_schedual[i].from_day== this.dayselectid) {\n\n              result = true;\n            }\n          }\n\n        }\n\n\n\n\n        for (var a = 0; a < this.reserv_date.length; a++) {\n\n          var hours = this.reserv_date[a].from_time.split(\":\");\n          var hour = parseInt(hours[0]);\n\n\n          if (v == hour && this.date == this.reserv_date[a].from_date) {\n\n            result = false;\n          }\n        }\n\n\n\n        return result;\n\n\n\n      },\n\n      allowedMinutes(v) {\n        var result = false;\n        for (var i = 0; i < this.booking_schedual.length; i++) {\n          for (var ii = 0; ii < this.booking_schedual[i].time_to_open.length; ii++) {\n\n            var hours = this.booking_schedual[i].time_to_open[ii].from_time.split(\":\");\n            var hour = parseInt(hours[1]);\n\n            var hours1 = this.booking_schedual[i].time_to_open[ii].to_time.split(\":\");\n            var hour1 = parseInt(hours1[1]);\n\n            if (v >= hour && v <= hour1) {\n\n              result = true;\n            }\n          }\n\n        }\n\n        return true;\n      },\n\n      select_date() {\n\n        this.date_dialog = false;\n        this.post_data.from_date = this.date\n        this.post_data.to_date = this.date\n        var mydate = new Date(this.date);\n     \n        this.dayselectid =mydate.getDay()!=6? mydate.getDay()+1:0;\n\n      },\n\n\n\n      select_time() {\n\n        this.time_dialog = false;\n\n        this.post_data.from_date = this.date\n        this.post_data.to_date = this.date\n        this.post_data.from_time = this.time\n        this.post_data.to_time = this.time\n\n\n\n        //alert(\"date :\"+this.date+\"\\n\\n\"+\"time :\"+this.time)\n\n\n\n      },\n\n\n\n      getPath(img_path) {\n\n        return this.urL + \"/\" + img_path;\n\n      },\n\n      booking() {\nthis.auths=localStorage.getItem('authenticat');\n  this.token = localStorage.getItem('access_token');\n        if (this.auths == 'false') {\n\n\n          EventBus.$emit('reg_dialog', 'fromItem');\n        } else if (this.auths == 'null') {\n\n\n          EventBus.$emit('reg_dialog', 'fromItem');\n\n        } else if (!this.auths) {\n\n          EventBus.$emit('reg_dialog', 'fromItem');\n        } else {\n\n          this.booking_dialog = true;\n        }\n      },\n\n\n      booking_item() {\n\n\n        if (this.$refs.form.validate()) {\n          this.post_data.item_id = this.info.id;\n          this.loading = true;\n          axios({\n              method: 'post',\n              url: this.urL + \"/reservation\",\n              data: this.post_data,\n              headers: {\n                token: this.token\n              }\n            })\n            .then(response => {\n\n\n              EventBus.$emit('getUserReservationsCount', true);\n              if (response.data.success == true) {\n                this.$refs.form.reset()\n                this.$swal('', \"    تم  الحجز بنجاح\", 'success')\n                this.rating_dailog=true;\n                this.booking_dialog = false;\n                //bookink item succesful \n              }\n            })\n\n            .catch(error => {\n              //booking item error\nthis.$swal('', \" فشل الحجز\", 'error')\n            }).finally(d => {\n              this.loading = false;\n            });\n        }\n\n\n      },\n\n\n\n\n\n     \n\n\n\n      getfreecancelation(free_cancellation) {\n        if (free_cancellation == 0) {\n          this.color = \"color:red\";\n          return \"كلا\";\n        } else {\n\n          return \"نعم\"\n        }\n      },\n\n\n\n\n\n      get_time(day) {\n        var times = [\n          \"1:00 ص\", \"2:00 ص\", \"3:00 ص\", \"4:00 ص \", \"5:00 ص\", \"6:00 ص\", \"7:00 ص \", \"8:00 ص\", \"9:00 ص\", \"10:00 ص\",\n          \"11:00 ص\", \"12:00 ص\", \"1:00 م\", \"2:00 م\", \"3:00 م\", \"4:00 م \", \"5:00 م\", \"6:00 م\", \"7:00 م \", \"8:00 م\",\n          \"9:00 م\",\n          \"10:00 م\", \"11:00 م\", \"12:00 م\",\n        ];\n\n\n\n\n        var result = 'غير متوفر';\n        for (var i = 0; i < this.booking_schedual.length; i++) {\n          if (day - 1 >= this.booking_schedual[i].from_day && day - 1 <= this.booking_schedual[i].to_day) {\n            //  result=times[this.booking_schedual[i].time_to_open[0].from_time]+\"-\"+times[this.booking_schedual[i].time_to_open[0].to_time];\n\n            result = this.booking_schedual[i]\n            this.timeline_status[day] = true;\n\n          }\n        }\n\n\n\n        return result;\n\n\n\n\n\n\n      },\n\n      getdays(index) {\n\n\n        // var days =[\"اﻷحد\",\"اﻷثنين\",\"الثلاثاء\",\"اﻷربعاء\",\"الخميس\",\"الجمعة\",\"السبت\"];\n        //  var days = [\"السبت\", \"الاحد\", \"الاثنين\", \"الثلاثاء\", \"الاربعاء\", \"الخميس\", \"الجمعة\"];\n        // var days =[\"اﻷحد\",\"اﻷثنين\",\"الثلاثاء\",\"اﻷربعاء\",\"الخميس\",\"الجمعة\",\"السبت\"];\n        //  var days =[\"اﻷحد\",\"اﻷثنين\",\"الثلاثاء\",\"اﻷربعاء\",\"الخميس\",\"الجمعة\",\"السبت\"];\n        var days = [\"السبت\", \"اﻷحد\", \"اﻷثنين\", \"الثلاثاء\", \"اﻷربعاء\", \"الخميس\", \"الجمعة\"];\n\n\n\n        return days[index - 1];\n      }\n    },\n    components:{\n       GoogleMap,\n       RatingDailog\n    }\n\n\n\n  }\n",{"version":3,"sources":["item.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0WA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;;AAIA;AACA;;AAEA;;;;;;;AAOA;;;;AAIA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;;;AAGA;;;;;AAKA;;AAEA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;;AAIA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;;;;AAIA;AACA;;AAEA;;AAEA;AACA;;;;AAIA;;AAEA;AACA;;;;AAIA;;;;AAIA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;;AAGA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;AAKA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;;;AAIA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;;AAKA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;;;;AAIA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;;;;AAIA;;;;AAIA;;;;AAIA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;AAIA;;;;;;;AAOA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA","file":"item.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container fluid=\"\" pr-2 pl-2>\n\n    <v-layout row wrap style=\"padding:30px\">\n      <!-- section 1 to images of item -->\n\n\n<v-flex xs12 class=\"hidden-lg-and-up\">\n \n  <v-carousel\n    cycle\n    height=\"400\"\n    hide-delimiter-background\n    show-arrows-on-hover\n  >\n    <v-carousel-item\n      v-for=\"(img, i) in iMages\"\n     \n      v-bind:src=\"'http://109.224.53.155/'+img.image_path\"\n    \n    >\n   \n\n    </v-carousel-item>\n  </v-carousel>\n\n</v-flex>\n      <v-flex md5 xs12 order-xs=\"12\" class=\"hidden-md-and-down\" offset-md=\"12\">\n        <v-flex xs12>\n          <v-layout row wrap pl-5 pt-4>\n            <v-sheet class=\"mx-auto\" elevation=\"8\" style=\"width:100%\" height=\"635\">\n              <v-expand-transition>\n                <v-sheet color=\"grey lighten-4\" height=\"300\" tile>\n                  <div class=\"fill-height\" align=\"center\" justify=\"center\" style=\"width:100%\">\n                    <v-img height=\"300px\" :src=\"getPath(iMages[model].image_path)\" class=\"card_img\"></v-img>\n                  </div>\n                </v-sheet>\n              </v-expand-transition>\n\n\n              <v-slide-group v-model=\"model\" class=\"pa-4\" show-arrows dir=\"ltr\">\n                <v-slide-item v-for=\"img in iMages\"  dir=\"ltr\" v-slot:default=\"{ active, toggle }\">\n                  <v-card :color=\"active ? 'primary' : 'grey lighten-1'\" class=\"ma-4\" height=\"200\" width=\"200\"\n                    @click=\"toggle\">\n\n\n                    <v-row class=\"fill-height\" align=\"center\" justify=\"center\">\n\n\n\n                      <v-img height=\"200px\" :src=\"getPath(img.image_path)\" class=\"card_img\">\n                        <template v-slot:placeholder>\n                          <v-row class=\"fill-height ma-0\" align=\"center\" justify=\"center\">\n                            <v-progress-circular indeterminate color=\"grey lighten-5\"></v-progress-circular>\n                          </v-row>\n                        </template>\n                      </v-img>\n\n                    </v-row>\n\n                  </v-card>\n                </v-slide-item>\n              </v-slide-group>\n\n\n\n\n\n            </v-sheet>\n\n          </v-layout>\n        </v-flex>\n\n\n      </v-flex>\n\n\n\n\n\n\n\n      <!-- section 2 for item details -->\n      <v-flex md7 xs12 pr-4>\n\n        <v-container>\n\n\n\n          <v-layout row wrap>\n\n\n            <v-row class=\"mb-4\">\n              <span style=\"padding-right:10px;font-size:22px;font-weight:bold\">{{info.name}}</span>\n            </v-row>\n          </v-layout>\n\n\n\n\n\n          <v-layout row wrap>\n\n            <v-flex xs12 md4 sm4>\n              <span style=\"padding-right:10px;padding-left:10px;padding-top:5px\">القسم :{{\" \"+info.sub_category.name}}\n              </span>\n\n            </v-flex>\n\n            <v-flex xs6 md2 sm2>\n\n              <!-- <hr> -->\n              <v-rating color=\"#f29c2b\" background-color=\"gray\" readonly=\"\" size=\"25\" v-model=\"info.item_evaluation\"></v-rating>\n\n\n\n              <v-spacer></v-spacer>\n\n            </v-flex>\n\n            <v-flex xs12 md6 sm6 v-for=\"item in info.offers\" style=\"padding-right: 30%;\">\n\n    <!-- <div class=\"d-inline \">\n   \n\n                <v-img  style=\"width: 32px;height:32px;\" src=\"https://image.flaticon.com/icons/png/512/411/411705.png\">\n                </v-img>\n                </div> -->\n\n\n    <div class=\"d-inline \">  \n    عرض خاص خصم {{item.new_price}} ٪</div>\n\n   \n \n\n\n\n         \n            </v-flex>\n\n\n\n\n\n          </v-layout>\n\n\n\n          <v-divider class=\"mb-2\"></v-divider>\n          <v-row>\n            <v-flex xs12 md7 style=\"padding :20px\">\n              <v-row>\n                <v-col>\n                  <label style=\"font-weight:bold\">الموقع</label><br><br>\n                  <label style=\"font-weight:bold\">سعر الحجز</label><br><br>\n\n                  <label style=\"font-weight:bold\">نسبة الاستقطاع</label><br><br>\n                  <label style=\"font-weight:bold\">امكانية الغاء الحجز</label><br><br>\n                  <label style=\"font-weight:bold\">الوصف</label><br><br>\n\n                </v-col>\n                <v-col>\n                  <label for=\"\">{{address}}</label><br><br>\n                  <label for=\"\"> {{info.item_price.price}}$</label><br><br>\n\n                  <label for=\"\" v-if=\"info.item_price.free_cancellation==0\">0%</label>\n                  <label v-else> {{info.item_price.deduction}}%</label>\n\n\n                  <br><br>\n                  <label for=\"\" :style=\"color\"> {{getfreecancelation(info.item_price.free_cancellation)}}\n                  </label><br><br>\n                  <label for=\"\">{{info.disc}}</label>\n                </v-col>\n\n\n              </v-row>\n\n              <!--Map Row -->\n\n\n              <v-row class=\"mb-6\">\n\n               <v-container width=\"100px\" >\n                   <google-map :latt=\"info.address.lat\" :long=\"info.address.long\" />\n               </v-container>\n\n\n\n              </v-row>\n              <v-row>\n                <v-btn color=\"#ff6600\" style=\"margin-left:20px\" width=\"200px\" dark=\"\" @click=\"booking\">\n                  <v-progress-circular indeterminate color=\"white\" v-show=\"loading\"></v-progress-circular>\n                  <span v-show=\"!loading\">\n\n                    <v-icon right=\"\">fas fa-bookmark</v-icon>\n                    حجز\n                  </span>\n\n                </v-btn>\n              </v-row>\n            </v-flex>\n            <v-flex xs12 md5 background-color=\"green\" class=\"mb-2\">\n\n              <v-layout row wrap justify-center style=\"background:#fff\">\n\n\n                <v-timeline v-for=\"item in sechdual_info\">\n\n\n                  <div v-for=\"time in item.time_duration\">\n\n\n                    <v-timeline-item v-if=\"item.offer==1 && item.status==true \" icon=\"mdi-star\" class=\"text-right\"\n                      :color=\"item.status?'success':'red'\">\n\n\n                      <span style=\"font-weight:bold\">{{item.day_name}}</span>\n\n\n\n\n                      <div style=\"width:200px;color:#808080;font-size:14px\"> <span>{{time}}</span></div>\n                    </v-timeline-item>\n\n\n\n\n\n\n\n                    <v-timeline-item v-else class=\"text-right\" :color=\"item.status?'success':'red'\">\n\n\n                      <span style=\"font-weight:bold\">{{item.day_name}}</span>\n\n\n\n\n                      <div style=\"width:200px;color:#808080;font-size:14px\"> <span>{{time}}</span></div>\n                    </v-timeline-item>\n\n\n                  </div>\n\n\n\n                </v-timeline>\n\n\n\n\n\n              </v-layout>\n            </v-flex>\n          </v-row>\n\n\n\n        </v-container>\n\n      </v-flex>\n\n    </v-layout>\n    <!--date picker dailog-->\n    <v-dialog v-model=\"date_dialog\" width=\"500\">\n      <v-date-picker color=\"#ff6600\" v-model=\"date\" :allowed-dates=\"allowedDates\" class=\"mt-4\" @change=\"select_date\">\n      </v-date-picker>\n\n    </v-dialog>\n    <!--end date picker dailog-->\n\n    <!--time picker dailog-->\n    <v-dialog v-model=\"time_dialog\" width=\"500\">\n\n\n      <v-time-picker color=\"#ff6600\" v-model=\"time\" :allowed-hours=\"allowedHours\" :allowed-minutes=\"allowedMinutes\"\n        class=\"mt-4\" @change=\"select_time\" scrollable></v-time-picker>\n    </v-dialog>\n\n\n    <!--end time picker dailog-->\n\n\n\n    <!--item booking dailog  -->\n    <v-dialog v-model=\"booking_dialog\" width=\"500\">\n\n\n      <v-card>\n        <v-form ref=\"form\" v-model=\"valid_day\">\n          <v-container>\n            <v-row>\n              <v-card-title primary-title>\n                {{info.name}}\n              </v-card-title>\n            </v-row>\n            <v-divider class=\"mb-6\"></v-divider>\n            <v-layout row wrap>\n              <v-flex pa-3>\n\n                <v-text-field outlined dense readonly placeholder=\"  التاريخ\" append-icon=\"fas fa-calendar-day\" required\n                  :rules=\"nameRules\" v-model=\"date\" @click=\"date_dialog=true\"></v-text-field>\n              </v-flex>\n\n            </v-layout>\n            <v-layout row wrap>\n              <v-flex pa-3>\n                <v-text-field outlined dense readonly placeholder=\"  الساعة\" append-icon=\"fas fa-clock\" required\n                  :rules=\"nameRules\" v-model=\"time\" @click=\"time_dialog=true\"></v-text-field>\n              </v-flex>\n\n            </v-layout>\n\n            <v-col>\n              <v-row justify=\"start\">\n\n\n                <v-btn color=\"success\" @click=\"booking_item\" height=\"30\" width=\"120\" style=\"font-weight:bold\">\n                  <v-progress-circular indeterminate color=\"white\" v-show=\"loading\"></v-progress-circular>\n                  <span v-show=\"!loading\">\n\n                    <v-icon right=\"\">fas fa-bookmark</v-icon>\n                    حجز\n                  </span>\n\n                </v-btn>\n\n\n                <!-- <v-btn color=\"success\"  @click=\"booking_item\"  height=\"30\" width=\"120\" style=\"font-weight:bold\">\n                حجز\n              </v-btn>\n              -->\n                <v-btn color=\"#ff0000\" dark=\"\" @click=\"booking_dialog = false\" style=\"margin-right:10px\" height=\"30\"\n                  width=\"120\">\n                  الغاء\n                </v-btn>\n\n              </v-row>\n            </v-col>\n\n          </v-container>\n        </v-form>\n      </v-card>\n    </v-dialog>\n    <!--end item booking dailog  -->\n\n<!-- Rating dailog -->\n<v-dialog v-model=\"rating_dailog\" width=\"400\">\n<RatingDailog  @hiddenDailog=\"rating_dailog=false\"\n:token=\"token\"\n:item_id=\"info.id\"\n></RatingDailog>\n</v-dialog>\n<!-- end rating dailog -->\n\n\n  </v-container>\n</template>\n\n<script>\n  import GoogleMap from '../components/mapitemlocation'\n  import RatingDailog from '../components/ratingdailog'\n  import {\n    EventBus\n  } from '../event-bus.js';\n  export default {\n    props: ['item'],\n\n    data: () => ({\n      urL: 'http://109.224.53.155',\n      model: 0,\n      rating: 4,\nrating_dailog:false,\n      valid_day: true,\n      date: '',\n      time: '',\n      dayselectid:0,\n      dayoffer: [],\n      auths: localStorage.getItem('authenticat'),\n      date_dialog: false,\n      time_dialog: false,\n      booking_dialog: false,\n      address: '',\n      aa: [],\n      loading: false,\n      color: 'color:green',\n      urL: \"http://109.224.53.155\",\n\n      iMages: [],\n\n      nameRules: [\n        v => !!v || 'هذا الحقل مطلوب  ',\n      ],\n      id: '',\n      markers:[],\n      token: '',\n      info: null,\n      offers: [],\n      booking_schedual: [],\n      timeline_status: [false, false, false, false, false, false, false],\n      reserv_date: [],\n      post_data: {\n        client_id: \"1\",\n        item_id: \"\",\n        from_date: \"\",\n        to_date: \"\",\n        from_time: \"\",\n        to_time: \"\",\n        number: \"1\",\n        loading: false,\n\n      },\n      sechdual_info: []\n\n    }),\n    mounted() {\n      // \n      this.token = localStorage.getItem('access_token');\n\n      this.id = this.$route.params.id;\n      this.getItemDetails();\n    },\n\n    created() {\n\n      //  EventBus.$emit('booking_dialog', this.booking_dialog=true);\n\n      // EventBus.$on('booking_dialog', booking_dialog => {\n\n\n      //   this.booking_dialog = true;\n      //   //  alert(this.booking_dialog);\n\n      // });\n\n      // EventBus.$on('authenticat', authenticat => {\n\n      //   this.auths = true;\n\n      // });\n\n\n\n    },\n    methods: {\n\n      GetOffersDays() {\n\n\n\n\n\n\n        var days = [\"اﻷحد\", \"اﻷثنين\", \"الثلاثاء\", \"اﻷربعاء\", \"الخميس\", \"الجمعة\", \"السبت\"];\n\n\n\n        for (var i = 0; i < this.offers.length; i++) {\n\n\n          //alert(this.offers[i]['offer_to_date']);\n          var from_date = new Date(this.offers[i]['offer_from_date']);\n          var to_date = new Date(this.offers[i]['offer_to_date']);\n          var new_date = new Date(this.offers[i]['offer_to_date']);\n\n          var Difference_In_Time = to_date.getTime() - from_date.getTime();\n\n          // To calculate the no. of days between two dates \n          var Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);\n          //alert(Difference_In_Days);\n          //alert(Difference_In_Days);\n          for (var i = 0; i < Difference_In_Days + 1; i++) {\n            // alert(i);\n            var x = from_date.getDay() + i;\n            if (x > 6) {\n              // this.dayoffer.push(days[x-7]);\n              this.dayoffer.push(x - 7);\n\n\n\n            } else {\n              // this.dayoffer.push(days[x]);\n\n              this.dayoffer.push(x);\n            }\n\n\n            //alert(x);\n\n\n\n\n          }\n\n          // alert(from_date.getDay());   0  17\n\n          //  alert(to_date.getDay());   2 22\n\n\n\n          //  this.dayoffer.push(days[from_date.getDay()]);\n\n          //  this.dayoffer.push(days[to_date.getDay()]);\n          //alert(this.dayoffer[1]);\n          // this.dayoffer.push(days[to_date.getDay()]);\n          // alert(from_date.getDay())\n          // alert(to_date.getDay())\n          // alert(this.offers[i]['offer_from_date']);\n          // alert(days[date.getDay()]);\n\n\n        }\n      },\n\n\n\n      getItemDetails() {\n\n\n        var url = this.urL + \"/getItemBy/\" + this.id;\n        axios.get(url).then(response => {\n          this.info = response.data.Data[0];\n          this.iMages = this.info.images;\n          \n          this.address = response.data.Data[0].address.province.province_name;\n          this.offers = response.data.Data[0].offers;\n          this.reserv_date = response.data.Data[0].reservation\n\n          \n          this.GetOffersDays();\n          this.getDate_andTime(this.id);\n\n        })\n      },\n\n      getDate_andTime(id) {\n\n        var url = this.urL + \"/getDaysTime/\" + id;\n        axios.get(url).then(response => {\n          this.booking_schedual = response.data.Data;\n          var times_text = [\n            \"1:00 ص\", \"2:00 ص\", \"3:00 ص\", \"4:00 ص \", \"5:00 ص\", \"6:00 ص\", \"7:00 ص \", \"8:00 ص\", \"9:00 ص\", \"10:00 ص\",\n            \"11:00 ص\", \"12:00 ص\", \"1:00 م\", \"2:00 م\", \"3:00 م\", \"4:00 م \", \"5:00 م\", \"6:00 م\", \"7:00 م \",\n            \"8:00 م\", \"9:00 م\",\n            \"10:00 م\", \"11:00 م\", \"12:00 م\",\n          ];\n\n          for (var day = 0; day < 7; day++) {\n\n            var offer = '';\n            for (var i = 0; i < this.dayoffer.length; i++) {\n\n              if (this.dayoffer[i] == day) {\n\n                var offer = 1;\n\n              }\n\n\n\n            }\n\n            this.sechdual_info.push({\n              day_name: this.getdays(day + 1),\n              time_duration: ['غير متوفر'],\n              status: false,\n              offer: offer\n\n\n\n            });\n            for (var i = 0; i < this.booking_schedual.length; i++) {\n              if (day >= this.booking_schedual[i].from_day && day <= this.booking_schedual[i].to_day) {\n\n                var t = [];\n\n                for (var time = 0; time < this.booking_schedual[i].time_to_open.length; time++) {\n\n\n                  var from_time = this.booking_schedual[i].time_to_open[time].from_time.split(\":\");\n                  var totime = this.booking_schedual[i].time_to_open[time].to_time.split(\":\");\n\n\n\n                  t.push(from_time[0] + \":\" + from_time[1] + \" - \" +\n                    totime[0] + \":\" + totime[1])\n\n                }\n\n                this.sechdual_info[day].time_duration = t\n                this.sechdual_info[day].status = true\n\n\n\n                this.timeline_status[day] = true;\n\n              }\n            }\n\n\n\n          }\n\n\n\n        })\n\n      },\n      allowedDates(val) {\n\n        var mydate = new Date(val);\n        var day = mydate.getDay();\n\n        var result = false\n        for (var i = 0; i < this.booking_schedual.length; i++) {\n\n          if (day >= this.booking_schedual[i].from_day - 1 && day <= this.booking_schedual[i].to_day - 1) {\n\n            result = true;\n          }\n          if (day == 6 && this.booking_schedual[i].from_day == 0) {\n\n            result = true;\n          }\n        }\n\n\n        if (this.booking_schedual[0].every_day == 1) {\n          result = true;\n        }\n        //         for(var a=0;a<this.reserv_date.length;a++){\n\n\n        //    if (val == this.reserv_date[a].from_date ) {\n\n        //             result = false;\n        //           }\n\n\n        // }\n\n\n        var hourResv = this.chackDateCompletReservation();\n        var hour_valid = 0;\n        for (var a = 0; a < this.reserv_date.length; a++) {\n\n          var hours = this.reserv_date[a].from_time.split(\":\");\n          var hour = parseInt(hours[0]);\n\n          for (var b = 0; b < hourResv.length; b++) {\n\n\n\n\n            if (hourResv[b] == hour && val == this.reserv_date[a].from_date) {\n              hour_valid++;\n\n            }\n          }\n\n        }\n\n        if (hourResv.length == hour_valid) {\n          result = false;\n        }\n        return result;\n\n      },\n\n      chackDateCompletReservation() {\n        var houresReserv = [];\n        for (var h = 0; h < 24; h++) {\n          for (var i = 0; i < this.booking_schedual.length; i++) {\n            for (var ii = 0; ii < this.booking_schedual[i].time_to_open.length; ii++) {\n\n              var hours = this.booking_schedual[i].time_to_open[ii].from_time.split(\":\");\n              var hour = parseInt(hours[0]);\n\n              var hours1 = this.booking_schedual[i].time_to_open[ii].to_time.split(\":\");\n              var hour1 = parseInt(hours1[0]);\n\n              if (h >= hour && h <= hour1 || this.booking_schedual[i].every_day == 1) {\n\n                houresReserv.push(h);\n              }\n            }\n\n          }\n        }\n        return houresReserv;\n      },\n\n\n      allowedHours(v) {\n\n\n\n        var result = false;\n        for (var i = 0; i < this.booking_schedual.length; i++) {\n          for (var ii = 0; ii < this.booking_schedual[i].time_to_open.length; ii++) {\n\n            var hours = this.booking_schedual[i].time_to_open[ii].from_time.split(\":\");\n            var hour = parseInt(hours[0]);\n\n            var hours1 = this.booking_schedual[i].time_to_open[ii].to_time.split(\":\");\n            var hour1 = parseInt(hours1[0]);\n\n            if (v >= hour && v <= hour1  && this.booking_schedual[i].from_day== this.dayselectid) {\n\n              result = true;\n            }\n          }\n\n        }\n\n\n\n\n        for (var a = 0; a < this.reserv_date.length; a++) {\n\n          var hours = this.reserv_date[a].from_time.split(\":\");\n          var hour = parseInt(hours[0]);\n\n\n          if (v == hour && this.date == this.reserv_date[a].from_date) {\n\n            result = false;\n          }\n        }\n\n\n\n        return result;\n\n\n\n      },\n\n      allowedMinutes(v) {\n        var result = false;\n        for (var i = 0; i < this.booking_schedual.length; i++) {\n          for (var ii = 0; ii < this.booking_schedual[i].time_to_open.length; ii++) {\n\n            var hours = this.booking_schedual[i].time_to_open[ii].from_time.split(\":\");\n            var hour = parseInt(hours[1]);\n\n            var hours1 = this.booking_schedual[i].time_to_open[ii].to_time.split(\":\");\n            var hour1 = parseInt(hours1[1]);\n\n            if (v >= hour && v <= hour1) {\n\n              result = true;\n            }\n          }\n\n        }\n\n        return true;\n      },\n\n      select_date() {\n\n        this.date_dialog = false;\n        this.post_data.from_date = this.date\n        this.post_data.to_date = this.date\n        var mydate = new Date(this.date);\n     \n        this.dayselectid =mydate.getDay()!=6? mydate.getDay()+1:0;\n\n      },\n\n\n\n      select_time() {\n\n        this.time_dialog = false;\n\n        this.post_data.from_date = this.date\n        this.post_data.to_date = this.date\n        this.post_data.from_time = this.time\n        this.post_data.to_time = this.time\n\n\n\n        //alert(\"date :\"+this.date+\"\\n\\n\"+\"time :\"+this.time)\n\n\n\n      },\n\n\n\n      getPath(img_path) {\n\n        return this.urL + \"/\" + img_path;\n\n      },\n\n      booking() {\nthis.auths=localStorage.getItem('authenticat');\n  this.token = localStorage.getItem('access_token');\n        if (this.auths == 'false') {\n\n\n          EventBus.$emit('reg_dialog', 'fromItem');\n        } else if (this.auths == 'null') {\n\n\n          EventBus.$emit('reg_dialog', 'fromItem');\n\n        } else if (!this.auths) {\n\n          EventBus.$emit('reg_dialog', 'fromItem');\n        } else {\n\n          this.booking_dialog = true;\n        }\n      },\n\n\n      booking_item() {\n\n\n        if (this.$refs.form.validate()) {\n          this.post_data.item_id = this.info.id;\n          this.loading = true;\n          axios({\n              method: 'post',\n              url: this.urL + \"/reservation\",\n              data: this.post_data,\n              headers: {\n                token: this.token\n              }\n            })\n            .then(response => {\n\n\n              EventBus.$emit('getUserReservationsCount', true);\n              if (response.data.success == true) {\n                this.$refs.form.reset()\n                this.$swal('', \"    تم  الحجز بنجاح\", 'success')\n                this.rating_dailog=true;\n                this.booking_dialog = false;\n                //bookink item succesful \n              }\n            })\n\n            .catch(error => {\n              //booking item error\nthis.$swal('', \" فشل الحجز\", 'error')\n            }).finally(d => {\n              this.loading = false;\n            });\n        }\n\n\n      },\n\n\n\n\n\n     \n\n\n\n      getfreecancelation(free_cancellation) {\n        if (free_cancellation == 0) {\n          this.color = \"color:red\";\n          return \"كلا\";\n        } else {\n\n          return \"نعم\"\n        }\n      },\n\n\n\n\n\n      get_time(day) {\n        var times = [\n          \"1:00 ص\", \"2:00 ص\", \"3:00 ص\", \"4:00 ص \", \"5:00 ص\", \"6:00 ص\", \"7:00 ص \", \"8:00 ص\", \"9:00 ص\", \"10:00 ص\",\n          \"11:00 ص\", \"12:00 ص\", \"1:00 م\", \"2:00 م\", \"3:00 م\", \"4:00 م \", \"5:00 م\", \"6:00 م\", \"7:00 م \", \"8:00 م\",\n          \"9:00 م\",\n          \"10:00 م\", \"11:00 م\", \"12:00 م\",\n        ];\n\n\n\n\n        var result = 'غير متوفر';\n        for (var i = 0; i < this.booking_schedual.length; i++) {\n          if (day - 1 >= this.booking_schedual[i].from_day && day - 1 <= this.booking_schedual[i].to_day) {\n            //  result=times[this.booking_schedual[i].time_to_open[0].from_time]+\"-\"+times[this.booking_schedual[i].time_to_open[0].to_time];\n\n            result = this.booking_schedual[i]\n            this.timeline_status[day] = true;\n\n          }\n        }\n\n\n\n        return result;\n\n\n\n\n\n\n      },\n\n      getdays(index) {\n\n\n        // var days =[\"اﻷحد\",\"اﻷثنين\",\"الثلاثاء\",\"اﻷربعاء\",\"الخميس\",\"الجمعة\",\"السبت\"];\n        //  var days = [\"السبت\", \"الاحد\", \"الاثنين\", \"الثلاثاء\", \"الاربعاء\", \"الخميس\", \"الجمعة\"];\n        // var days =[\"اﻷحد\",\"اﻷثنين\",\"الثلاثاء\",\"اﻷربعاء\",\"الخميس\",\"الجمعة\",\"السبت\"];\n        //  var days =[\"اﻷحد\",\"اﻷثنين\",\"الثلاثاء\",\"اﻷربعاء\",\"الخميس\",\"الجمعة\",\"السبت\"];\n        var days = [\"السبت\", \"اﻷحد\", \"اﻷثنين\", \"الثلاثاء\", \"اﻷربعاء\", \"الخميس\", \"الجمعة\"];\n\n\n\n        return days[index - 1];\n      }\n    },\n    components:{\n       GoogleMap,\n       RatingDailog\n    }\n\n\n\n  }\n</script>"]}]}