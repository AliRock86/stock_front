{"remainingRequest":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/admin/components/item_form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/admin/components/item_form.vue","mtime":1585560137136},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport GoogleMap from '../components/map'\nimport itemForm from '../components/item_form'\n\nexport default {\n  props: ['itemId'],\n  // props: {\n  //   'itemId': String,\n  //   'hidden': Boolean\n  // },\n  data: () => ({\n    info: {},\n    user_info: {},\n    token: '',\n    err_show: false,\n    menu1: false,\n    menu2: false,\n    menu3: false,\n    menu4: false,\n    map_dialog: false,\n    modal2: false,\n    book_dur_status: false,\n    book_num_status: false,\n    reve_type: [{\n      id: 0,\n      duration: 'غير محدود'\n    }, {\n      id: 1,\n      duration: 'اختيار فترة'\n    }, {\n      id: 2,\n      duration: 'اختيار عدد لليوم الواحد'\n    }],\n    reve_type1: [{\n      id: 0,\n      duration: 'غير محدود'\n    }, {\n      id: 1,\n      duration: 'اختيار فترة'\n    }, {\n      id: 2,\n      duration: 'اختيار عدد  '\n    }],\n    error: '',\n    msg_error_txt: 'هذا اليوم مكرر ',\n    urL: 'http://109.224.53.155',\n\n    items: [],\n\n\n    valid: false,\n    deduction: [\"2%\", \"5%\", \"10%\", \"12%\", \"50%\"],\n    days: [\"السبت\", \"الاحد\", \"الاثنين\", \"الثلاثاء\", \"الاربعاء\", \"الخميس\", \"الجمعة\", \"كل الايام\"],\n    times: [\"1:00 م\", \"2:00 م\", \"3:00 م\", \"4:00 م \", \"5:00 م\", \"6:00 م\", \"7:00 م \", \"8:00 م\", \"9:00 م\", \"10:00 م\",\n      \"11:00 م\", \"12:00 م\",\n      \"1:00 ص\", \"2:00 ص\", \"3:00 ص\", \"4:00 ص \", \"5:00 ص\", \"6:00 ص\", \"7:00 ص \", \"8:00 ص\", \"9:00 ص\", \"10:00 ص\",\n      \"11:00 ص\", \"12:00 ص\"\n    ],\n\n    img_cliced: -1,\n    day_to_open: [],\n\n    nameRules: [\n      v => !!v || 'هذا الحقل مطلوب  ',\n\n    ],\n    numberRul: [\n      v => !!v || 'هذا الحقل مطلوب  ',\n\n      v => !isNaN(v) || 'يجب ادخال رقم ',\n    ],\n    numberRul1: [\n\n      v => !isNaN(v) || 'يجب ادخال رقم ',\n    ],\n    descriptRules: [\n      v => !!v || 'هذا الحقل مطلوب  ',\n    ],\n    loading: false,\n    province: [],\n    imageName: '',\n    imageUrl: '',\n    imageFile: '',\n    images: [null, null, null, null],\n    name: '',\n    number: '',\n    description: '',\n\n    request: 0,\n    payment: false,\n    free_cancelation: false,\n    deductionvalue: 0,\n    everyday: false,\n    everytime: false,\n    fromday: '',\n    today: '',\n    fromtime: '',\n    totime: '',\n    current_page: 0,\n    last_page: 0,\n    subcategory: [],\n    sub_category_id: '',\n    category: [],\n    category_id: '',\n    addressDiscription: '',\n    prov_id: '',\n    msg_error: false,\n    reserv_type_id: -1,\n    reservation_duration: '',\n    reservation_duration_foroneday: '',\n    reserv_type_id1: -1,\n    valid_day: true,\n    img_name: '',\n    lat: 0,\n    lng: 0,\n    date_update: 0\n  }),\n\n\n\n  methods: {\n\n    getlocation(lat, lng) {\n      this.info.address.lat = lat;\n      this.info.address.long = lng\n\n      this.map_dialog = false;\n\n\n    },\n\n\n\n    delete_img(img_id, index) {\n\n\n      const Swal = require('sweetalert2');\n\n\n\n      Swal.fire({\n        title: \"هل انت متاكد من الحذف ؟\",\n\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n\n      }).then((result) => {\n        if (result.value) {\n          this.img_cliced = index;\n\n          var url = this.urL + \"/delete_item_img/\" + img_id;\n          axios({\n            method: 'get',\n            url: url,\n            headers: {\n              token: this.token\n            }\n\n          }).then(response => {\n\n\n            this.info.images[index].image_path = null;\n            this.img_name = index;\n            this.images[index] = null;\n\n            Swal.fire(\n              'تم الحذف بنجاح',\n              '',\n              'success'\n            )\n\n          }).catch(error => {\n            this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n          }).finally(d => {\n\n            this.getitems();\n          });\n\n\n\n        }\n      })\n\n\n\n\n    },\n\n    cancel() {\n      this.$emit(\"changeStatus\", false);\n    },\n    getItemDetails() {\n\n      var url = this.urL + \"/getItemBy/\" + this.itemId;\n      axios.get(url).then(response => {\n        this.info = response.data.Data[0];\n        this.imgs = this.info.images;\n        this.address = response.data.Data[0].address.province.province_name;\n\n        for (var i = 0; i < 4; i++) {\n          this.images[i] = this.urL + \"/\" + this.info.images[i].image_path;\n\n        }\n\n        for (var a = 0; a < this.info.day_to_open.length; a++) {\n\n          this.day_to_open.push({\n\n            every_day: this.info.day_to_open[a].every_day,\n            every_time: this.info.day_to_open[a].every_time,\n            from_day: this.info.day_to_open[a].from_day,\n            from_time: this.info.day_to_open[a].from_time,\n            to_day: this.info.day_to_open[a].to_day,\n            to_time: this.info.day_to_open[a].to_time,\n            max_requests: this.info.day_to_open[a].max_requests\n          });\n\n        }\n        if (this.info.day_to_open.length < 1) {\n\n          this.info.day_to_open.push({\n            id: 0,\n\n            every_day: 0,\n            every_time: 0,\n            from_day: 0,\n            from_time: 0,\n            to_day: 0,\n            to_time: 0,\n            max_requests: 0\n          });\n        }\n\n        this.getSubCategory();\n\n      })\n    },\n    //         getDate_andTime(id){\n\n    //   var url = this.urL + \"/getDaysTime/\" +id;\n    //         axios.get(url).then(response => {\n\n\n\n    //           })},\n    change_timeday() {\n      this.day_to_open.length = 0;\n      this.deductionvalue = 0;\n    },\n    select_reser_type1(id) {\n\n      this.reserv_type_id1 = id;\n    },\n    select_reser_type(id) {\n\n      this.reserv_type_id = id;\n      if (id == 1) {\n        this.book_dur_status = true;\n        this.book_num_status = false;\n      } else if (id == 2) {\n        this.book_dur_status = false;\n        this.book_num_status = true;\n      } else {\n        this.book_dur_status = false;\n        this.book_num_status = false;\n      }\n    },\n\n    allowedHours(v) {\n\n      return false;\n    },\n\n    comput_maxRequest(id, time_duration, from_tim, to_tim) {\n\n      if (id == 0) {\n        return 0;\n      } else if (id == 1) {\n        // this.reservation_duration\n\n        var from_hour = parseInt(from_tim.split(\":\")[0])\n        var from_min = parseInt(from_tim.split(\":\")[1])\n\n\n        var to_hour = parseInt(to_tim.split(\":\")[0])\n        var to_min = parseInt(to_tim.split(\":\")[1])\n\n        var from = from_hour * 60 + from_min;\n\n\n        var to = to_hour * 60 + to_min;\n\n        var result = to - from;\n\n        var houer = parseInt(time_duration.split(\":\")[0]);\n        var minit = parseInt(time_duration.split(\":\")[1]);\n\n        var dur = houer * 60 + minit;\n\n        result = result / dur\n\n        return result\n\n      } else {\n        return 0\n      }\n\n\n\n\n    },\n    submit() {\n\n      var imag = [];\n\n      if (this.info.images.length < 1) {\n        for (var im = 0; im < this.images.length; im++) {\n\n          imag.push(this.images[im]);\n\n\n        }\n      } else {\n\n        for (var im = 0; im < this.images.length; im++) {\n          if (this.images[im] != null && this.images[im] != this.urL + \"/\" + this.info.images[im].image_path) {\n\n            imag.push(this.images[im]);\n          } else if (this.images[im] != null) {\n\n          }\n\n        }\n\n      }\n\n      if (this.info.day_to_open[0].every_day && this.info.day_to_open[0].every_time) {\n        this.day_to_open.length = 0\n        this.date_update = 1;\n        this.day_to_open.push({\n\n          every_day: 1,\n          every_time: 1,\n          from_day: 0,\n          from_time: \"00:00\",\n          to_day: 6,\n          to_time: \"24:00\",\n          max_requests: this.comput_maxRequest(this.reserv_type_id, this.reservation_duration, \"00:00\", \"24:00\")\n        });\n\n      }\n\n      if (this.day_to_open.length == 0) {\n        this.$swal('تحذير', \"    يجب اختيار جدول الحجز\", 'warning')\n      }\n\n      if (this.info.images.find(im => im === 'a')) {\n        this.$swal('تحذير', \" يجب اختيار 4 من الصور\", 'warning')\n      }\n\n\n      if (this.$refs.form.validate() && this.day_to_open.length > 0) {\n\n        var data = {\n\n          province_id: this.info.address.province.id,\n          country_id: this.info.address.province.country_id,\n          category_id: this.info.sub_category.category_id,\n          long: this.info.address.long,\n          lat: this.info.address.lat,\n          address_id: this.info.address.id,\n          name: this.info.name,\n          number: 0,\n          discraption: this.info.disc,\n          address_discraption: this.info.address.discraption,\n          max_requests: this.info.max_requests,\n\n          sub_category_id: this.info.sub_category.id,\n\n          owner_id: \"8\",\n\n          price: this.info.item_price.price,\n\n          book_without_credit_card: this.info.item_price.book_without_credit_card,\n\n          free_cancellation: this.info.item_price.free_cancellation,\n          deduction: this.info.item_price.deduction,\n\n          no_prepayment: \"1\",\n          cancellation_deduction_ratio: \"1\",\n          work_times: this.day_to_open,\n\n          type: \"png\",\n          images: imag.length != 0 ? imag : [\"a\", \"a\", \"a\", \"a\"],\n          time_open_id: this.info.day_to_open[0].id,\n          day_open_id: this.info.day_to_open[0].id,\n          item_price_id: this.info.item_price.id,\n          day_to_open_update: this.date_update\n        };\n        // this.description=JSON.stringify(data);\n\n        this.loading = true;\n        axios({\n            method: 'post',\n            url: this.urL + \"/updateItem/\" + this.itemId,\n            data: data,\n            headers: {\n              token: this.token\n            }\n\n          })\n          .then(response => {\n            this.$swal('تم', \"    تم تعديل الحجز\", 'success')\n\n            this.dialog = false;\n            this.current_page = 0;\n            this.getitems();\n            this.$refs.form.reset();\n\n            if (response.data.success == true) {\n              this.$refs.form.reset()\n              this.dialog = false;\n              this.current_page = 0;\n              this.getitems();\n            }\n            // \n\n\n\n          })\n          .catch(error => {\n            this.err_show = true;\n            this.$swal(error, \"     لم يتم اضافة الحجز\", 'error')\n\n          }).finally(d => {\n            this.loading = false;\n            this.everyday = false;\n            this.everytime = false;\n          });\n      } else {\n\n        this.err_show = true;\n\n\n\n\n      }\n\n\n\n\n    },\n    getCategory() {\n\n      var url = this.urL + \"/getInfo/Category\";\n      axios.get(url).then(response => {\n        this.category = response.data.Data;\n\n\n\n      })\n    },\n\n\n    getImageData(url) {\n\n      const image2base64 = require('image-to-base64');\n      image2base64(url) // you can also to use url\n        .then(\n          (response) => {\n            console.log(response); //cGF0aC90by9maWxlLmpwZw==\n          }\n        )\n        .catch(\n          (error) => {\n\n          }\n        )\n\n    },\n\n    getSubCategory() {\n\n      var url = this.urL + \"/getInfo/SubCategory/\" + this.info.sub_category.category_id;\n      axios.get(url).then(response => {\n        this.subcategory = response.data.Data;\n\n\n\n      })\n    },\n    getProvince() {\n\n      var url = this.urL + \"/getInfo/Province/1\";\n      axios.get(url).then(response => {\n        this.province = response.data.Data;\n\n\n\n      })\n    },\n\n\n    addday() {\n      if (this.$refs.form_day.validate()) {\n\n\n        this.msg_error = false;\n\n\n        let search = this.day_to_open.find((o, i) => {\n          if (o.from_day == this.days.indexOf(this.fromday)) {\n            return o;\n          }\n        });\n\n\n        if (search == undefined) {\n          if (this.everytime && !this.everyday) {\n            this.add_day_reversation();\n          } else if (this.everyday && !this.everytime) {\n            this.add_time_reversation();\n          } else {\n            this.add_dayTime_reversation();\n\n          }\n        } else {\n          this.$swal('تحذير', \"  لايمكن تكرار اليوم\", 'warning')\n\n          this.$refs.form_day.reset();\n        }\n\n      }\n\n    },\n    add_dayTime_reversation() {\n      this.date_update = 1;\n\n      this.day_to_open.push({\n        every_day: this.everyday,\n        every_time: this.everytime,\n        from_day: this.days.indexOf(this.fromday),\n        from_time: this.fromtime,\n        to_day: this.days.indexOf(this.fromday),\n        to_time: this.totime,\n        max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, this\n          .fromtime, this.totime)\n      });\n\n      this.$refs.form_day.reset();\n\n    },\n    add_day_reversation() {\n      this.date_update = 1;\n      this.day_to_open.push({\n        every_day: this.everyday,\n        every_time: this.everytime,\n        from_day: this.days.indexOf(this.fromday),\n        from_time: 0,\n        to_day: this.days.indexOf(this.fromday),\n        to_time: 23,\n        max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, \"00:00\",\n          \"23:00\")\n      });\n\n      this.$refs.form_day.reset();\n\n    },\n    add_time_reversation() {\n\n      if (this.day_to_open.length < 1) {\n        this.date_update = 1;\n        this.day_to_open.push({\n          every_day: this.everyday,\n          every_time: this.everytime,\n          from_day: 0,\n          from_time: this.fromtime,\n          to_day: 6,\n          to_time: this.totime,\n          max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, this\n            .fromtime, this.totime)\n        });\n\n        this.$refs.form_day.reset();\n      } else {\n        this.$swal('تحذير', \" لايمكن اضافة وقت اخر\", 'warning')\n      }\n\n\n    },\n    pickFile(index) {\n\n      this.img_cliced = index\n      this.$refs.image.click()\n    },\n\n    onFilePicked(e) {\n\n      const files = e.target.files\n      if (files[0] !== undefined) {\n        this.imageName = files[0].name\n        if (this.imageName.lastIndexOf('.') <= 0) {\n          return\n        }\n        const fr = new FileReader()\n        fr.readAsDataURL(files[0])\n        fr.addEventListener('load', () => {\n          this.imageUrl = fr.result\n          this.imageFile = files[0]\n          var imbase64 = fr.result;\n          this.images[this.img_cliced] = imbase64;\n          console.log(this.images)\n          this.img_name = this.imageName\n          //  this.info.images[this.img_cliced].image_path=fr.result\n\n\n\n        })\n\n      } else {\n        this.imageName = ''\n        this.imageFile = ''\n        this.imageUrl = ''\n      }\n    },\n\n    change_payment(status) {\n      if (status == true) {\n        this.free_cancelation = false;\n      }\n    },\n    updatetime(item, index) {\n\n      this.fromday = this.days[item.from_day];\n      this.fromtime = item.from_time;\n      this.totime = item.to_time;\n      this.day_to_open.splice(index, 1);\n    }\n  },\n\n\n\n  mounted() {\n    this.token = localStorage.getItem('access_token');\n    this.user_info = JSON.parse(localStorage.getItem('user_info'));\n\n\n    this.getCategory();\n    this.getProvince();\n    this.getItemDetails();\n  },\n  components: {\n    GoogleMap,\n    itemForm\n  }\n}\n",{"version":3,"sources":["item_form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+dA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;;;AAIA;;;AAGA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;;;;;AAKA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;;;AAKA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;;;;;AAKA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;;;AAGA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"item_form.vue","sourceRoot":"src/components/admin/components","sourcesContent":["<template>\n\n  <v-form ref=\"form\" v-model=\"valid\">\n    <v-card>\n\n\n      <v-row class=\"mb-6\" style=\"background:#424242; padding:10px;margin:0px\" justify=\"center\">\n\n\n        \n\n         <v-card-title class=\"headline grey lighten-2\" primary-title\n              style=\"\tfont-family: 'droid_bold' !important;    background-color: #435c6f!important;color:#fff\">\n            اضافة حجز سس\n            </v-card-title>\n\n      </v-row>\n\n      <v-container style=\"padding:30px\">\n\n        <h3 class=\"mb-3\">اضافة معلssssومات الحجز </h3>\n\n\n\n        <v-divider class=\"mb-4\"></v-divider>\n\n\n\n        <v-layout row wrap>\n          <v-flex pa-3 xs6>\n            <v-text-field solo=\"\" background-color=\"#eeeeee\" dense=\"\" height=\"40\" style=\"\" placeholder=\"اسم الحجز\"\n              v-model=\"info.name\" :rules=\"nameRules\" required></v-text-field>\n          </v-flex>\n          <v-flex xs6 pa-3>\n            <v-text-field solo=\"\" background-color=\"#eeeeee\" dense=\"\" height=\"40\" placeholder=\" سعر الحجز\"\n              data-vv-name=\"name\" v-model=\"info.item_price.price\" :rules=\"numberRul\" required>\n            </v-text-field>\n          </v-flex>\n          <!-- <v-flex pa-3 xs6>\n              <v-text-field  \n                background-color=\"#eeeeee\" \n             height=\"40\"\n             placeholder=\" عدد الاشياء\" v-model=\"number\" :rules=\"numberRul\" required></v-text-field>\n            </v-flex> -->\n\n        </v-layout>\n\n        <v-layout row wrap>\n\n          <v-flex pa-3 xs6>\n            <v-select solo=\"\" background-color=\"#eeeeee\" dense=\"\" height=\"40\" :rules=\"nameRules\" class=\"my-2\"\n              :items=\"category\" item-value=\"id\" item-text=\"name\" v-model=\"info.sub_category.category_id\"\n              placeholder=\"  التصنيف الرئيسي\" @change=\"getSubCategory()\" required></v-select>\n          </v-flex>\n\n\n          <v-flex pa-3 xs6>\n            <v-select :rules=\"nameRules\" segmented class=\"my-2\" :items=\"subcategory\" item-value=\"id\" item-text=\"name\"\n              solo=\"\" background-color=\"#eeeeee\" dense=\"\" height=\"40\" v-model=\"info.sub_category.id\"\n              placeholder=\" التصنيف الفرعي\" @change=\"dis()\" required></v-select>\n          </v-flex>\n\n        </v-layout>\n\n\n\n\n\n\n\n\n\n        <v-layout column=\"\" wrap pa-2>\n          <h3>معلومات الموقع </h3>\n\n\n        </v-layout>\n        <v-divider class=\"mb-4\"></v-divider>\n\n        <v-row justify=\"center\">\n\n\n          <v-flex pa-2 xs2>\n            <v-select background-color=\"#eeeeee\" height=\"40\" item-value=\"id\" item-text=\"province_name\" :items=\"province\"\n              placeholder=\" المحافظة\" target=\"#dropdown-example\" v-model=\"info.address.province_id\" required solo=\"\"\n              :rules=\"nameRules\"></v-select>\n          </v-flex>\n\n\n          <v-flex pa-2 xs3>\n            <v-text-field background-color=\"#eeeeee\" height=\"40\" placeholder=\" الوصف \" solo=\"\"\n              v-model=\"info.address.discraption\" :rules=\"nameRules\" required></v-text-field>\n          </v-flex>\n          <v-row style=\"margin-left:5px; margin-right:5px\">\n\n            <v-flex xs6 pl-2 pt-2>\n              <v-text-field background-color=\"#eeeeee\" height=\"40\" placeholder=\" الطول \" disabled readonly solo=\"\"\n                v-model=\"info.address.lat\" :rules=\"nameRules\" required></v-text-field>\n            </v-flex>\n\n            <v-flex xs6 pr-2 pt-2>\n              <v-text-field background-color=\"#eeeeee\" height=\"40\" placeholder=\" العرض \" disabled readonly solo=\"\"\n                v-model=\"info.address.long\" :rules=\"nameRules\" required></v-text-field>\n            </v-flex>\n          </v-row>\n\n\n          <v-flex xs2 pa-2>\n            <v-btn color=\"info\" @click=\"map_dialog=true\" height=\"45\">اختيار موقع</v-btn>\n          </v-flex>\n\n        </v-row>\n\n\n\n\n\n        <!-- <v-row justify=\"center\">\n          \n            \n             <v-flex pa-3 xs6>\n              <v-select \n                  solo=\"\"\n         background-color=\"#eeeeee\"\n           dense=\"\"\n             height=\"40\"\n              item-value=\"id\"\n               item-text=\"province_name\"\n                 :items=\"province\" placeholder=\" المحافظة\" target=\"#dropdown-example\"\n                v-model=\"info.address.province_id\" required  :rules=\"nameRules\"></v-select>\n            </v-flex>\n\n\n             <v-flex pa-3 xs4>\n              <v-text-field  \n                   solo=\"\"\n         background-color=\"#eeeeee\"\n           dense=\"\"\n             height=\"40\"\n             placeholder=\" الوصف \" v-model=\"info.address.discraption\" :rules=\"nameRules\" required></v-text-field>\n            </v-flex>\n             <v-flex  xs2 pt-3>\n               <v-btn color=\"info\" @click=\"map_dialog=true\">اختيار موقع</v-btn>\n             </v-flex>\n\n          </v-row> -->\n\n\n        <v-dialog v-model=\"map_dialog\" max-width=\"700px\">\n\n          <google-map @getmyLocation=\"getlocation\" @cancel=\"map_dialog=false\" />\n\n        </v-dialog>\n\n\n        <v-layout column=\"\" wrap pa-2>\n          <h3>معلومات الدفع </h3>\n\n\n        </v-layout>\n        <v-divider class=\"mb-4\"></v-divider>\n\n\n        <v-row justify=\"center\">\n\n          <v-flex xs3 pa-1>\n            <v-checkbox v-model=\"info.item_price.book_without_credit_card\" label=\"الحجز بدون بطاقة دفع\"\n              @change=\"change_payment\" required></v-checkbox>\n          </v-flex>\n          <!-- :disabled=\"payment\" -->\n          <v-flex xs3 pa-1>\n            <v-checkbox v-model=\"info.item_price.free_cancellation\" label=\"امكانية الغاء الحجز\" required></v-checkbox>\n          </v-flex>\n\n          <v-flex xs4>\n\n\n            <v-text-field v-if=\"!info.item_price.book_without_credit_card\" class=\"deucation_txfield\"\n              prepend-inner-icon=\"fas fa-percent\" style=\"padding:10px; font-size:20px\" solo=\"\"\n              background-color=\"#eeeeee\" dense=\"\" height=\"40\" placeholder=\"  نسبة الاستقطاع\" data-vv-name=\"name\"\n              :disabled=\"!info.item_price.free_cancellation\" v-model=\"info.item_price.deduction\" :rules=\"numberRul1\">\n            </v-text-field>\n\n            <!-- <v-select v-show=\"free_cancelation\"\n                background-color=\"#eeeeee\" \n                :disabled=\"!free_cancelation\"\n             height=\"40\"\n             :items=\"deduction\" placeholder=\"نسبة الاستقطاع\" \n                v-model=\"deductionvalue\" ></v-select> -->\n          </v-flex>\n          <v-flex xs2>\n\n          </v-flex>\n        </v-row>\n\n\n        <v-row>\n          <v-col>\n\n          </v-col>\n        </v-row>\n\n\n\n\n\n\n        <v-layout column=\"\" wrap pa-2>\n          <h3>جدول الحجز</h3>\n\n\n        </v-layout>\n        <v-divider></v-divider>\n\n\n        <v-row>\n\n          <v-flex xs2>\n            <v-checkbox v-model=\"info.day_to_open[0].every_day\" label=\" كل الايام \" @change=\"change_timeday\">\n            </v-checkbox>\n          </v-flex>\n          <v-flex xs2>\n            <v-checkbox v-model=\"info.day_to_open[0].every_time\" label=\"كل الساعات  \" @change=\"change_timeday\">\n            </v-checkbox>\n          </v-flex>\n\n\n          <v-flex xs3 pl-3 v-if=\"info.day_to_open[0].every_day\">\n            <v-select v-if=\"info.day_to_open[0].every_time\" solo=\"\" background-color=\"#eeeeee\" height=\"40\"\n              :items=\"reve_type\" placeholder=\" نوع الحجز\" item-value=\"id\" item-text=\"duration\"\n              @change=\"select_reser_type\"></v-select>\n          </v-flex>\n\n\n          <v-flex xs3>\n\n\n\n\n\n            <v-menu v-if=\"book_dur_status\" v-show=\"everyday\" ref=\"menu3\" v-model=\"menu4\" :close-on-content-click=\"false\"\n              :nudge-right=\"40\" :return-value.sync=\"reservation_duration\" transition=\"scale-transition\" offset-y\n              max-width=\"290px\" min-width=\"290px\">\n              <template v-slot:activator=\"{ on }\">\n                <v-text-field v-model=\"reservation_duration\" placeholder=\" مدة الحجز الواحد \" solo=\"\"\n                  background-color=\"#eeeeee\" height=\"40\" required readonly v-on=\"on\"></v-text-field>\n              </template>\n              <v-time-picker v-if=\"menu4\" v-model=\"reservation_duration\" full-width\n                @click:minute=\"$refs.menu3.save(reservation_duration)\"></v-time-picker>\n            </v-menu>\n\n\n\n\n            <v-text-field v-if=\"book_num_status\" solo=\"\" background-color=\"#eeeeee\" height=\"40\"\n              placeholder=\"   عدد الحجز باليوم الواحد \" :rules=\"numberRul\" v-model=\"request\"></v-text-field>\n          </v-flex>\n\n        </v-row>\n\n\n\n\n\n\n        <v-form ref=\"form_day\" v-model=\"valid_day\">\n          <v-layout row wrap v-if=\"info.day_to_open[0].every_time==false || info.day_to_open[0].every_day==false\">\n            <v-flex pa-1 xs2 v-if=\"!info.day_to_open[0].every_day\">\n              <v-select solo=\"\" background-color=\"#eeeeee\" dense=\"\" height=\"40\" class=\"my-2\" :items=\"days\"\n                v-model=\"fromday\" placeholder=\"  اليوم\" :rules=\"nameRules\" required></v-select>\n            </v-flex>\n\n\n\n\n\n            <v-flex pa-3 xs2 v-if=\"!info.day_to_open[0].every_time\">\n\n              <v-menu ref=\"menu\" v-model=\"menu1\" :close-on-content-click=\"false\" :nudge-right=\"40\"\n                :return-value.sync=\"fromtime\" transition=\"scale-transition\" offset-y max-width=\"290px\"\n                min-width=\"290px\">\n                <template v-slot:activator=\"{ on }\">\n                  <v-text-field v-model=\"fromtime\" placeholder=\"من الساعة \" solo=\"\" dense=\"\" background-color=\"#eeeeee\"\n                    height=\"40\" required readonly v-on=\"on\"></v-text-field>\n                </template>\n                <v-time-picker v-if=\"menu1\" v-model=\"fromtime\" full-width @click:minute=\"$refs.menu.save(fromtime)\">\n                </v-time-picker>\n              </v-menu>\n\n            </v-flex>\n\n            <v-flex pa-3 xs2 v-if=\"!info.day_to_open[0].every_time\">\n\n              <v-menu ref=\"menu1\" v-model=\"menu2\" :close-on-content-click=\"false\" :nudge-right=\"40\"\n                :return-value.sync=\"totime\" transition=\"scale-transition\" offset-y max-width=\"290px\" min-width=\"290px\">\n                <template v-slot:activator=\"{ on }\">\n                  <v-text-field v-model=\"totime\" placeholder=\" الى الساعة \" solo=\"\" background-color=\"#eeeeee\"\n                    height=\"40\" required dense=\"\" readonly :allowed-hours=\"allowedHours\" v-on=\"on\"></v-text-field>\n                </template>\n                <v-time-picker v-if=\"menu2\" v-model=\"totime\" full-width @click:minute=\"$refs.menu1.save(totime)\">\n                </v-time-picker>\n              </v-menu>\n\n            </v-flex>\n            <v-flex xs2 pa-3>\n              <v-select solo=\"\" background-color=\"#eeeeee\" dense=\"\" height=\"40\" :items=\"reve_type1\"\n                placeholder=\" نوع الحجز\" item-value=\"id\" item-text=\"duration\" @change=\"select_reser_type1\"></v-select>\n            </v-flex>\n\n\n            <v-flex xs2 pa-3>\n\n\n\n\n\n              <v-menu v-if=\"reserv_type_id1==1\" ref=\"menu4\" v-model=\"menu3\" :close-on-content-click=\"false\"\n                :nudge-right=\"40\" :return-value.sync=\"reservation_duration_foroneday\" transition=\"scale-transition\"\n                offset-y max-width=\"290px\" min-width=\"290px\">\n                <template v-slot:activator=\"{ on }\">\n\n                  <v-text-field v-model=\"reservation_duration_foroneday\" placeholder=\" مدة الحجز  \" solo=\"\" dense=\"\"\n                    background-color=\"#eeeeee\" height=\"40\" required readonly v-on=\"on\"></v-text-field>\n                </template>\n                <v-time-picker v-if=\"menu3\" v-model=\"reservation_duration_foroneday\" full-width\n                  @click:minute=\"$refs.menu4.save(reservation_duration_foroneday)\"></v-time-picker>\n              </v-menu>\n\n\n\n\n              <v-text-field v-if=\"reserv_type_id1==2\" solo=\"\" background-color=\"#eeeeee\" height=\"40\" dense=\"\"\n                placeholder=\"   عدد الحجز   \" :rules=\"numberRul\" v-model=\"request\"></v-text-field>\n            </v-flex>\n\n\n\n            <v-flex pa-3 mt-5 xs2>\n              <v-btn color=\"success\" @click=\"addday\">اضافة</v-btn>\n            </v-flex>\n          </v-layout>\n        </v-form>\n        <v-row>\n          <v-flex xs5 pa-3 v-for=\"(item,index)  in day_to_open \">\n            <v-card outlined=\"\" class=\"mb-6\">\n              <v-row>\n\n                <v-card-title pl-5 pr-5>\n                  <v-btn color=\"primary\" v-if=\"item.every_day==0\" @click=\"updatetime(item,index)\">\n                    <v-icon right size=\"20\">fas fa-edit</v-icon>\n\n                    {{days[item.from_day]}}\n                  </v-btn>\n\n\n                  <v-btn color=\"primary\" v-else @click=\"day_to_open=[]\">\n                    <v-icon right size=\"20\">fas fa-times-circle</v-icon>\n                    كل الايام\n                  </v-btn>\n\n\n\n                </v-card-title>\n                <v-divider vertical=\"\"></v-divider>\n                <v-row v-if=\"item.every_time!=1\">\n\n\n                  <v-card-title>\n                    {{item.from_time}}\n                  </v-card-title>\n                  <v-divider vertical=\"\"></v-divider>\n                  <v-card-title>\n                    الى\n                  </v-card-title>\n                  <v-divider vertical=\"\"></v-divider>\n                  <v-card-title>\n                    {{item.to_time}}\n                  </v-card-title>\n\n                </v-row>\n                <v-row v-else>\n\n\n\n                  <v-card-title>\n                    كل الاوقات\n                  </v-card-title>\n\n                </v-row>\n\n\n\n              </v-row>\n            </v-card>\n          </v-flex>\n          <v-flex xs4>\n\n          </v-flex>\n        </v-row>\n        <v-row justify=\"center\">\n\n          <v-alert dense outlined type=\"error\" v-show=\"msg_error\">\n            <span style=\"padding-right:10px\">{{msg_error_txt}} </span>\n\n          </v-alert>\n\n        </v-row>\n        <v-layout row wrap pa-2>\n          <v-textarea name=\"input-7-1\" placeholder=\"الوصف \" v-model=\"info.disc\" :rules=\"descriptRules\" required\n            outlined=\"\"></v-textarea>\n        </v-layout>\n\n        <v-row justify=\"center\">\n          <v-flex pa-5 xs3>\n            <!-- <v-text-field label=\"اختر صورة \" solo=\"\" @click='pickFile' append-icon='fas fa-image'></v-text-field> -->\n          </v-flex>\n          <v-flex pa-5>\n            <input type=\"file\" style=\"display: none\" ref=\"image\" accept=\"image/*\" @change=\"onFilePicked\">\n          </v-flex>\n\n        </v-row>\n\n        <v-row>\n          <v-chip style=\"display:none\">{{img_name}}</v-chip>\n        </v-row>\n        <v-layout row wrap>\n          <v-row justify=\"center\">\n            <v-flex xs2 v-for=\"(img ,index) in images\" pa-2>\n\n              <v-card height=\"150\" width=\"150\" class=\"card_img\">\n                <v-img :src=\"img\" height=\"150\" width=\"150\" class=\"card_img\" v-if=\"img!=null\">\n                  <v-btn icon=\"\" @click=\"delete_img(info.images[index].id,index)\" v-if=\"info.images[index]!=null\">\n                    <v-icon color=\"white\">fas fa-window-close</v-icon>\n                  </v-btn>\n                  <v-btn icon=\"\" @click=\"images[index]=null;img_name=null\" v-else>\n                    <v-icon color=\"white\">fas fa-window-close</v-icon>\n                  </v-btn>\n\n                </v-img>\n\n                <v-btn icon v-else @click='pickFile(index)'>\n                  <v-icon style=\"margin:0px\" size=\"40\">fas fa-plus-square</v-icon>\n                </v-btn>\n\n                <!-- <v-container fluid=\"\"     style=\"width:100%;height:100%\" @>\n            \n           </v-container> -->\n\n              </v-card>\n\n\n            </v-flex>\n          </v-row>\n        </v-layout>\n\n\n\n        <v-card-actions>\n          <v-row>\n\n\n            <v-btn @click=\"submit\" color=\"success\" style=\"margin-left:10px\">\n              <span v-show=\"!loading\">حفظ</span>\n              <v-progress-circular indeterminate color=\"white\" v-show=\"loading\"></v-progress-circular>\n            </v-btn>\n            <v-btn @click=\"cancel\" color=\"red\" dark=\"\"> الغاء</v-btn>\n          </v-row>\n\n          <v-spacer></v-spacer>\n\n        </v-card-actions>\n\n      </v-container>\n    </v-card>\n  </v-form>\n\n</template>\n\n<script>\n  import GoogleMap from '../components/map'\n  import itemForm from '../components/item_form'\n\n  export default {\n    props: ['itemId'],\n    // props: {\n    //   'itemId': String,\n    //   'hidden': Boolean\n    // },\n    data: () => ({\n      info: {},\n      user_info: {},\n      token: '',\n      err_show: false,\n      menu1: false,\n      menu2: false,\n      menu3: false,\n      menu4: false,\n      map_dialog: false,\n      modal2: false,\n      book_dur_status: false,\n      book_num_status: false,\n      reve_type: [{\n        id: 0,\n        duration: 'غير محدود'\n      }, {\n        id: 1,\n        duration: 'اختيار فترة'\n      }, {\n        id: 2,\n        duration: 'اختيار عدد لليوم الواحد'\n      }],\n      reve_type1: [{\n        id: 0,\n        duration: 'غير محدود'\n      }, {\n        id: 1,\n        duration: 'اختيار فترة'\n      }, {\n        id: 2,\n        duration: 'اختيار عدد  '\n      }],\n      error: '',\n      msg_error_txt: 'هذا اليوم مكرر ',\n      urL: 'http://109.224.53.155',\n\n      items: [],\n\n\n      valid: false,\n      deduction: [\"2%\", \"5%\", \"10%\", \"12%\", \"50%\"],\n      days: [\"السبت\", \"الاحد\", \"الاثنين\", \"الثلاثاء\", \"الاربعاء\", \"الخميس\", \"الجمعة\", \"كل الايام\"],\n      times: [\"1:00 م\", \"2:00 م\", \"3:00 م\", \"4:00 م \", \"5:00 م\", \"6:00 م\", \"7:00 م \", \"8:00 م\", \"9:00 م\", \"10:00 م\",\n        \"11:00 م\", \"12:00 م\",\n        \"1:00 ص\", \"2:00 ص\", \"3:00 ص\", \"4:00 ص \", \"5:00 ص\", \"6:00 ص\", \"7:00 ص \", \"8:00 ص\", \"9:00 ص\", \"10:00 ص\",\n        \"11:00 ص\", \"12:00 ص\"\n      ],\n\n      img_cliced: -1,\n      day_to_open: [],\n\n      nameRules: [\n        v => !!v || 'هذا الحقل مطلوب  ',\n\n      ],\n      numberRul: [\n        v => !!v || 'هذا الحقل مطلوب  ',\n\n        v => !isNaN(v) || 'يجب ادخال رقم ',\n      ],\n      numberRul1: [\n\n        v => !isNaN(v) || 'يجب ادخال رقم ',\n      ],\n      descriptRules: [\n        v => !!v || 'هذا الحقل مطلوب  ',\n      ],\n      loading: false,\n      province: [],\n      imageName: '',\n      imageUrl: '',\n      imageFile: '',\n      images: [null, null, null, null],\n      name: '',\n      number: '',\n      description: '',\n\n      request: 0,\n      payment: false,\n      free_cancelation: false,\n      deductionvalue: 0,\n      everyday: false,\n      everytime: false,\n      fromday: '',\n      today: '',\n      fromtime: '',\n      totime: '',\n      current_page: 0,\n      last_page: 0,\n      subcategory: [],\n      sub_category_id: '',\n      category: [],\n      category_id: '',\n      addressDiscription: '',\n      prov_id: '',\n      msg_error: false,\n      reserv_type_id: -1,\n      reservation_duration: '',\n      reservation_duration_foroneday: '',\n      reserv_type_id1: -1,\n      valid_day: true,\n      img_name: '',\n      lat: 0,\n      lng: 0,\n      date_update: 0\n    }),\n\n\n\n    methods: {\n\n      getlocation(lat, lng) {\n        this.info.address.lat = lat;\n        this.info.address.long = lng\n\n        this.map_dialog = false;\n\n\n      },\n\n\n\n      delete_img(img_id, index) {\n\n\n        const Swal = require('sweetalert2');\n\n\n\n        Swal.fire({\n          title: \"هل انت متاكد من الحذف ؟\",\n\n          icon: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: '#3085d6',\n          cancelButtonColor: '#d33',\n          confirmButtonText: 'Yes, delete it!'\n\n        }).then((result) => {\n          if (result.value) {\n            this.img_cliced = index;\n\n            var url = this.urL + \"/delete_item_img/\" + img_id;\n            axios({\n              method: 'get',\n              url: url,\n              headers: {\n                token: this.token\n              }\n\n            }).then(response => {\n\n\n              this.info.images[index].image_path = null;\n              this.img_name = index;\n              this.images[index] = null;\n\n              Swal.fire(\n                'تم الحذف بنجاح',\n                '',\n                'success'\n              )\n\n            }).catch(error => {\n              this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n            }).finally(d => {\n\n              this.getitems();\n            });\n\n\n\n          }\n        })\n\n\n\n\n      },\n\n      cancel() {\n        this.$emit(\"changeStatus\", false);\n      },\n      getItemDetails() {\n\n        var url = this.urL + \"/getItemBy/\" + this.itemId;\n        axios.get(url).then(response => {\n          this.info = response.data.Data[0];\n          this.imgs = this.info.images;\n          this.address = response.data.Data[0].address.province.province_name;\n\n          for (var i = 0; i < 4; i++) {\n            this.images[i] = this.urL + \"/\" + this.info.images[i].image_path;\n\n          }\n\n          for (var a = 0; a < this.info.day_to_open.length; a++) {\n\n            this.day_to_open.push({\n\n              every_day: this.info.day_to_open[a].every_day,\n              every_time: this.info.day_to_open[a].every_time,\n              from_day: this.info.day_to_open[a].from_day,\n              from_time: this.info.day_to_open[a].from_time,\n              to_day: this.info.day_to_open[a].to_day,\n              to_time: this.info.day_to_open[a].to_time,\n              max_requests: this.info.day_to_open[a].max_requests\n            });\n\n          }\n          if (this.info.day_to_open.length < 1) {\n\n            this.info.day_to_open.push({\n              id: 0,\n\n              every_day: 0,\n              every_time: 0,\n              from_day: 0,\n              from_time: 0,\n              to_day: 0,\n              to_time: 0,\n              max_requests: 0\n            });\n          }\n\n          this.getSubCategory();\n\n        })\n      },\n      //         getDate_andTime(id){\n\n      //   var url = this.urL + \"/getDaysTime/\" +id;\n      //         axios.get(url).then(response => {\n\n\n\n      //           })},\n      change_timeday() {\n        this.day_to_open.length = 0;\n        this.deductionvalue = 0;\n      },\n      select_reser_type1(id) {\n\n        this.reserv_type_id1 = id;\n      },\n      select_reser_type(id) {\n\n        this.reserv_type_id = id;\n        if (id == 1) {\n          this.book_dur_status = true;\n          this.book_num_status = false;\n        } else if (id == 2) {\n          this.book_dur_status = false;\n          this.book_num_status = true;\n        } else {\n          this.book_dur_status = false;\n          this.book_num_status = false;\n        }\n      },\n\n      allowedHours(v) {\n\n        return false;\n      },\n\n      comput_maxRequest(id, time_duration, from_tim, to_tim) {\n\n        if (id == 0) {\n          return 0;\n        } else if (id == 1) {\n          // this.reservation_duration\n\n          var from_hour = parseInt(from_tim.split(\":\")[0])\n          var from_min = parseInt(from_tim.split(\":\")[1])\n\n\n          var to_hour = parseInt(to_tim.split(\":\")[0])\n          var to_min = parseInt(to_tim.split(\":\")[1])\n\n          var from = from_hour * 60 + from_min;\n\n\n          var to = to_hour * 60 + to_min;\n\n          var result = to - from;\n\n          var houer = parseInt(time_duration.split(\":\")[0]);\n          var minit = parseInt(time_duration.split(\":\")[1]);\n\n          var dur = houer * 60 + minit;\n\n          result = result / dur\n\n          return result\n\n        } else {\n          return 0\n        }\n\n\n\n\n      },\n      submit() {\n\n        var imag = [];\n\n        if (this.info.images.length < 1) {\n          for (var im = 0; im < this.images.length; im++) {\n\n            imag.push(this.images[im]);\n\n\n          }\n        } else {\n\n          for (var im = 0; im < this.images.length; im++) {\n            if (this.images[im] != null && this.images[im] != this.urL + \"/\" + this.info.images[im].image_path) {\n\n              imag.push(this.images[im]);\n            } else if (this.images[im] != null) {\n\n            }\n\n          }\n\n        }\n\n        if (this.info.day_to_open[0].every_day && this.info.day_to_open[0].every_time) {\n          this.day_to_open.length = 0\n          this.date_update = 1;\n          this.day_to_open.push({\n\n            every_day: 1,\n            every_time: 1,\n            from_day: 0,\n            from_time: \"00:00\",\n            to_day: 6,\n            to_time: \"24:00\",\n            max_requests: this.comput_maxRequest(this.reserv_type_id, this.reservation_duration, \"00:00\", \"24:00\")\n          });\n\n        }\n\n        if (this.day_to_open.length == 0) {\n          this.$swal('تحذير', \"    يجب اختيار جدول الحجز\", 'warning')\n        }\n\n        if (this.info.images.find(im => im === 'a')) {\n          this.$swal('تحذير', \" يجب اختيار 4 من الصور\", 'warning')\n        }\n\n\n        if (this.$refs.form.validate() && this.day_to_open.length > 0) {\n\n          var data = {\n\n            province_id: this.info.address.province.id,\n            country_id: this.info.address.province.country_id,\n            category_id: this.info.sub_category.category_id,\n            long: this.info.address.long,\n            lat: this.info.address.lat,\n            address_id: this.info.address.id,\n            name: this.info.name,\n            number: 0,\n            discraption: this.info.disc,\n            address_discraption: this.info.address.discraption,\n            max_requests: this.info.max_requests,\n\n            sub_category_id: this.info.sub_category.id,\n\n            owner_id: \"8\",\n\n            price: this.info.item_price.price,\n\n            book_without_credit_card: this.info.item_price.book_without_credit_card,\n\n            free_cancellation: this.info.item_price.free_cancellation,\n            deduction: this.info.item_price.deduction,\n\n            no_prepayment: \"1\",\n            cancellation_deduction_ratio: \"1\",\n            work_times: this.day_to_open,\n\n            type: \"png\",\n            images: imag.length != 0 ? imag : [\"a\", \"a\", \"a\", \"a\"],\n            time_open_id: this.info.day_to_open[0].id,\n            day_open_id: this.info.day_to_open[0].id,\n            item_price_id: this.info.item_price.id,\n            day_to_open_update: this.date_update\n          };\n          // this.description=JSON.stringify(data);\n\n          this.loading = true;\n          axios({\n              method: 'post',\n              url: this.urL + \"/updateItem/\" + this.itemId,\n              data: data,\n              headers: {\n                token: this.token\n              }\n\n            })\n            .then(response => {\n              this.$swal('تم', \"    تم تعديل الحجز\", 'success')\n\n              this.dialog = false;\n              this.current_page = 0;\n              this.getitems();\n              this.$refs.form.reset();\n\n              if (response.data.success == true) {\n                this.$refs.form.reset()\n                this.dialog = false;\n                this.current_page = 0;\n                this.getitems();\n              }\n              // \n\n\n\n            })\n            .catch(error => {\n              this.err_show = true;\n              this.$swal(error, \"     لم يتم اضافة الحجز\", 'error')\n\n            }).finally(d => {\n              this.loading = false;\n              this.everyday = false;\n              this.everytime = false;\n            });\n        } else {\n\n          this.err_show = true;\n\n\n\n\n        }\n\n\n\n\n      },\n      getCategory() {\n\n        var url = this.urL + \"/getInfo/Category\";\n        axios.get(url).then(response => {\n          this.category = response.data.Data;\n\n\n\n        })\n      },\n\n\n      getImageData(url) {\n\n        const image2base64 = require('image-to-base64');\n        image2base64(url) // you can also to use url\n          .then(\n            (response) => {\n              console.log(response); //cGF0aC90by9maWxlLmpwZw==\n            }\n          )\n          .catch(\n            (error) => {\n\n            }\n          )\n\n      },\n\n      getSubCategory() {\n\n        var url = this.urL + \"/getInfo/SubCategory/\" + this.info.sub_category.category_id;\n        axios.get(url).then(response => {\n          this.subcategory = response.data.Data;\n\n\n\n        })\n      },\n      getProvince() {\n\n        var url = this.urL + \"/getInfo/Province/1\";\n        axios.get(url).then(response => {\n          this.province = response.data.Data;\n\n\n\n        })\n      },\n\n\n      addday() {\n        if (this.$refs.form_day.validate()) {\n\n\n          this.msg_error = false;\n\n\n          let search = this.day_to_open.find((o, i) => {\n            if (o.from_day == this.days.indexOf(this.fromday)) {\n              return o;\n            }\n          });\n\n\n          if (search == undefined) {\n            if (this.everytime && !this.everyday) {\n              this.add_day_reversation();\n            } else if (this.everyday && !this.everytime) {\n              this.add_time_reversation();\n            } else {\n              this.add_dayTime_reversation();\n\n            }\n          } else {\n            this.$swal('تحذير', \"  لايمكن تكرار اليوم\", 'warning')\n\n            this.$refs.form_day.reset();\n          }\n\n        }\n\n      },\n      add_dayTime_reversation() {\n        this.date_update = 1;\n\n        this.day_to_open.push({\n          every_day: this.everyday,\n          every_time: this.everytime,\n          from_day: this.days.indexOf(this.fromday),\n          from_time: this.fromtime,\n          to_day: this.days.indexOf(this.fromday),\n          to_time: this.totime,\n          max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, this\n            .fromtime, this.totime)\n        });\n\n        this.$refs.form_day.reset();\n\n      },\n      add_day_reversation() {\n        this.date_update = 1;\n        this.day_to_open.push({\n          every_day: this.everyday,\n          every_time: this.everytime,\n          from_day: this.days.indexOf(this.fromday),\n          from_time: 0,\n          to_day: this.days.indexOf(this.fromday),\n          to_time: 23,\n          max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, \"00:00\",\n            \"23:00\")\n        });\n\n        this.$refs.form_day.reset();\n\n      },\n      add_time_reversation() {\n\n        if (this.day_to_open.length < 1) {\n          this.date_update = 1;\n          this.day_to_open.push({\n            every_day: this.everyday,\n            every_time: this.everytime,\n            from_day: 0,\n            from_time: this.fromtime,\n            to_day: 6,\n            to_time: this.totime,\n            max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, this\n              .fromtime, this.totime)\n          });\n\n          this.$refs.form_day.reset();\n        } else {\n          this.$swal('تحذير', \" لايمكن اضافة وقت اخر\", 'warning')\n        }\n\n\n      },\n      pickFile(index) {\n\n        this.img_cliced = index\n        this.$refs.image.click()\n      },\n\n      onFilePicked(e) {\n\n        const files = e.target.files\n        if (files[0] !== undefined) {\n          this.imageName = files[0].name\n          if (this.imageName.lastIndexOf('.') <= 0) {\n            return\n          }\n          const fr = new FileReader()\n          fr.readAsDataURL(files[0])\n          fr.addEventListener('load', () => {\n            this.imageUrl = fr.result\n            this.imageFile = files[0]\n            var imbase64 = fr.result;\n            this.images[this.img_cliced] = imbase64;\n            console.log(this.images)\n            this.img_name = this.imageName\n            //  this.info.images[this.img_cliced].image_path=fr.result\n\n\n\n          })\n\n        } else {\n          this.imageName = ''\n          this.imageFile = ''\n          this.imageUrl = ''\n        }\n      },\n\n      change_payment(status) {\n        if (status == true) {\n          this.free_cancelation = false;\n        }\n      },\n      updatetime(item, index) {\n\n        this.fromday = this.days[item.from_day];\n        this.fromtime = item.from_time;\n        this.totime = item.to_time;\n        this.day_to_open.splice(index, 1);\n      }\n    },\n\n\n\n    mounted() {\n      this.token = localStorage.getItem('access_token');\n      this.user_info = JSON.parse(localStorage.getItem('user_info'));\n\n\n      this.getCategory();\n      this.getProvince();\n      this.getItemDetails();\n    },\n    components: {\n      GoogleMap,\n      itemForm\n    }\n  }\n</script>"]}]}