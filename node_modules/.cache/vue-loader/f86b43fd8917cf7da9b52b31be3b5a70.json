{"remainingRequest":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/admin/components/subCategory.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/admin/components/subCategory.vue","mtime":1586779863627},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  export default {\n      props: ['itemm'],\n    data: () => ({\n      dialog: false,\n      loading:false,\n      headers: [\n        {\n          text: 'الرقم',\n          align: 'center',\n          sortable: false,\n          value: 'id',\n        },\n        { text: 'اسم القسم الفرعي', value: 'name',  align: 'center', },\n        { text: 'وقت الانشاء', value: 'created_at',  align: 'center', },\n          { text: ' ', value: 'edit',  align: 'center', },\n         { text: ' ', value: 'action',  align: 'center', },\n       \n      ],\n      validate:true,\n     \ncategory:[],\ninfo:{},\ntitle:'',\nid:'',\ntoken:'',\napi:\"/setSubCategory\",\n       valid: false,\n      \n        urL: 'http://109.224.53.155',\n\n        nameRules: [\n          v => !!v || 'هذا الحقل مطلوب  ',\n\n        ],\n        numberRul: [\n          v => !!v || 'هذا الحقل مطلوب  ',\n\n          v => !isNaN(v) || 'يجب ادخال رقم ',\n        ],\n        descriptRules: [\n          v => !!v || 'هذا الحقل مطلوب  ',\n        ],\n\n      \n        name: '',\n        img_name:'',\n        images:[\"ab\"]\n      \n  }),\n\n   \n\n    watch: {\n      dialog (val) {\n        val || this.close()\n      },\n    },\n\n   \n    methods: {\n      \n\n    addsubCat(){\n        this.loading=false;\n        this.name='';\n       \nthis.api=\"/setSubCategory\";\nthis.images=[];\nthis.images.push(\"ab\");\n      },\neditsubCat(item){\n  this.loading=false;\n\nthis.dialog=true;\nthis.name=item.name;\n\nthis.images=[];\nthis.api=\"/UpdateSubCategory/\"+item.id;\nitem.img_path!=null && item.img_path!=\"null\" ? this.images.push(this.urL+\"/\"+item.img_path):this.images.push(\"ab\");\n\n\n\n\n        \n},\n\n      close () {\n        this.dialog = false\n        setTimeout(() => {\n          this.editedItem = Object.assign({}, this.defaultItem)\n          this.editedIndex = -1\n        }, 300)\n      },\n\n   \n       submit() {\n         if(this.images[0].includes(\"http://\")){\n        this.images=[]\n       }else{\n        \n       }\nif (this.$refs.form.validate()) {\n     if(this.images[0]!=\"ab\"){ \n      this.loading=true;\n         var data= {\n               name:this.name,\n                 category_id:this.id,\n                 images:this.images,\n                 type:\"png\"\n              };\n              // this.description=JSON.stringify(data);\n          axios({\n              method: 'post',\n              url: this.urL+this.api,\n              data:data,\n             headers:{ token:this.token}\n            })\n            .then(response => {\n this.dialog=false;\nif(response.data.success==true){\n   this.$refs.form.reset();\n   this.dialog=false;\n   this.$swal('', \"    تم اضافة القسم الفرعي\", 'success')\n}\n             // \nthis.getSubCategory();\n\n\n\n             \n            })\n            .catch(error => {\n this.$swal('خطاء', \"     لم يتم اضافة القسم الفرعي\", 'error')\nif(response.data.success==true){\n   this.$refs.form.reset()\n   this.dialog=false;\n}\n             \n            }).finally(d=>{\n              this.loading=false;\n              \n            });}\n            else{\n               this.$swal('', \"  يجب اضافة صورة للقسم الفرعي\", 'warning');\n            }\n }else{\n    this.$swal('', \"  يجب اضافة صورefge الفرعي\", 'warning')\n }\n\n\n        \n\n      },\n      getSubCategory(){\n                     \nvar url=this.urL+\"/getInfo/SubCategory/\"+this.id;\n   axios.get(url).then(response => {\n       this.category=response.data.Data;\n\n\n\n   })\n      },\n\n\n\n\n\n\n        pickFile() {\n\n    \n        this.$refs.image.click()\n      },\n\n      onFilePicked(e) {\n\n        const files = e.target.files\n        if (files[0] !== undefined) {\n          this.imageName = files[0].name\n          if (this.imageName.lastIndexOf('.') <= 0) {\n            return\n          }\n          const fr = new FileReader()\n          fr.readAsDataURL(files[0])\n          fr.addEventListener('load', () => {\n            this.imageUrl = fr.result\n            this.imageFile = files[0]\n\n            this.images[0] = fr.result;\n            this.img_name=files[0].name;\n           0\n\n          })\n\n        } else {\n          this.imageName = ''\n          this.imageFile = ''\n          this.imageUrl = ''\n        }\n      },\n      \n      \n     \n    },\n mounted() {\n    this.token= localStorage.getItem('access_token');\n    this.id= this.$route.params.id;\n    this.title= this.$route.params.name;\n  this.getSubCategory();\n  \n    },\n  }\n",{"version":3,"sources":["subCategory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;AAMA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;;;;;;;AAOA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"subCategory.vue","sourceRoot":"src/components/admin/components","sourcesContent":["<template>\n<div>\n <v-toolbar flat color=\"white\">\n        <v-toolbar-title> {{title}}</v-toolbar-title>\n        <v-divider\n          class=\"mx-4\"\n          inset\n          vertical\n        ></v-divider>\n        <v-spacer></v-spacer>\n        <v-dialog v-model=\"dialog\" max-width=\"500px\">\n\n          <template v-slot:activator=\"{ on }\">\n            <v-btn color=\"primary\" dark class=\"mb-2\" @click=\"addsubCat\" v-on=\"on\"> اضافه تقسيم فرعي</v-btn>\n          </template>\n            <v-form ref=\"form\" v-model=\"validate\">\n          <v-card style=\"padding:34px\">\n            <v-card-title>\n            \n            </v-card-title>\n\n            <v-row class=\"mb-6\" justify=\"center\">\n            <h4 style=\"color:#000\">اضافة تقسيم </h4>\n          </v-row>\n          <v-row class=\"mb-6\">\n\n          </v-row>\n\n          <v-layout row wrap>\n            <v-flex pa-3>\n              <v-text-field solo label=\"اسم التصنيف\" v-model=\"name\" :rules=\"nameRules\" required></v-text-field>\n            </v-flex>\n       \n          </v-layout>\n <input type=\"file\" style=\"display: none\" ref=\"image\" accept=\"image/*\" @change=\"onFilePicked\">\n  <span style=\"color:#fff\">\n      {{img_name}} </span>\n<v-row justify=\"center\" class=\"mb-6\">\n   <v-card height=\"200\" width=\"200\" class=\"card_img\">\n                      <v-img :src=\"images[0]\" height=\"200\" width=\"200\" class=\"card_img\" v-if=\"images[0]!='ab'\">\n                        <v-btn icon=\"\" @click=\"images[0]='ab';img_name=''\">\n                          <v-icon>fas fa-window-close</v-icon>\n                        </v-btn>\n\n                      </v-img>\n\n                      <v-btn icon v-else @click='pickFile()'>\n                        <v-icon style=\"margin:0px\" size=\"40\">fas fa-plus-square</v-icon>\n                      </v-btn>\n\n                      <!-- <v-container fluid=\"\"     style=\"width:100%;height:100%\" @>\n            \n           </v-container> -->\n\n                    </v-card>\n\n</v-row>\n      \n\n             <v-card-actions>\n               <v-btn color=\"success\" v-if=\"loading\" style=\"margin-left:10px\"> <v-progress-circular indeterminate color=\"white\"></v-progress-circular></v-btn>\n                 <v-btn v-else color=\"success\"  @click=\"submit\" style=\"margin-left:10px\">حفظ</v-btn>\n                \n               <v-btn color=\"red\"  dark=\"\" @click=\"close\">الغاء</v-btn>\n           \n              \n              <v-spacer></v-spacer>\n             \n            </v-card-actions>\n          </v-card>\n            </v-form>\n        </v-dialog>\n      </v-toolbar>\n\n  <v-data-table\n    :headers=\"headers\"\n    :items=\"category\"\n    sort-by=\"calories\"\n    class=\"elevation-1\"\n  >\n  \n     <template v-slot:item.edit=\"{ item }\">\n     \n      <v-btn  icon=\"\" @click=\"editsubCat(item)\">\n        <v-icon>fas fa-edit</v-icon>\n      </v-btn>\n     \n    </template>\n    <template v-slot:no-data>\n        <v-btn color=\"primary\">Reset</v-btn>\n      </template>\n  </v-data-table>\n</div>\n</template>\n\n\n<script>\n  export default {\n      props: ['itemm'],\n    data: () => ({\n      dialog: false,\n      loading:false,\n      headers: [\n        {\n          text: 'الرقم',\n          align: 'center',\n          sortable: false,\n          value: 'id',\n        },\n        { text: 'اسم القسم الفرعي', value: 'name',  align: 'center', },\n        { text: 'وقت الانشاء', value: 'created_at',  align: 'center', },\n          { text: ' ', value: 'edit',  align: 'center', },\n         { text: ' ', value: 'action',  align: 'center', },\n       \n      ],\n      validate:true,\n     \ncategory:[],\ninfo:{},\ntitle:'',\nid:'',\ntoken:'',\napi:\"/setSubCategory\",\n       valid: false,\n      \n        urL: 'http://109.224.53.155',\n\n        nameRules: [\n          v => !!v || 'هذا الحقل مطلوب  ',\n\n        ],\n        numberRul: [\n          v => !!v || 'هذا الحقل مطلوب  ',\n\n          v => !isNaN(v) || 'يجب ادخال رقم ',\n        ],\n        descriptRules: [\n          v => !!v || 'هذا الحقل مطلوب  ',\n        ],\n\n      \n        name: '',\n        img_name:'',\n        images:[\"ab\"]\n      \n  }),\n\n   \n\n    watch: {\n      dialog (val) {\n        val || this.close()\n      },\n    },\n\n   \n    methods: {\n      \n\n    addsubCat(){\n        this.loading=false;\n        this.name='';\n       \nthis.api=\"/setSubCategory\";\nthis.images=[];\nthis.images.push(\"ab\");\n      },\neditsubCat(item){\n  this.loading=false;\n\nthis.dialog=true;\nthis.name=item.name;\n\nthis.images=[];\nthis.api=\"/UpdateSubCategory/\"+item.id;\nitem.img_path!=null && item.img_path!=\"null\" ? this.images.push(this.urL+\"/\"+item.img_path):this.images.push(\"ab\");\n\n\n\n\n        \n},\n\n      close () {\n        this.dialog = false\n        setTimeout(() => {\n          this.editedItem = Object.assign({}, this.defaultItem)\n          this.editedIndex = -1\n        }, 300)\n      },\n\n   \n       submit() {\n         if(this.images[0].includes(\"http://\")){\n        this.images=[]\n       }else{\n        \n       }\nif (this.$refs.form.validate()) {\n     if(this.images[0]!=\"ab\"){ \n      this.loading=true;\n         var data= {\n               name:this.name,\n                 category_id:this.id,\n                 images:this.images,\n                 type:\"png\"\n              };\n              // this.description=JSON.stringify(data);\n          axios({\n              method: 'post',\n              url: this.urL+this.api,\n              data:data,\n             headers:{ token:this.token}\n            })\n            .then(response => {\n this.dialog=false;\nif(response.data.success==true){\n   this.$refs.form.reset();\n   this.dialog=false;\n   this.$swal('', \"    تم اضافة القسم الفرعي\", 'success')\n}\n             // \nthis.getSubCategory();\n\n\n\n             \n            })\n            .catch(error => {\n this.$swal('خطاء', \"     لم يتم اضافة القسم الفرعي\", 'error')\nif(response.data.success==true){\n   this.$refs.form.reset()\n   this.dialog=false;\n}\n             \n            }).finally(d=>{\n              this.loading=false;\n              \n            });}\n            else{\n               this.$swal('', \"  يجب اضافة صورة للقسم الفرعي\", 'warning');\n            }\n }else{\n    this.$swal('', \"  يجب اضافة صورefge الفرعي\", 'warning')\n }\n\n\n        \n\n      },\n      getSubCategory(){\n                     \nvar url=this.urL+\"/getInfo/SubCategory/\"+this.id;\n   axios.get(url).then(response => {\n       this.category=response.data.Data;\n\n\n\n   })\n      },\n\n\n\n\n\n\n        pickFile() {\n\n    \n        this.$refs.image.click()\n      },\n\n      onFilePicked(e) {\n\n        const files = e.target.files\n        if (files[0] !== undefined) {\n          this.imageName = files[0].name\n          if (this.imageName.lastIndexOf('.') <= 0) {\n            return\n          }\n          const fr = new FileReader()\n          fr.readAsDataURL(files[0])\n          fr.addEventListener('load', () => {\n            this.imageUrl = fr.result\n            this.imageFile = files[0]\n\n            this.images[0] = fr.result;\n            this.img_name=files[0].name;\n           0\n\n          })\n\n        } else {\n          this.imageName = ''\n          this.imageFile = ''\n          this.imageUrl = ''\n        }\n      },\n      \n      \n     \n    },\n mounted() {\n    this.token= localStorage.getItem('access_token');\n    this.id= this.$route.params.id;\n    this.title= this.$route.params.name;\n  this.getSubCategory();\n  \n    },\n  }\n</script>"]}]}