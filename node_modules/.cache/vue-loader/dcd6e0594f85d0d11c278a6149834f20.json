{"remainingRequest":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/Owner/components/OwnerDashbourd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/Owner/components/OwnerDashbourd.vue","mtime":1587239265061},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport card from './Card.vue';\n\nimport Donut from 'vue-css-donut-chart'\nimport VueApexCharts from 'vue-apexcharts'\n\nexport default {\n\n\n  data() {\n    return {\n      dialog: false,\n      search: '',\n      page: 1,\n      pageCount: 2,\n      loading: false,\n      id: -1,\n      item_selected: {},\n      loding_accept: false,\n      loding_cancel: false,\n      headers: [{\n          text: 'رقم التعريف',\n          align: 'center',\n          sortable: false,\n          value: 'id',\n        },\n        {\n          text: 'اسم الحجز',\n          align: 'center',\n          sortable: false,\n          value: 'item_name',\n        },\n        {\n          text: 'اسم المستخدم',\n          align: 'center',\n          sortable: false,\n          value: 'name',\n        },\n\n        // { text: 'الوصف', value: 'disc' },\n        {\n          text: ' تاريخ الحجز',\n          value: 'from_date'\n        },\n\n\n        {\n          text: ' وقت الحجز',\n          value: 'from_time',\n          sortable: false\n        },\n\n        {\n          text: ' ',\n          value: 'status',\n          align: 'center',\n        },\n        {\n          text: ' ',\n          value: 'action',\n          align: 'center',\n        },\n      ],\n      counts: [\n        {\n          reservationCount:'',\n        }\n      ],\n      details_dailog: false,\n      items: [],\n      token: '',\n      urL: 'http://109.224.53.155',\n      seriess: [],\n      date_select: '',\n      menu1: false,\n      counts_all:'',\n      current_page: 0,\n      last_page: 0,\n      chartOptions: {\n        labels: ['تم الانجاز', 'مرفوضه', 'المقبوله', 'المعلقه'],\n        responsive: [{\n          breakpoint: 480,\n          options: {\n            chart: {\n              width: 200\n            },\n            legend: {\n              position: 'bottom'\n            }\n          }\n        }],\n      },\n      seriess: [33, 10, 40, 55],\n\n      options: {\n        chart: {\n          id: 'vuechart-example'\n        },\n        xaxis: {\n          categories: ['حزيران', 'تموز', 'آب', 'أيلول']\n        }\n      },\n\n      series: [{\n        name: 'series-1',\n        data: [153, 200, 100, 400]\n      }],\n      sections: [\n\n      ],\n      getmore: false,\n      error_msg: false,\n      laoding_card: [false, false, false, false]\n\n    }\n  },\n\n  methods: {\n\n    getcounts() {\n      var url = this.urL + \"/getOwnerReservCounts\";\n      // this.laoding_card[0]=true;\n      // this.laoding_card[1]=true;\n      // this.laoding_card[2]=true;\n      // this.laoding_card[3]=true;\n\n      this.laoding_card = this.laoding_card.map(x => true);\n      axios({\n        method: 'get',\n        url: url,\n        headers: {\n          token: this.token\n        }\n\n      }).then(response => {\n        this.counts = response.data.Data;\n        this.counts_all=response.data.item_all;\n\n\n      }).catch(error => {\n        this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n\n      }).finally(d => {\n\n        //               this.laoding_card[0]=false;\n        // this.laoding_card[1]=false;\n        // this.laoding_card[2]=false;\n        // this.laoding_card[3]=false;\n        this.laoding_card = this.laoding_card.map(x => false);\n      });\n\n    },\n    getReservInfo(id) {\n\n\n\n\n      // this.loading = true;\n      // this.id = id;\n      // this.laoding_card[id - 1] = true;\n      // var url = this.urL + \"/getOwnerReservationSub/\" + id;\n      // this.items = [];\n      // //this.dialog=true;\n      // axios({\n      //   method: 'get',\n      //   url: url,\n      //   headers: {\n      //     token: this.token\n      //   }\n\n      // }).then(response => {\n      //   this.dialog = true;\n\n      //   if (id == 1) {\n      //     this.items = response.data.Data.all.data;\n\n      //     this.current_page = response.data.Data.all.current_page;\n      //     this.last_page = response.data.Data.all.last_page;\n\n      //   } else if (id == 2) {\n      //     this.items = response.data.Data.confirmed.data;\n      //     this.current_page = response.data.Data.confirmed.current_page;\n      //     this.last_page = response.data.Data.confirmed.last_page;\n\n      //   } else if (id == 3) {\n      //     this.items = response.data.Data.reject.data;\n      //     this.current_page = response.data.Data.reject.current_page;\n      //     this.last_page = response.data.Data.reject.last_page;\n\n      //   } else if (id == 4) {\n      //     this.items = response.data.Data.bainding.data;\n      //     this.current_page = response.data.Data.bainding.current_page;\n      //     this.last_page = response.data.Data.bainding.last_page;\n\n      //   }\n      //   if (this.items.length < 1) {\n      //     this.$swal('خطاء', \" لاتوجد بيانات\", 'error')\n      //     this.dialog = false\n      //     this.laoding_card[id - 1] = false\n      //   }\n\n\n      //   if (this.current_page == this.last_page) {\n      //     this.getmore = false;\n      //   } else {\n      //     this.getmore = true\n      //   }\n      //   if (this.items.length < 1) {\n      //     this.error_msg = true\n      //   }\n\n\n      // }).catch(error => {\n      //   this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n      // }).finally(d => {\n      //   this.laoding_card[id - 1] = false\n      //   this.loading = false;\n      // });\n\n    },\n    confirme_Item_booking(item) {\n      var conf = 0;\n      swal({\n          title: \"هل انت متاكد\",\n\n          icon: \"warning\",\n          buttons: true,\n          dangerMode: true,\n        })\n        .then((willDelete) => {\n          if (willDelete) {\n            conf = 1;\n\n\n            if (conf == 1) {\n\n              var data = {\n                reservation_id: item.id\n              };\n              this.loding_accept = true;\n              axios({\n                  method: 'post',\n                  url: this.urL + \"/confirmReservation\",\n                  data: data\n                })\n                .then(response => {\n\n                    this.details_dailog = false;\n                    this.getReservInfo(this.id);\n                    this.getcounts();\n                    swal(\"تمت الموافقة\", {\n                      icon: \"success\",\n                    });\n                  }\n\n                )\n                .catch(error => {\n\n                  this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n                }).finally(d => {\n\n                  this.loding_accept = false\n                });\n\n            }\n          } else {\n\n            // swal(\"Your imaginary file is safe!\");\n          }\n        });\n    },\n\n    deleteItem(item) {\n      const index = this.items.indexOf(item)\n      this.cancelReservation(item);\n\n\n\n\n    },\n    cancelReservation(item) {\n      var conf = 0;\n      swal({\n          title: \"هل انت متاكد\",\n\n          icon: \"warning\",\n          buttons: true,\n          dangerMode: true,\n        })\n        .then((willDelete) => {\n          if (willDelete) {\n\n            this.loding_cancel = true;\n            axios({\n                method: 'get',\n                url: this.urL + \"/ownerCancelReservation/\" + item.id,\n                headers: {\n                  token: this.token\n                }\n              })\n              .then(response => {\n                this.$swal(\"تم الالغاء\", {\n                  icon: \"success\",\n                })\n                this.details_dailog = false;\n                this.getReservInfo(this.id);\n                this.getcounts()\n                // this.items.splice(index, 1)\n              })\n              .catch(error => {\n                this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n              }).finally(d => {\n                this.loding_cancel = false;\n              });\n          }\n        });\n    },\n\n  },\n  mounted() {\n    this.token = localStorage.getItem('access_token');\n    console.log(this.token)\n    this.getcounts();\n\n  },\n\n  components: {\n\n    Donut,\n    card,\n    apexchart: VueApexCharts,\n\n  }\n\n}\n",{"version":3,"sources":["OwnerDashbourd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgTA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA","file":"OwnerDashbourd.vue","sourceRoot":"src/components/Owner/components","sourcesContent":["<template>\n  <v-container fluid=\"\">\n\n    <v-layout row wrap pr-3 pl-4 pt-4 pb-4 align-center>\n\n\n      <v-flex xs12 md3 sm3 style=\"margin-bottom:1%; \" pa-2 @click=\"getReservInfo(1)\">\n\n        <card name=\" الكلي\" icon=\"fas fa-layer-group\" text_color=\"#53D3F8\" :count=\"counts_all\"\n          :loading=\"laoding_card[0]\"></card>\n\n      </v-flex>\n\n      <v-flex xs12 md3 sm3 style=\"margin-bottom:1%; \" pa-2 @click=\"getReservInfo(2)\">\n\n        <card name=\"  المقبولة\" icon=\"fas fa-clipboard-check\" text_color=\"#6CD6A1\" :count=\"counts[2].reservationCount\"\n          :loading=\"laoding_card[1]\"></card>\n\n      </v-flex>\n\n      <v-flex xs12 md3 sm3 style=\"margin-bottom:1%; \" pa-2 @click=\"getReservInfo(3)\">\n\n        <card name=\" المرفوضه\" icon=\"fas fa-calendar-times\" text_color=\"#F56D7E\" :count=\"counts[1].reservationCount\"\n          :loading=\"laoding_card[2]\"></card>\n\n      </v-flex>\n\n\n      <v-flex xs12 md3 sm3 style=\"margin-bottom:1%; \" pa-2 @click=\"getReservInfo(4)\">\n\n\n        <card name=\"المعلقة\" icon=\"fas fa-business-time\" text_color=\"#f29c2b\" :count=\"counts[0].reservationCount\"\n          :loading=\"laoding_card[3]\"></card>\n\n\n      </v-flex>\n\n    </v-layout>\n\n\n    <v-layout row wrap pr-3 pl-4>\n\n      <v-flex md6 xs12 style=\"margin-bottom:1%\" pa-1>\n        <v-card class=\"dash_rate_card\">\n          <p class=\"dash_part_rate_title\">احصائيه حالات الحجز</p>\n          <v-divider class=\"mb-3\"></v-divider>\n\n\n\n\n\n\n          <div id=\"chart\">\n            <apexchart type=pie class=\"circle_chart\" :options=\"chartOptions\" :series=\"seriess\" />\n          </div>\n\n        </v-card>\n      </v-flex>\n\n\n\n      <v-flex md6 sm12 style=\"padding-left:0%\" pa-1 pr-4>\n        <v-card style=\"width:100%;height:500px;border-radius:10px\">\n          <v-row>\n            <p class=\"dash_part_rate_title\">احصائيه سنويه للحجوزات</p>\n\n            <!-- <v-menu\n        ref=\"menu\"\n        v-model=\"menu1\"\n        :close-on-content-click=\"false\"\n        :nudge-right=\"40\"\n        :return-value.sync=\"date_select\"\n        transition=\"scale-transition\"\n        offset-y\n        max-width=\"290px\"\n        min-width=\"290px\"\n      >\n        <template v-slot:activator=\"{ on }\" >\n          \n              <v-text-field\n            style=\"width:10px !important;margin:30px;\"\n            v-model=\"date_select\"\n            placeholder=\"التاريخ\"\n            outlined=\"\"\n             dense=\"\"\n             required\n            readonly\n            v-on=\"on\"\n          ></v-text-field>\n         \n        </template>\n        <v-date-picker\n          v-if=\"menu1\"\n          v-model=\"date_select\"\n          full-width\n          @click:minute=\"$refs.menu.save(date_select)\"\n        ></v-date-picker>\n      </v-menu>\n              -->\n\n          </v-row>\n          <v-divider class=\"mb-3\"></v-divider>\n\n          <div style=\"padding-right:10%;padding-left:5%\">\n            <apexchart type=\"bar\" :options=\"options\" :series=\"series\"></apexchart>\n          </div>\n        </v-card>\n\n      </v-flex>\n    </v-layout>\n\n    <!-- display booking details -->\n    <v-dialog v-model=\"details_dailog\" width=\"500\">\n      <v-card>\n        <v-container grid-list-xs>\n\n\n          <v-col>\n\n            <v-row class=\"mb-3\">\n              <h2 style=\"color:#000\">معلومات الحجز</h2>\n            </v-row>\n            <v-divider class=\"mb-3\"></v-divider>\n            <v-row class=\"mb-2\" justify=\"center\">\n              <v-col cols=\"4\">\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-user</v-icon>\n                  <label>اسم الزبون</label>\n                </v-row>\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-bookmark</v-icon>\n                  <label>اسم الحجز</label>\n                </v-row>\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-calendar-day</v-icon>\n                  <label> التاريخ</label>\n                </v-row>\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-clock</v-icon>\n                  <label> الوقت</label>\n                </v-row>\n\n              </v-col>\n\n              <v-col>\n                <v-row class=\"mb-2\"><label> {{item_selected.name}}</label></v-row>\n                <v-row class=\"mb-2\"><label> {{item_selected.item_name}}</label></v-row>\n                <v-row class=\"mb-2\"><label> {{item_selected.from_date}}\n                    <v-chip style=\"margin-left:5px;margin-right:5px;\">></v-chip>\n                    {{item_selected.to_date}}</label></v-row>\n\n                <v-row class=\"mb-2\"><label>{{item_selected.from_time+\":00   \"}}\n                    <v-chip style=\"margin-left:5px;margin-right:5px;\">></v-chip>\n                    {{item_selected.to_time+\":00  \"}}</label></v-row>\n              </v-col>\n            </v-row>\n            <v-spacer></v-spacer>\n            <v-container>\n              <v-divider class=\"mb-3\"></v-divider>\n              <v-row justify=\"space-between\">\n                <span v-if=\"item_selected.confirm==0 && item_selected.active==1\">\n\n                  <v-btn color=\"success\" @click=\"confirme_Item_booking(item_selected)\" width=\"120\"\n                    style=\"margin-left:10px\">\n                    <span v-show=\"!loding_accept\">\n                      <v-icon right>fas fa-check</v-icon>\n                      قبول\n                    </span>\n                    <v-progress-circular indeterminate color=\"white\" v-show=\"loding_accept\"></v-progress-circular>\n                  </v-btn>\n\n                  <v-btn color=\"#f95252\" width=\"120\" dark=\"\" @click=\"deleteItem(item_selected)\">\n\n                    <span v-show=\"!loding_cancel\">\n                      <v-icon right size=\"18\">fas fa-trash-alt</v-icon>\n                      رفض\n                    </span>\n                    <v-progress-circular indeterminate color=\"white\" v-show=\"loding_cancel\"></v-progress-circular>\n                  </v-btn>\n                </span>\n\n\n\n\n                <v-btn color=\"#bdc3c7\" @click=\"details_dailog=false\">\n                  الغاء\n                </v-btn>\n              </v-row>\n            </v-container>\n\n          </v-col>\n        </v-container>\n      </v-card>\n    </v-dialog>\n    <!-- end display booking details -->\n\n    <v-dialog v-model=\"dialog\" max-width=\"1200\">\n      <v-data-table :headers=\"headers\" :items=\"items\" :loading=\"loading\" loading-text=\"جاري تحميل البيانات\"\n        class=\"elevation-1 request_table\" :search=\"search\" style=\"padding:10px\">\n\n\n\n        <template v-slot:top>\n          <v-toolbar flat color=\"white\" pb-5>\n\n            <v-toolbar-title>الحجوزات</v-toolbar-title>\n            <v-divider class=\"mx-4\" inset vertical></v-divider>\n            <v-spacer></v-spacer>\n            <v-row justify=\"end\" style=\"margin-top:20px;\">\n              <div style=\"width:auto\">\n                <v-text-field v-model=\"search\" append-icon=\"mdi-search\" outlined=\"\" dense=\"\" label=\"بحث\" single-line\n                  hide-details></v-text-field>\n              </div>\n\n            </v-row>\n\n          </v-toolbar>\n        </template>\n        <!--  \n    <template v-slot:item.status=\"{ item }\">\n     تيابن\n    \n    </template> -->\n\n        <!-- edit reservation -->\n        <template v-slot:item.status=\"{ item }\">\n          <span v-if=\"item.active==1\">\n\n\n            <!-- reservation not confirm  -->\n\n            <v-row wrap v-if=\"item.confirm==0\" justify=\"center\">\n              <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"primary\">fas fa-clock</v-icon> -->\n              <v-chip dark=\"\" class=\"res_pinding_chip\" color=\"#fff5e7\">معلق\n\n                <v-icon left size=\"12\">fas fa-clock</v-icon>\n              </v-chip>\n            </v-row>\n\n            <!-- Accepted reservation -->\n            <v-row row wrap v-if=\"item.confirm==1\" justify=\"center\">\n              <span>\n                <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"success\">fas fa-check-square </v-icon> -->\n                <v-chip dark=\"\" class=\"res_accept_chip\" color=\"#e9f8e9\">مقبول\n                  <v-icon left size=\"12\">fas fa-check-square</v-icon>\n                </v-chip>\n              </span>\n            </v-row>\n            <!-- reservation canceld by owner -->\n            <v-row row wrap v-if=\"item.confirm==2\" justify=\"center\">\n              <span>\n                <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"error\">fas fa-trash-alt</v-icon> -->\n                <v-chip dark=\"\" class=\"res_cancel_chip\" color=\"#fee5e3\">\n\n                  ملغي\n                  <v-icon left size=\"12\">fas fa-trash-alt</v-icon>\n                </v-chip>\n              </span>\n\n\n            </v-row>\n\n          </span>\n          <span v-else>\n            <!-- reservation cancel by user -->\n            <v-row row wrap justify=\"center\">\n\n              <span>\n                <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"#f5af19\">fas fa-exclamation</v-icon> -->\n                <v-chip dark=\"\" class=\"res_cancel_user_chip\" color=\"#feebe5\">\n\n\n                  ملغي من المستخدم\n                  <v-icon left size=\"12\">fas fa-trash-alt</v-icon>\n                </v-chip>\n              </span>\n            </v-row>\n          </span>\n\n\n        </template>\n\n\n        <template v-slot:item.action=\"{ item }\">\n          <v-btn text icon @click=\"details_dailog=true;item_selected=item\">\n            <v-icon size=\"50\">fas fa-edit</v-icon>\n          </v-btn>\n\n\n        </template>\n\n      </v-data-table>\n    </v-dialog>\n\n\n\n\n  </v-container>\n</template>\n<script>\n  import card from './Card.vue';\n\n  import Donut from 'vue-css-donut-chart'\n  import VueApexCharts from 'vue-apexcharts'\n\n  export default {\n\n\n    data() {\n      return {\n        dialog: false,\n        search: '',\n        page: 1,\n        pageCount: 2,\n        loading: false,\n        id: -1,\n        item_selected: {},\n        loding_accept: false,\n        loding_cancel: false,\n        headers: [{\n            text: 'رقم التعريف',\n            align: 'center',\n            sortable: false,\n            value: 'id',\n          },\n          {\n            text: 'اسم الحجز',\n            align: 'center',\n            sortable: false,\n            value: 'item_name',\n          },\n          {\n            text: 'اسم المستخدم',\n            align: 'center',\n            sortable: false,\n            value: 'name',\n          },\n\n          // { text: 'الوصف', value: 'disc' },\n          {\n            text: ' تاريخ الحجز',\n            value: 'from_date'\n          },\n\n\n          {\n            text: ' وقت الحجز',\n            value: 'from_time',\n            sortable: false\n          },\n\n          {\n            text: ' ',\n            value: 'status',\n            align: 'center',\n          },\n          {\n            text: ' ',\n            value: 'action',\n            align: 'center',\n          },\n        ],\n        counts: [\n          {\n            reservationCount:'',\n          }\n        ],\n        details_dailog: false,\n        items: [],\n        token: '',\n        urL: 'http://109.224.53.155',\n        seriess: [],\n        date_select: '',\n        menu1: false,\n        counts_all:'',\n        current_page: 0,\n        last_page: 0,\n        chartOptions: {\n          labels: ['تم الانجاز', 'مرفوضه', 'المقبوله', 'المعلقه'],\n          responsive: [{\n            breakpoint: 480,\n            options: {\n              chart: {\n                width: 200\n              },\n              legend: {\n                position: 'bottom'\n              }\n            }\n          }],\n        },\n        seriess: [33, 10, 40, 55],\n\n        options: {\n          chart: {\n            id: 'vuechart-example'\n          },\n          xaxis: {\n            categories: ['حزيران', 'تموز', 'آب', 'أيلول']\n          }\n        },\n\n        series: [{\n          name: 'series-1',\n          data: [153, 200, 100, 400]\n        }],\n        sections: [\n\n        ],\n        getmore: false,\n        error_msg: false,\n        laoding_card: [false, false, false, false]\n\n      }\n    },\n\n    methods: {\n\n      getcounts() {\n        var url = this.urL + \"/getOwnerReservCounts\";\n        // this.laoding_card[0]=true;\n        // this.laoding_card[1]=true;\n        // this.laoding_card[2]=true;\n        // this.laoding_card[3]=true;\n\n        this.laoding_card = this.laoding_card.map(x => true);\n        axios({\n          method: 'get',\n          url: url,\n          headers: {\n            token: this.token\n          }\n\n        }).then(response => {\n          this.counts = response.data.Data;\n          this.counts_all=response.data.item_all;\n\n\n        }).catch(error => {\n          this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n\n        }).finally(d => {\n\n          //               this.laoding_card[0]=false;\n          // this.laoding_card[1]=false;\n          // this.laoding_card[2]=false;\n          // this.laoding_card[3]=false;\n          this.laoding_card = this.laoding_card.map(x => false);\n        });\n\n      },\n      getReservInfo(id) {\n\n\n\n\n        // this.loading = true;\n        // this.id = id;\n        // this.laoding_card[id - 1] = true;\n        // var url = this.urL + \"/getOwnerReservationSub/\" + id;\n        // this.items = [];\n        // //this.dialog=true;\n        // axios({\n        //   method: 'get',\n        //   url: url,\n        //   headers: {\n        //     token: this.token\n        //   }\n\n        // }).then(response => {\n        //   this.dialog = true;\n\n        //   if (id == 1) {\n        //     this.items = response.data.Data.all.data;\n\n        //     this.current_page = response.data.Data.all.current_page;\n        //     this.last_page = response.data.Data.all.last_page;\n\n        //   } else if (id == 2) {\n        //     this.items = response.data.Data.confirmed.data;\n        //     this.current_page = response.data.Data.confirmed.current_page;\n        //     this.last_page = response.data.Data.confirmed.last_page;\n\n        //   } else if (id == 3) {\n        //     this.items = response.data.Data.reject.data;\n        //     this.current_page = response.data.Data.reject.current_page;\n        //     this.last_page = response.data.Data.reject.last_page;\n\n        //   } else if (id == 4) {\n        //     this.items = response.data.Data.bainding.data;\n        //     this.current_page = response.data.Data.bainding.current_page;\n        //     this.last_page = response.data.Data.bainding.last_page;\n\n        //   }\n        //   if (this.items.length < 1) {\n        //     this.$swal('خطاء', \" لاتوجد بيانات\", 'error')\n        //     this.dialog = false\n        //     this.laoding_card[id - 1] = false\n        //   }\n\n\n        //   if (this.current_page == this.last_page) {\n        //     this.getmore = false;\n        //   } else {\n        //     this.getmore = true\n        //   }\n        //   if (this.items.length < 1) {\n        //     this.error_msg = true\n        //   }\n\n\n        // }).catch(error => {\n        //   this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n        // }).finally(d => {\n        //   this.laoding_card[id - 1] = false\n        //   this.loading = false;\n        // });\n\n      },\n      confirme_Item_booking(item) {\n        var conf = 0;\n        swal({\n            title: \"هل انت متاكد\",\n\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then((willDelete) => {\n            if (willDelete) {\n              conf = 1;\n\n\n              if (conf == 1) {\n\n                var data = {\n                  reservation_id: item.id\n                };\n                this.loding_accept = true;\n                axios({\n                    method: 'post',\n                    url: this.urL + \"/confirmReservation\",\n                    data: data\n                  })\n                  .then(response => {\n\n                      this.details_dailog = false;\n                      this.getReservInfo(this.id);\n                      this.getcounts();\n                      swal(\"تمت الموافقة\", {\n                        icon: \"success\",\n                      });\n                    }\n\n                  )\n                  .catch(error => {\n\n                    this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n                  }).finally(d => {\n\n                    this.loding_accept = false\n                  });\n\n              }\n            } else {\n\n              // swal(\"Your imaginary file is safe!\");\n            }\n          });\n      },\n\n      deleteItem(item) {\n        const index = this.items.indexOf(item)\n        this.cancelReservation(item);\n\n\n\n\n      },\n      cancelReservation(item) {\n        var conf = 0;\n        swal({\n            title: \"هل انت متاكد\",\n\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then((willDelete) => {\n            if (willDelete) {\n\n              this.loding_cancel = true;\n              axios({\n                  method: 'get',\n                  url: this.urL + \"/ownerCancelReservation/\" + item.id,\n                  headers: {\n                    token: this.token\n                  }\n                })\n                .then(response => {\n                  this.$swal(\"تم الالغاء\", {\n                    icon: \"success\",\n                  })\n                  this.details_dailog = false;\n                  this.getReservInfo(this.id);\n                  this.getcounts()\n                  // this.items.splice(index, 1)\n                })\n                .catch(error => {\n                  this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n                }).finally(d => {\n                  this.loding_cancel = false;\n                });\n            }\n          });\n      },\n\n    },\n    mounted() {\n      this.token = localStorage.getItem('access_token');\n      console.log(this.token)\n      this.getcounts();\n\n    },\n\n    components: {\n\n      Donut,\n      card,\n      apexchart: VueApexCharts,\n\n    }\n\n  }\n</script>"]}]}