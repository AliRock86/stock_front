{"remainingRequest":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/DeliverCompanies/components/Request.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/DeliverCompanies/components/Request.vue","mtime":1586780111556},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  export default {\n    data: () => ({\nitems_ByStatus:[],\nitems_ByDate:[],\n      today: '2020-01-28',\n      events: [{\n          name: 'Weekly Meeting',\n          start: '2020-01-29 09:00',\n          end: '2020-01-29 09:00',\n        },\n        {\n          name: 'Thomas\\' Birthday',\n          start: '2019-01-10',\n        },\n        {\n          name: 'Mash Potatoes',\n          start: '2019-01-09 12:30',\n          end: '2019-01-09 15:30',\n        },\n      ],\n      user_info: {},\n      res_filter: '',\n      token: localStorage.getItem('access_token'),\n      calander_dialog: false,\n      err_show: false,\n      error: '',\n      search: '',\n      urL: 'http://109.224.53.155',\n      dialog: false,\n      items: [\n        {\n          id:1,\n          name:'شاشه',\n          company_address:'الكراده-المسبح',\n          custumer_address:'المنصور',\n          company_name:'العالميه للاثات',\n          custumer_name:'حيدر'\n        }\n      ],\n\n      \n      reser_status:[\n        {\n        id: 0,\n        name: 'الكل'\n      }, {\n        id: 1,\n        name: 'المقبوله'\n      }, {\n        id: 2,\n        name: 'المرفوضه'\n      }, {\n        id: 3,\n        name: 'المعلقه'\n      }],\n\n\n      filter: [{\n        id: 0,\n        name: 'الكل'\n      }, {\n        id: 1,\n        name: 'طلبات اليوم'\n      }, {\n        id: 2,\n        name: 'طلبات الاسبوع'\n      }, {\n        id: 3,\n        name: 'طلبات الشهر'\n      }],\n      item_selected: {\n        user: {\n          name: ''\n        },\n        item: {\n          name: ''\n        }\n      },\n    \n      loding_accept: false,\n      marvelHeroes:[],\n      loding_cancel: false,\n      headers: [{\n          text: 'رقم التعريف',\n          align: 'center',\n          sortable: false,\n          value: 'id',\n        },\n       \n        {\n          text: 'اسم الماده',\n          align: 'center',\n          sortable: false,\n          value: 'name',\n        },\n         {\n          text: 'اسم الزبون',\n          align: 'center',\n          sortable: false,\n          value: 'custumer_name',\n        },\n        {\n          text: 'عنوان الزبون',\n          align: 'center',\n          sortable: false,\n          value: 'custumer_address',\n        },\n\n         {\n          text: 'اسم الشركه',\n          align: 'center',\n          sortable: false,\n          value: 'company_name',\n        },\n\n        {\n          text: 'عنوان الشركه',\n          align: 'center',\n          sortable: false,\n          value: 'company_address',\n        },\n\n       \n\n     \n\n        {\n          text: ' حاله الطلب',\n          value: 'status',\n          align: 'center',\n        },\n        {\n          text: ' ',\n          value: 'action',\n          align: 'center',\n        },\n      ],\n      \n      editedIndex: -1,\n    \n\n      valid: false,\n      page: 1,\n      pageCount: 0,\n      current_page: 1,\n      last_page: 0,\n      loading: false\n\n\n    }),\n\n\n\n    methods: {\n      selectrequest(item){\n      \n        this.dialog=true;\n        this.item_selected=item;\n      },\n\n      reservsion_status()\n      {\n        this.items_ByStatus= this.items_ByDate;\n\n        if(this.res_status==0)\n        {\n       \n\n            this.items= this.items_ByDate;\n        }\n        else if(this.res_status==1)\n        {\n          this.items = this.items_ByStatus.filter(function(hero) {\n          return hero.confirm ==1;\n\n        });\n        }\n\n         else if(this.res_status==2)\n        {\n          this.items =  this.items_ByStatus.filter(function(hero) {\n        return hero.confirm ==2;\n\n        });\n        }\n        else if(this.res_status==3)\n        {\n      \n          this.items =  this.items_ByStatus.filter(function(hero) {\n        return hero.confirm ==0;\n\n        });\n        }\n    \n\n      },\n\n      get_calander() {\n        //this.$refs.calendar.scrollToTime('08:00')\n        this.calander_dialog = true;\n      },\n      getBetweenDate(first,last)\n      {\n    \n        var url = this.urL + \"/ReservationBetweenDate/\" + first + \"/\" + last + \"?page=\" + this.current_page;\n          this.loading = true;\n          axios({\n            method: 'get',\n            url: url,\n            headers: {\n              token: this.token\n            }\n\n          }).then(response => {\n            this.items_ByDate = response.data.Data.data;\n            this.last_page = response.data.Data.last_page;\n            this.pageCount = response.data.Data.last_page;\n             this.items= this.items_ByDate;\n\n          }).catch(error => {\n            this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n          }).finally(s => {\n            this.loading = false;\n\n          });\n       \n\n      },\n      dis() {\n        if (this.res_filter == 0) {\n          \n this.res_status=0;\n          this.getitems();\n          \n         // this.reservsion_status();\n          \n          \n\n        } else if (this.res_filter == 1) {\n          \n          // this.reservsion_status();\n          //  this.res_status=0;\n          var today = new Date();\n          var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\n          var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n          this.getBetweenDate(date,date);\n         \n           \n\n\n        } else if (this.res_filter == 2)  {\n      \n          var curr = new Date; // get current date\n          var first = curr.getDate() - curr.getDay(); // First day is the day of the month - the day of the week\n          var last = first + 6; // last day is the first day + 6\n\n          var today = new Date();\n          var first = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + first;\n          var last = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + last;\n\n           this.getBetweenDate(first,last);\n      \n        }\n        else if (this.res_filter == 3)  {\n  \n          var date = new Date();\n\n        var first_date = new Date(date); \n        first_date.setUTCDate(1); \n\n        var last_date = new Date(first_date); //Make a copy of the calculated first day\n        last_date.setUTCMonth(last_date.getUTCMonth() + 1); //Add a month\n        last_date.setUTCDate(0); //Set the date to 0, this goes to the last day of the previous month\n         this.getBetweenDate(first_date.toJSON().substring(0, 10),last_date.toJSON().substring(0, 10));\n       \n\n        }\n\n\n      },\n      selectrequest(item) {\n\n        this.dialog = true;\n        this.item_selected = item;\n      },\n\n      open(event) {\n        \n      },\n      dateClick(event, isAdd) {\n        \n        //this.today = event.date;\n        //this.selectedType = 'day';\n        console.log(event);\n      },\n      viewDay() {\n       \n        // this.focus = date\n        // this.type = 'day'\n      },\n\n      confirme_Item_booking(item) {\n        var conf = 0;\n        swal({\n            title: \"هل انت متاكد\",\n\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then((willDelete) => {\n            if (willDelete) {\n              conf = 1;\n\n\n\n\n              var data = {\n                reservation_id: item.id\n              };\n              this.loding_accept = true;\n              axios({\n                  method: 'post',\n                  url: this.urL + \"/confirmReservation\",\n                  data: data\n                })\n                .then(response => {\n\n                    this.dialog = false;\n                    this.getitems()\n                    swal(\"تمت الموافقة\", {\n                      icon: \"success\",\n                    });\n\n                  }\n\n                )\n                .catch(error => {\n\n                  this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n                }).finally(d => {\n\n                  this.loding_accept = false\n                });\n\n\n\n              // swal(\"Your imaginary file is safe!\");\n            }\n          });\n      },\n\n      deleteItem(item) {\n        const index = this.items.indexOf(item)\n        this.cancelReservation(item);\n\n\n\n\n      },\n      cancelReservation(item) {\n        var conf = 0;\n        swal({\n            title: \"هل انت متاكد\",\n\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then((willDelete) => {\n            if (willDelete) {\n\n              this.loding_cancel = true;\n              axios({\n                  method: 'get',\n                  url: this.urL + \"/ownerCancelReservation/\" + item.id,\n                  headers: {\n                    token: this.token\n                  }\n                })\n                .then(response => {\n                  this.$swal(\"تم الالغاء\", {\n                    icon: \"success\",\n                  })\n                  this.dialog = false;\n                  this.getitems()\n                  // this.items.splice(index, 1)\n                })\n                .catch(error => {\n                  this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n                }).finally(d => {\n                  this.loding_cancel = false;\n                });\n            }\n          });\n      },\n\n\n\n      getMoreitems() {\n\n        if (this.current_page <= this.last_page) {\n          this.current_page = this.page;\n          this.getitems();\n        }\n\n      },\n      getitems() {\n        //  this.$refs.calendar.scrollToTime('08:00')\n\n        var url = this.urL + \"/getOwnerReservations?page=\" + this.current_page;\n        this.loading = true;\n        axios({\n          method: 'get',\n          url: url,\n          headers: {\n            token: this.token\n          }\n\n        }).then(response => {\n         this.items  = response.data.Data.data;\n          this.items_ByDate=this.items  ;\n          this.last_page = response.data.Data.last_page;\n          this.pageCount = response.data.Data.last_page;\n\n          for (var i = 0; i < this.items.length; i++) {\n\n\n            this.events.push({\n                name: this.items[i].user.name,\n                start: this.items[i].from_date + ' ' + this.items[i].from_time,\n                end: this.items[i].from_date + ' ' + this.items[i].from_time,\n\n\n              }\n\n            );\n\n\n\n          }\n\n\n\n\n\n\n\n\n        }).catch(error => {\n          this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n        }).finally(s => {\n          this.loading = false;\n\n        });\n      },\n\n\n\n\n\n    },\n\n    created() {\n      this.getitems();\n    },\n    mounted() {\n      var today = new Date();\n      var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\n      var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n      var dateTime = date + ' ' + time;\n      this.today = date;\n\n      // this.$refs.calendar.scrollToTime('08:00')\n\n      // this.token = localStorage.getItem('access_token');\n      // alert(this.token);\n      // this.token = localStorage.getItem('access_token');\n      //  this.$refs.calendar.scrollToTime('08:00');\n      //this.token = localStorage.getItem('access_token');\n      this.user_info = JSON.parse(localStorage.getItem('user_info'));\n\n\n    },\n    computed: {\n\n      eventsMap() {\n        const map = {}\n        this.events.forEach(e => (map[e.date] = map[e.date] || []).push(e))\n        return map\n      },\n\n      selected() {\n        if (this.current_page != this.page) {\n\n          this.getMoreitems();\n\n        }\n\n        // if (this.items.length > 0) {\n        //   if (this.page > 1) {\n\n        //   }\n        // }\n      },\n    },\n\n\n    watch: {\n      selected: 'search by sub_cat_id',\n    },\n  }\n",{"version":3,"sources":["Request.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;AAIA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;;AAGA;;AAEA;;;;AAIA;;;;;;;;;AASA;AACA;AACA;AACA;;AAEA;AACA;;;;;;AAMA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA","file":"Request.vue","sourceRoot":"src/components/DeliverCompanies/components","sourcesContent":["<template>\n  <v-layout column=\"\">\n\n    <v-dialog v-model=\"dialog\" width=\"500\">\n      <v-card>\n        <v-container grid-list-xs>\n\n\n          <v-col>\n\n            <v-row class=\"mb-3\">\n              <h2 style=\"color:#000\">معلومات التوصيل</h2>\n            </v-row>\n            <v-divider class=\"mb-3\"></v-divider>\n            <v-row class=\"mb-2\" justify=\"center\">\n              <v-col cols=\"4\">\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-user</v-icon>\n                  <label>اسم الزبون</label>\n                </v-row>\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-bookmark</v-icon>\n                  <label>اسم الحجز</label>\n                </v-row>\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-calendar-day</v-icon>\n                  <label> التاريخ</label>\n                </v-row>\n\n                <v-row class=\"mb-2 mr-2\">\n                  <v-icon size=\"20\" style=\"padding-left:5px\">fas fa-clock</v-icon>\n                  <label> الوقت</label>\n                </v-row>\n\n              </v-col>\n\n              <v-col>\n                <v-row class=\"mb-2\"><label> {{item_selected.user.name}}</label></v-row>\n                <v-row class=\"mb-2\"><label> {{item_selected.item.name}}</label></v-row>\n                <v-row class=\"mb-2\"><label> {{item_selected.from_date}}\n                    <v-chip style=\"margin-left:5px;margin-right:5px;\">></v-chip>\n                    {{item_selected.to_date}}</label></v-row>\n\n                <v-row class=\"mb-2\"><label>{{item_selected.from_time+\":00   \"}}\n                    <v-chip style=\"margin-left:5px;margin-right:5px;\">></v-chip>\n                    {{item_selected.to_time+\":00  \"}}</label></v-row>\n              </v-col>\n            </v-row>\n            <v-spacer></v-spacer>\n            <v-container>\n              <v-divider class=\"mb-3\"></v-divider>\n              <v-row justify=\"space-between\">\n                <span v-if=\"item_selected.confirm==0 && item_selected.active==1\">\n\n                  <v-btn color=\"success\" @click=\"confirme_Item_booking(item_selected)\" width=\"120\"\n                    style=\"margin-left:10px\">\n                    <span v-show=\"!loding_accept\">\n                      <v-icon right>fas fa-check</v-icon>\n                      قبول\n                    </span>\n                    <v-progress-circular indeterminate color=\"white\" v-show=\"loding_accept\"></v-progress-circular>\n                  </v-btn>\n\n                  <v-btn color=\"#f95252\" width=\"120\" dark=\"\" @click=\"deleteItem(item_selected)\">\n\n                    <span v-show=\"!loding_cancel\">\n                      <v-icon right size=\"18\">fas fa-trash-alt</v-icon>\n                      رفض\n                    </span>\n                    <v-progress-circular indeterminate color=\"white\" v-show=\"loding_cancel\"></v-progress-circular>\n                  </v-btn>\n                </span>\n\n\n\n\n                <v-btn color=\"#bdc3c7\" @click=\"dialog=false\">\n                  الغاء\n                </v-btn>\n              </v-row>\n            </v-container>\n\n          </v-col>\n        </v-container>\n      </v-card>\n    </v-dialog>\n\n    <v-row>\n\n      <v-data-table :headers=\"headers\" :items=\"items\" :page.sync=\"page\" sort-by=\"calories\"\n        class=\"elevation-1 request_table\" style=\"width:96%\" items-per-page=\"15\" :search=\"search\" hide-default-footer=\"\"\n        :loading=\"loading\" loading-text=\"جاري تحميل البيانات\">\n\n        <template v-slot:top>\n          <v-toolbar flat color=\"white\" pb-5>\n\n            <v-toolbar-title>طلبات التوصيل</v-toolbar-title>\n            <v-divider class=\"mx-4\" inset vertical></v-divider>\n            <v-spacer></v-spacer>\n            <v-row justify=\"end\" style=\"margin-top:20px;\">\n              <div style=\"width:auto\">\n\n                <v-dialog v-model=\"calander_dialog\" width=\"1300\">\n\n                  <v-card width=\"1300\" pa-4>\n                    <v-layout>\n                      <v-flex>\n                        <v-sheet height=\"400\" style=\"direction:ltr\">\n                          <v-calendar ref=\"calendar\" :now=\"today\" :value=\"today\" :events=\"events\" color=\"primary\"\n                            type=\"week\"></v-calendar>\n                        </v-sheet>\n                      </v-flex>\n                    </v-layout>\n\n                  </v-card>\n                  <template v-slot:activator=\"{ on }\">\n                    <v-btn color=\"red lighten-2\" dark v-on=\"on\" style=\"margin-left:10px\">\n                      عرض جدول الاسبوع\n                    </v-btn>\n                  </template>\n\n                </v-dialog>\n              </div>\n\n                <div style=\"width:auto;\">\n                <v-select dense=\"\" :items=\"filter\" item-value=\"id\" item-text=\"name\" outlined=\"\" placeholder=\"فلترة\"\n                  v-model=\"res_filter\" @change=\"dis()\"></v-select>\n              </div>\n\n              <div style=\"width:auto;margin-right:10px\">\n                              <v-select dense=\"\" :items=\"reser_status\" item-value=\"id\" item-text=\"name\" outlined=\"\" placeholder=\"فلترة\"\n                  v-model=\"res_status\" @change=\"reservsion_status()\"></v-select>\n              </div>\n            \n\n\n\n            </v-row>\n\n          </v-toolbar>\n        </template>\n\n\n\n\n        <template v-slot:bottom>\n          <v-pagination v-model=\"page\" :length=\"pageCount\"></v-pagination>\n        </template>\n        <!-- edit reservation -->\n        <template v-slot:item.status=\"{ item }\">\n          <span v-if=\"item.active==1\">\n\n\n            <!-- reservation not confirm  -->\n\n            <v-row wrap v-if=\"item.confirm==0\" justify=\"center\">\n              <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"primary\">fas fa-clock</v-icon> -->\n              <v-chip dark=\"\" class=\"res_pinding_chip\" color=\"#fff5e7\">معلق\n\n                <v-icon left size=\"12\">fas fa-clock</v-icon>\n              </v-chip>\n            </v-row>\n\n            <!-- Accepted reservation -->\n            <v-row row wrap v-if=\"item.confirm==1\" justify=\"center\">\n              <span>\n                <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"success\">fas fa-check-square </v-icon> -->\n                <v-chip dark=\"\" class=\"res_accept_chip\" color=\"#e9f8e9\">مقبول\n                  <v-icon left size=\"12\">fas fa-check-square</v-icon>\n                </v-chip>\n              </span>\n            </v-row>\n            <!-- reservation canceld by owner -->\n            <v-row row wrap v-if=\"item.confirm==2\" justify=\"center\">\n              <span>\n                <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"error\">fas fa-trash-alt</v-icon> -->\n                <v-chip dark=\"\" class=\"res_cancel_chip\" color=\"#fee5e3\">\n\n                  ملغي\n                  <v-icon left size=\"12\">fas fa-trash-alt</v-icon>\n                </v-chip>\n              </span>\n\n\n            </v-row>\n\n          </span>\n          <span v-else>\n            <!-- reservation cancel by user -->\n            <v-row row wrap justify=\"center\">\n\n              <span>\n                <!-- <v-icon size=\"20\" style=\"margin-right:5px\" color=\"#f5af19\">fas fa-exclamation</v-icon> -->\n                <!-- <v-chip dark=\"\" class=\"res_cancel_user_chip\" color=\"#feebe5\">\n\n\n                  ملغي من المستخدم\n                  <v-icon left size=\"12\">fas fa-trash-alt</v-icon>\n                </v-chip> -->\n\n                  <v-chip dark=\"\" class=\"res_accept_chip\" color=\"#e9f8e9\">تم التوصيل\n                  <v-icon left size=\"12\">fas fa-check-square</v-icon>\n                </v-chip>\n              </span>\n            </v-row>\n          </span>\n\n\n        </template>\n\n        <!-- edit reservation -->\n        <template v-slot:item.action=\"{ item }\">\n          <v-btn text icon @click=\"selectrequest(item)\">\n            <v-icon size=\"50\">fas fa-edit</v-icon>\n          </v-btn>\n\n\n        </template>\n        <template v-slot:no-data>\n          <h4>لاتوجد بيانات</h4>\n        </template>\n\n\n\n      </v-data-table>\n\n    </v-row>\n    <v-row>\n      <v-pagination v-model=\"page\" prev-icon=\"mdi-menu-right\" next-icon=\"mdi-menu-left\" circle=\"\" :length=\"pageCount\">\n      </v-pagination>\n\n    </v-row>\n  </v-layout>\n\n</template>\n\n\n<script>\n  export default {\n    data: () => ({\nitems_ByStatus:[],\nitems_ByDate:[],\n      today: '2020-01-28',\n      events: [{\n          name: 'Weekly Meeting',\n          start: '2020-01-29 09:00',\n          end: '2020-01-29 09:00',\n        },\n        {\n          name: 'Thomas\\' Birthday',\n          start: '2019-01-10',\n        },\n        {\n          name: 'Mash Potatoes',\n          start: '2019-01-09 12:30',\n          end: '2019-01-09 15:30',\n        },\n      ],\n      user_info: {},\n      res_filter: '',\n      token: localStorage.getItem('access_token'),\n      calander_dialog: false,\n      err_show: false,\n      error: '',\n      search: '',\n      urL: 'http://109.224.53.155',\n      dialog: false,\n      items: [\n        {\n          id:1,\n          name:'شاشه',\n          company_address:'الكراده-المسبح',\n          custumer_address:'المنصور',\n          company_name:'العالميه للاثات',\n          custumer_name:'حيدر'\n        }\n      ],\n\n      \n      reser_status:[\n        {\n        id: 0,\n        name: 'الكل'\n      }, {\n        id: 1,\n        name: 'المقبوله'\n      }, {\n        id: 2,\n        name: 'المرفوضه'\n      }, {\n        id: 3,\n        name: 'المعلقه'\n      }],\n\n\n      filter: [{\n        id: 0,\n        name: 'الكل'\n      }, {\n        id: 1,\n        name: 'طلبات اليوم'\n      }, {\n        id: 2,\n        name: 'طلبات الاسبوع'\n      }, {\n        id: 3,\n        name: 'طلبات الشهر'\n      }],\n      item_selected: {\n        user: {\n          name: ''\n        },\n        item: {\n          name: ''\n        }\n      },\n    \n      loding_accept: false,\n      marvelHeroes:[],\n      loding_cancel: false,\n      headers: [{\n          text: 'رقم التعريف',\n          align: 'center',\n          sortable: false,\n          value: 'id',\n        },\n       \n        {\n          text: 'اسم الماده',\n          align: 'center',\n          sortable: false,\n          value: 'name',\n        },\n         {\n          text: 'اسم الزبون',\n          align: 'center',\n          sortable: false,\n          value: 'custumer_name',\n        },\n        {\n          text: 'عنوان الزبون',\n          align: 'center',\n          sortable: false,\n          value: 'custumer_address',\n        },\n\n         {\n          text: 'اسم الشركه',\n          align: 'center',\n          sortable: false,\n          value: 'company_name',\n        },\n\n        {\n          text: 'عنوان الشركه',\n          align: 'center',\n          sortable: false,\n          value: 'company_address',\n        },\n\n       \n\n     \n\n        {\n          text: ' حاله الطلب',\n          value: 'status',\n          align: 'center',\n        },\n        {\n          text: ' ',\n          value: 'action',\n          align: 'center',\n        },\n      ],\n      \n      editedIndex: -1,\n    \n\n      valid: false,\n      page: 1,\n      pageCount: 0,\n      current_page: 1,\n      last_page: 0,\n      loading: false\n\n\n    }),\n\n\n\n    methods: {\n      selectrequest(item){\n      \n        this.dialog=true;\n        this.item_selected=item;\n      },\n\n      reservsion_status()\n      {\n        this.items_ByStatus= this.items_ByDate;\n\n        if(this.res_status==0)\n        {\n       \n\n            this.items= this.items_ByDate;\n        }\n        else if(this.res_status==1)\n        {\n          this.items = this.items_ByStatus.filter(function(hero) {\n          return hero.confirm ==1;\n\n        });\n        }\n\n         else if(this.res_status==2)\n        {\n          this.items =  this.items_ByStatus.filter(function(hero) {\n        return hero.confirm ==2;\n\n        });\n        }\n        else if(this.res_status==3)\n        {\n      \n          this.items =  this.items_ByStatus.filter(function(hero) {\n        return hero.confirm ==0;\n\n        });\n        }\n    \n\n      },\n\n      get_calander() {\n        //this.$refs.calendar.scrollToTime('08:00')\n        this.calander_dialog = true;\n      },\n      getBetweenDate(first,last)\n      {\n    \n        var url = this.urL + \"/ReservationBetweenDate/\" + first + \"/\" + last + \"?page=\" + this.current_page;\n          this.loading = true;\n          axios({\n            method: 'get',\n            url: url,\n            headers: {\n              token: this.token\n            }\n\n          }).then(response => {\n            this.items_ByDate = response.data.Data.data;\n            this.last_page = response.data.Data.last_page;\n            this.pageCount = response.data.Data.last_page;\n             this.items= this.items_ByDate;\n\n          }).catch(error => {\n            this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n          }).finally(s => {\n            this.loading = false;\n\n          });\n       \n\n      },\n      dis() {\n        if (this.res_filter == 0) {\n          \n this.res_status=0;\n          this.getitems();\n          \n         // this.reservsion_status();\n          \n          \n\n        } else if (this.res_filter == 1) {\n          \n          // this.reservsion_status();\n          //  this.res_status=0;\n          var today = new Date();\n          var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\n          var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n          this.getBetweenDate(date,date);\n         \n           \n\n\n        } else if (this.res_filter == 2)  {\n      \n          var curr = new Date; // get current date\n          var first = curr.getDate() - curr.getDay(); // First day is the day of the month - the day of the week\n          var last = first + 6; // last day is the first day + 6\n\n          var today = new Date();\n          var first = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + first;\n          var last = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + last;\n\n           this.getBetweenDate(first,last);\n      \n        }\n        else if (this.res_filter == 3)  {\n  \n          var date = new Date();\n\n        var first_date = new Date(date); \n        first_date.setUTCDate(1); \n\n        var last_date = new Date(first_date); //Make a copy of the calculated first day\n        last_date.setUTCMonth(last_date.getUTCMonth() + 1); //Add a month\n        last_date.setUTCDate(0); //Set the date to 0, this goes to the last day of the previous month\n         this.getBetweenDate(first_date.toJSON().substring(0, 10),last_date.toJSON().substring(0, 10));\n       \n\n        }\n\n\n      },\n      selectrequest(item) {\n\n        this.dialog = true;\n        this.item_selected = item;\n      },\n\n      open(event) {\n        \n      },\n      dateClick(event, isAdd) {\n        \n        //this.today = event.date;\n        //this.selectedType = 'day';\n        console.log(event);\n      },\n      viewDay() {\n       \n        // this.focus = date\n        // this.type = 'day'\n      },\n\n      confirme_Item_booking(item) {\n        var conf = 0;\n        swal({\n            title: \"هل انت متاكد\",\n\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then((willDelete) => {\n            if (willDelete) {\n              conf = 1;\n\n\n\n\n              var data = {\n                reservation_id: item.id\n              };\n              this.loding_accept = true;\n              axios({\n                  method: 'post',\n                  url: this.urL + \"/confirmReservation\",\n                  data: data\n                })\n                .then(response => {\n\n                    this.dialog = false;\n                    this.getitems()\n                    swal(\"تمت الموافقة\", {\n                      icon: \"success\",\n                    });\n\n                  }\n\n                )\n                .catch(error => {\n\n                  this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n                }).finally(d => {\n\n                  this.loding_accept = false\n                });\n\n\n\n              // swal(\"Your imaginary file is safe!\");\n            }\n          });\n      },\n\n      deleteItem(item) {\n        const index = this.items.indexOf(item)\n        this.cancelReservation(item);\n\n\n\n\n      },\n      cancelReservation(item) {\n        var conf = 0;\n        swal({\n            title: \"هل انت متاكد\",\n\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then((willDelete) => {\n            if (willDelete) {\n\n              this.loding_cancel = true;\n              axios({\n                  method: 'get',\n                  url: this.urL + \"/ownerCancelReservation/\" + item.id,\n                  headers: {\n                    token: this.token\n                  }\n                })\n                .then(response => {\n                  this.$swal(\"تم الالغاء\", {\n                    icon: \"success\",\n                  })\n                  this.dialog = false;\n                  this.getitems()\n                  // this.items.splice(index, 1)\n                })\n                .catch(error => {\n                  this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n                }).finally(d => {\n                  this.loding_cancel = false;\n                });\n            }\n          });\n      },\n\n\n\n      getMoreitems() {\n\n        if (this.current_page <= this.last_page) {\n          this.current_page = this.page;\n          this.getitems();\n        }\n\n      },\n      getitems() {\n        //  this.$refs.calendar.scrollToTime('08:00')\n\n        var url = this.urL + \"/getOwnerReservations?page=\" + this.current_page;\n        this.loading = true;\n        axios({\n          method: 'get',\n          url: url,\n          headers: {\n            token: this.token\n          }\n\n        }).then(response => {\n         this.items  = response.data.Data.data;\n          this.items_ByDate=this.items  ;\n          this.last_page = response.data.Data.last_page;\n          this.pageCount = response.data.Data.last_page;\n\n          for (var i = 0; i < this.items.length; i++) {\n\n\n            this.events.push({\n                name: this.items[i].user.name,\n                start: this.items[i].from_date + ' ' + this.items[i].from_time,\n                end: this.items[i].from_date + ' ' + this.items[i].from_time,\n\n\n              }\n\n            );\n\n\n\n          }\n\n\n\n\n\n\n\n\n        }).catch(error => {\n          this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n        }).finally(s => {\n          this.loading = false;\n\n        });\n      },\n\n\n\n\n\n    },\n\n    created() {\n      this.getitems();\n    },\n    mounted() {\n      var today = new Date();\n      var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\n      var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n      var dateTime = date + ' ' + time;\n      this.today = date;\n\n      // this.$refs.calendar.scrollToTime('08:00')\n\n      // this.token = localStorage.getItem('access_token');\n      // alert(this.token);\n      // this.token = localStorage.getItem('access_token');\n      //  this.$refs.calendar.scrollToTime('08:00');\n      //this.token = localStorage.getItem('access_token');\n      this.user_info = JSON.parse(localStorage.getItem('user_info'));\n\n\n    },\n    computed: {\n\n      eventsMap() {\n        const map = {}\n        this.events.forEach(e => (map[e.date] = map[e.date] || []).push(e))\n        return map\n      },\n\n      selected() {\n        if (this.current_page != this.page) {\n\n          this.getMoreitems();\n\n        }\n\n        // if (this.items.length > 0) {\n        //   if (this.page > 1) {\n\n        //   }\n        // }\n      },\n    },\n\n\n    watch: {\n      selected: 'search by sub_cat_id',\n    },\n  }\n</script>"]}]}