{"remainingRequest":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/admin/components/additem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/src/components/admin/components/additem.vue","mtime":1579617310903},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/haideraltemimy/Documents/GitHub/Hejozat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport GoogleMap from '../components/map'\nimport itemForm from '../components/item_form'\n\nexport default {\n  data: () => ({\n    dialog: false,\n    switch1: true,\n      switch2: false,\n    item_id_offer: '',\n    radios: 'radio-1',\n    submit_name: '',\n    // price_percentage:'',\n    item_new_price: '',\n    menu_date_from: false,\n    menu_date_to: false,\n    editdailog: false,\n    user_info: {},\n    itemId: '',\n    token: '',\n    err_show: false,\n    menu1: false,\n    menu2: false,\n    menu3: false,\n    menu4: false,\n    map_dialog: false,\n    modal2: false,\n    book_dur_status: false,\n    book_num_status: false,\n    offer_info: {\n\n\n    }\n\n    ,\n    reve_type: [{\n      id: 0,\n      duration: 'غير محدود'\n    }, {\n      id: 1,\n      duration: 'اختيار فترة'\n    }, {\n      id: 2,\n      duration: 'اختيار عدد لليوم الواحد'\n    }],\n    reve_type1: [{\n      id: 0,\n      duration: 'غير محدود'\n    }, {\n      id: 1,\n      duration: 'اختيار فترة'\n    }, {\n      id: 2,\n      duration: 'اختيار عدد  '\n    }],\n    error: '',\n    msg_error_txt: 'هذا اليوم مكرر ',\n    urL: 'http://109.224.53.155',\n    headers: [{\n        text: 'رقم التعريف',\n        align: 'center',\n        sortable: false,\n        value: 'id',\n      },\n      {\n        text: 'اسم الحجز',\n        align: 'center',\n        sortable: false,\n        value: 'name',\n      },\n\n\n      // { text: 'الوصف', value: 'disc' },\n      {\n        text: 'سعر الحجز',\n        value: 'item_price.price',\n        align: 'center',\n      },\n\n      {\n        text: ' عدد الحجوزات في اليوم',\n        value: 'max_requests',\n        sortable: false,\n        align: 'center',\n      },\n      {\n        text: 'تاديخ الاضافة',\n        value: 'created_at',\n        sortable: false,\n        align: 'center',\n      },\n\n      {\n        text: 'العروض',\n        value: 'offers',\n        sortable: false,\n        align: 'center',\n      },\n\n\n      {\n        text: ' ',\n        value: 'action',\n        align: 'center',\n      },\n\n    ],\n    items: [],\n    editedIndex: -1,\n    editedItem: {\n      name: '',\n      calories: 0,\n      fat: 0,\n      carbs: 0,\n      protein: 0,\n    },\n    defaultItem: {\n      name: '',\n      calories: 0,\n      fat: 0,\n      carbs: 0,\n      protein: 0,\n    },\n\n\n    valid: false,\n    deduction: '',\n    days: [\"السبت\", \"الاحد\", \"الاثنين\", \"الثلاثاء\", \"الاربعاء\", \"الخميس\", \"الجمعة\", \"كل الايام\"],\n    times: [\"1:00 م\", \"2:00 م\", \"3:00 م\", \"4:00 م \", \"5:00 م\", \"6:00 م\", \"7:00 م \", \"8:00 م\", \"9:00 م\", \"10:00 م\",\n      \"11:00 م\", \"12:00 م\",\n      \"1:00 ص\", \"2:00 ص\", \"3:00 ص\", \"4:00 ص \", \"5:00 ص\", \"6:00 ص\", \"7:00 ص \", \"8:00 ص\", \"9:00 ص\", \"10:00 ص\",\n      \"11:00 ص\", \"12:00 ص\"\n    ],\n\n    img_cliced: -1,\n    day_to_open: [],\n\n    nameRules: [\n      v => !!v || 'هذا الحقل مطلوب  ',\n\n    ],\n    numberRul: [\n      v => !!v || 'هذا الحقل مطلوب  ',\n\n      v => !isNaN(v) || 'يجب ادخال رقم ',\n    ],\n    numberRul1: [\n\n      v => !isNaN(v) || 'يجب ادخال رقم ',\n    ],\n    descriptRules: [\n      v => !!v || 'هذا الحقل مطلوب  ',\n    v => v.length >= 20 ||  'يجب ان يكون الوصف اكثر من ٢٠ حرف ',\n    ],\n    loading: false,\n    province: [],\n    imageName: '',\n    item_old_price: '',\n    imageUrl: '',\n    imageFile: '',\n    images: ['a', 'a', 'a', 'a'],\n    name: '',\n    number: '',\n    description: '',\n    price: '',\n    request: 0,\n    payment: false,\n    //vaild:'مفعل',\n    free_cancelation: false,\n    deductionvalue: 0,\n    everyday: false,\n    everytime: false,\n    fromday: '',\n    today: '',\n    fromtime: '',\n    totime: '',\n    current_page: 0,\n    last_page: 0,\n    offer_dialog: false,\n    subcategory: [],\n    sub_category_id: '',\n    category: [],\n    category_id: '',\n    addressDiscription: '',\n    prov_id: '',\n    msg_error: false,\n    reserv_type_id: -1,\n    offer_url: '',\n    reservation_duration: '',\n    reservation_duration_foroneday: '',\n    reserv_type_id1: -1,\n    valid_day: true,\n    img_name: '',\n    lat:0\n    ,lng:0\n  }),\n\n  computed: {\n\n  },\n\n\n  methods: {\n    getlocation(lat,lng){\n      this.lat=lat;\n      this.lng=lng\n    \n      this.map_dialog=false;\n\n\n    },\n    price_percentage(v) {\n\n      this.offer_info.new_price = this.offer_info.old_price;\n      this.offer_info.new_price = this.offer_info.old_price - (this.offer_info.old_price * (v / 100));\n      this.offer_info.discount_percentage = v;\n\n\n\n    },\n    getOfferById(id, old_price) {\n\n\n      var url = this.urL + \"/getByOfferId/\" + id;\n      axios({\n        method: 'get',\n        url: url,\n        headers: {}\n\n      }).then(response => {\n        this.offer_info = response.data.Data;\n\n\n\n        this.offer_info.old_price = old_price.price;\n\n\n      }).catch(error => {\n        this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n      }).finally(d => {\n\n\n      });\n\n\n    },\n\n    close_offer() {\n      this.offer_dialog = false;\n      this.offer_info.new_price = '';\n      this.offer_info.old_price = '';\n      this.offer_info.discount_percentage = '';\n\n\n    },\n\n    submit_offer(item_id) {\n\n  \n\n      if (this.$refs.form.validate()) {\n        \n\n     \n        var data = {\n\n          item_id: item_id,\n          offer_name: this.offer_info.offer_name,\n          discount_percentage: this.offer_info.discount_percentage,\n          offer_disc: this.offer_info.offer_disc,\n          offer_from_date: this.offer_info.offer_from_date,\n          offer_to_date: this.offer_info.offer_to_date,\n          old_price: this.offer_info.old_price,\n          vaild:this.offer_info.valid,\n         \n        };\n\n\n        if (this.submit_name == 'edite') {\n          this.offer_url = this.urL + '/updateOffer/' + this.offer_info.id;\n\n\n        } else if (this.submit_name == 'add') {\n          this.offer_url = this.urL + '/addOffer';\n\n        } else {\n\n        }\n\n\n\n\n        this.loading = true;\n        axios({\n            method: 'post',\n            url: this.offer_url,\n            data: data,\n            headers: {\n              token: this.token\n            }\n\n          })\n          .then(response => {\n            this.$swal('تم', \"    تم اضافة العرض\", 'success')\n            this.offer_dialog = false;\n            this.offer_info.new_price = '';\n            this.offer_info.old_price = '';\n            this.offer_info.discount_percentage = '';\n\n\n            this.getitems();\n            this.$refs.form.reset();\n\n            if (response.data.success == true) {\n              this.$refs.form.reset()\n              this.dialog = false;\n\n\n            }\n            // \n\n\n\n          })\n          .catch(error => {\n            this.err_show = true;\n            this.$swal('خطاء', \"     لم يتم اضافة الحجز\", 'error')\n\n          }).finally(d => {\n            this.offer_dialog = false;\n            this.loading = false;\n          });\n      } else {\n\n        this.err_show = true;\n\n\n\n\n      }\n\n    },\n\n    delete_item(id) {\n      const Swal = require('sweetalert2')\n\n\n      Swal.fire({\n        title: \"هل انت متاكد من الحذف ؟\",\n\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n\n      }).then((result) => {\n        if (result.value) {\n          var url = this.urL + \"/deletedItem/\" + id;\n          axios({\n            method: 'get',\n            url: url,\n            headers: {\n              token: this.token\n            }\n\n          }).then(response => {\n\n\n\n\n          }).catch(error => {\n            this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n          }).finally(d => {\n            Swal.fire(\n              'تم الحذف بنجاح',\n              '',\n              'success'\n            )\n            this.getitems();\n          });\n\n\n\n        }\n      })\n\n\n\n    },\n\n\n\n    change_timeday() {\n      this.day_to_open.length = 0;\n    },\n    select_reser_type1(id) {\n\n      this.reserv_type_id1 = id;\n    },\n    select_reser_type(id) {\n\n      this.reserv_type_id = id;\n      if (id == 1) {\n        this.book_dur_status = true;\n        this.book_num_status = false;\n      } else if (id == 2) {\n        this.book_dur_status = false;\n        this.book_num_status = true;\n      } else {\n        this.book_dur_status = false;\n        this.book_num_status = false;\n      }\n    },\n\n    allowedHours(v) {\n\n      return false;\n    },\n\n    comput_maxRequest(id, time_duration, from_tim, to_tim) {\n\n      if (id == 0) {\n        return 0;\n      } else if (id == 1) {\n        // this.reservation_duration\n\n        var from_hour = parseInt(from_tim.split(\":\")[0])\n        var from_min = parseInt(from_tim.split(\":\")[1])\n\n\n        var to_hour = parseInt(to_tim.split(\":\")[0])\n        var to_min = parseInt(to_tim.split(\":\")[1])\n\n        var from = from_hour * 60 + from_min;\n\n\n        var to = to_hour * 60 + to_min;\n\n        var result = to - from;\n\n        var houer = parseInt(time_duration.split(\":\")[0]);\n        var minit = parseInt(time_duration.split(\":\")[1]);\n\n        var dur = houer * 60 + minit;\n\n        result = result / dur\n\n        return result\n\n      } else {\n        return 0\n      }\n\n\n\n\n    },\n    submit() {\n\n\n\n     \n\n\n      if (this.everyday && this.everytime) {\n        this.day_to_open.length = 0\n        this.day_to_open.push({\n          every_day: this.everyday,\n          every_time: this.everytime,\n          from_day: 0,\n          from_time: \"00:00\",\n          to_day: 6,\n          to_time: \"24:00\",\n          max_requests: this.comput_maxRequest(this.reserv_type_id, this.reservation_duration, \"00:00\", \"24:00\")\n        });\n\n      }\n\n      if (this.day_to_open.length == 0) {\n        this.$swal('تحذير', \"    يجب اختيار جدول الحجز\", 'warning')\n      }\n\n      if (this.images.find(im => im === 'a')) {\n        this.$swal('تحذير', \" يجب اختيار 4 من الصور\", 'warning')\n      }\n\n\n      if (this.$refs.form.validate() && this.day_to_open.length > 0) {\n\n\n        var data = {\n\n          province_id: this.prov_id,\n          country_id: \"1\",\n          category_id: \"1\",\n          long: this.lng,\n          lat: this.lat,\n\n          name: this.name,\n          number: 0,\n          discraption: this.description,\n          address_discraption: this.addressDiscription,\n          max_requests: this.request,\n\n          sub_category_id: this.sub_category_id,\n\n          owner_id: \"8\",\n\n          price: this.price,\n\n          book_without_credit_card: this.payment,\n\n          free_cancellation: this.free_cancelation,\n          deduction:this.deductionvalue,\n\n          no_prepayment: \"1\",\n          cancellation_deduction_ratio: \"1\",\n          work_times: this.day_to_open,\n\n          type: \"png\",\n          images: this.images\n        };\n        // this.description=JSON.stringify(data);\n        this.loading = true;\n        axios({\n            method: 'post',\n            url: this.urL + \"/addItem\",\n            data: data,\n            headers: {\n              token: this.token\n            }\n\n          })\n          .then(response => {\n            this.$swal('تم', \"    تم اضافة الحجز\", 'success')\n\n            this.dialog = false;\n            this.current_page = 0;\n            this.getitems();\n            this.$refs.form.reset();\n\n            if (response.data.success == true) {\n              this.$refs.form.reset()\n              this.dialog = false;\n              this.current_page = 0;\n              this.getitems();\n            }\n            // \n\n\n\n          })\n          .catch(error => {\n            this.err_show = true;\n            this.$swal('خطاء', \"     لم يتم اضافة الحجز\", 'error')\n\n          }).finally(d => {\n            this.loading = false;\n            this.everyday=false;\n            this.everytime=false;\n          });\n      } else {\n\n        this.err_show = true;\n\n\n\n\n      }\n\n\n\n\n    },\n    edite_offer(id, item_id, old_price) {\n      this.submit_name = 'edite';\n\n\n      this.item_id_offer = item_id;\n\n      this.offer_dialog = true;\n      this.getOfferById(id, old_price);\n\n\n\n    },\n\n    add_offer(item_id, item_price) {\n      this.offer_info = {};\n\n      this.submit_name = 'add';\n\n\n      this.item_id_offer = item_id;\n      this.offer_dialog = true;\n      this.offer_info.old_price = item_price.price;\n\n\n\n    },\n    getitems() {\n\n\n      this.loading = true\n\n      var url = this.urL + \"/getOwnerItems\";\n      axios({\n        method: 'get',\n        url: url,\n        headers: {\n          token: this.token\n        }\n\n      }).then(response => {\n        this.items = response.data.Data;\n\n\n\n      }).catch(error => {\n        this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n      }).finally(d => {\n        this.loading = false;\n      });\n\n    },\n    getCategory() {\n\n      var url = this.urL + \"/getInfo/Category\";\n      axios.get(url).then(response => {\n        this.category = response.data.Data;\n\n\n\n      })\n    },\n    getSubCategory() {\n\n      var url = this.urL + \"/getInfo/SubCategory/\" + this.category_id;\n      axios.get(url).then(response => {\n        this.subcategory = response.data.Data;\n\n\n\n      })\n    },\n    getProvince() {\n\n      var url = this.urL + \"/getInfo/Province/1\";\n      axios.get(url).then(response => {\n        this.province = response.data.Data;\n\n\n\n      })\n    },\n\n\n    addday() {\n      if (this.$refs.form_day.validate()) {\n\n\n        this.msg_error = false;\n\n\n        let search = this.day_to_open.find((o, i) => {\n          if (o.from_day == this.days.indexOf(this.fromday)) {\n            return o;\n          }\n        });\n\n\n        if (search == undefined) {\n          if (this.everytime && !this.everyday) {\n            this.add_day_reversation();\n          } else if (this.everyday && !this.everytime) {\n            this.add_time_reversation();\n          } else {\n            this.add_dayTime_reversation();\n\n          }\n        } else {\n          this.$swal('تحذير', \"  لايمكن تكرار اليوم\", 'warning')\n\n          this.$refs.form_day.reset();\n        }\n\n      }\n\n    },\n    add_dayTime_reversation() {\n\n\n      this.day_to_open.push({\n        every_day: this.everyday,\n        every_time: this.everytime,\n        from_day: this.days.indexOf(this.fromday),\n        from_time: this.fromtime,\n        to_day: this.days.indexOf(this.fromday),\n        to_time: this.totime,\n        max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, this\n          .fromtime, this.totime)\n      });\n\n      this.$refs.form_day.reset();\n\n    },\n    add_day_reversation() {\n      this.day_to_open.push({\n        every_day: this.everyday,\n        every_time: this.everytime,\n        from_day: this.days.indexOf(this.fromday),\n        from_time: 0,\n        to_day: this.days.indexOf(this.fromday),\n        to_time: 23,\n        max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, \"00:00\",\n          \"23:00\")\n      });\n\n      this.$refs.form_day.reset();\n\n    },\n    add_time_reversation() {\n\n      if (this.day_to_open.length < 1) {\n        this.day_to_open.push({\n          every_day: this.everyday,\n          every_time: this.everytime,\n          from_day: 0,\n          from_time: this.fromtime,\n          to_day: 6,\n          to_time: this.totime,\n          max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, this\n            .fromtime, this.totime)\n        });\n\n        this.$refs.form_day.reset();\n      } else {\n        this.$swal('تحذير', \" لايمكن اضافة وقت اخر\", 'warning')\n      }\n\n\n    },\n    pickFile(index) {\n\n      this.img_cliced = index\n      this.$refs.image.click()\n    },\n\n    onFilePicked(e) {\n\n      const files = e.target.files\n      if (files[0] !== undefined) {\n        this.imageName = files[0].name\n        if (this.imageName.lastIndexOf('.') <= 0) {\n          return\n        }\n        const fr = new FileReader()\n        fr.readAsDataURL(files[0])\n        fr.addEventListener('load', () => {\n          this.imageUrl = fr.result\n          this.imageFile = files[0]\n\n          this.images[this.img_cliced] = fr.result;\n          var a = this.img_cliced + 1;\n          this.img_name = \"   صورة رقم \" + a\n\n        })\n\n      } else {\n        this.imageName = ''\n        this.imageFile = ''\n        this.imageUrl = ''\n      }\n    },\n\n    change_payment(status) {\n      if (status == true) {\n        this.free_cancelation = false;\n        this.deductionvalue=0;\n      }\n    },\n    confirme_Item_booking(item) {\n      // this.editedIndex = this.desserts.indexOf(item)\n      // this.editedItem = Object.assign({}, item)\n      // this.dialog = true\n      var data = {\n        reservation_id: item.id\n      };\n\n      axios({\n          method: 'post',\n          url: this.urL + \"/confirmReservation\",\n          data: data\n        })\n        .then(response => {\n\n\n          this.getitems()\n        })\n        .catch(error => {\n          this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n        });\n\n\n    },\n\n    deleteItem(item) {\n      const index = this.items.indexOf(item)\n      confirm('تآكيد الغاء الحجز') && axios({\n          method: 'post',\n          url: this.urL + \"/cancelReservation\",\n          data: {\n            reservation_id: item.id\n          }\n        })\n        .then(response => {\n\n\n          this.getitems()\n          // this.items.splice(index, 1)\n        })\n        .catch(error => {\n          this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n        }) || alert(\"تم الغاء الامر\")\n\n    },\n\n    close() {\n      this.dialog = false\n      setTimeout(() => {\n        this.editedItem = Object.assign({}, this.defaultItem)\n        this.editedIndex = -1\n      }, 300)\n    },\n\n    save() {\n      if (this.editedIndex > -1) {\n        Object.assign(this.desserts[this.editedIndex], this.editedItem)\n      } else {\n        this.desserts.push(this.editedItem)\n      }\n      this.close()\n    },\n\n  },\n\n  watch: {\n    // price_percentage:function(v)\n    // {\n    //   alert('aasdas');\n    //   this.offer_info.new_price=this.offer_info.old;\n    // this.offer_info.new_price=this.offer_info.old_price-(this.offer_info.old_price*(v/100));\n    // this.offer_info.discount_percentage=v;\n\n    // }\n  },\n  mounted() {\n    this.token = localStorage.getItem('access_token');\n    this.user_info = JSON.parse(localStorage.getItem('user_info'));\n\n    this.getitems();\n    this.getCategory();\n    this.getProvince();\n  },\n  components: {\n    GoogleMap,\n    itemForm\n  }\n}\n",{"version":3,"sources":["additem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAksBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;;;AAGA;AACA;AACA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;;AAIA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;;AAGA;AACA;;AAEA;;AAEA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;;;AAIA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;;;AAKA;AACA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;;;;;AAKA;AACA;AACA;;;AAGA;;AAEA;AACA;;;;AAIA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;;;;AAIA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;;;AAGA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"additem.vue","sourceRoot":"src/components/admin/components","sourcesContent":["<template>\n  <v-layout row wrap>\n\n\n    <v-data-table :headers=\"headers\" :items=\"items\" sort-by=\"calories\" class=\"elevation-1 request_table\"\n      style=\"width:96%\" :loading=\"loading\" loading-text=\"جاري تحميل البيانات\" color=\"red\">\n\n      <template v-slot:top>\n        <v-toolbar flat color=\"white\">\n          <v-toolbar-title>الحجوزات</v-toolbar-title>\n\n          <v-divider class=\"mx-4\" inset vertical></v-divider>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" dark class=\"mb-2\" @click=\"dialog=true\">\n            <span style=\"margin-left:5px;font-family:'cairo_Semi'\">اضافه حجز</span>\n            <v-icon size=\"15\">fas fa-plus</v-icon>\n\n          </v-btn>\n\n\n          <!-- dailog of add item -->\n\n        </v-toolbar>\n      </template>\n\n\n      <template v-slot:item.action=\"{ item }\">\n        <v-row wrap justify=\"center\">\n\n\n          <v-btn class=\"mx-2\" small icon=\"\" dark >\n            <!-- <v-icon color=\"warning\" style=\"margin-left:5px\">fas fa-pen-square</v-icon> -->\n\n            <div v-if=\"item.offers!=''\" style=\"width: 32px;height:32px\">\n\n              <div v-if=\"item.offers[0].valid==2\">\n                <v-img style=\"width:100%;height:100%\" src=\"https://image.flaticon.com/icons/png/512/411/411705.png\">\n              </v-img>\n\n              </div>\n\n              <div v-else>\n\n              <v-img style=\"width:100%;height:100%\" src=\"https://image.flaticon.com/icons/png/512/411/411756.png\">\n              </v-img>\n\n              </div>\n\n\n\n\n\n            </div>\n\n\n            <div v-else style=\"width: 32px;height:32px\">\n\n\n\n\n\n\n            </div>\n\n          </v-btn>\n\n          <v-btn class=\"mx-2\" small icon=\"\" dark @click=\"editdailog=true;itemId=item.id\">\n            <v-icon color=\"warning\" style=\"margin-left:5px\">fas fa-pen-square</v-icon>\n          </v-btn>\n\n\n\n          <v-btn class=\"mx-2\" small icon=\"\" @click=\"delete_item(item.id)\" dark>\n            <v-icon color=\"red\">fas fa-trash</v-icon>\n          </v-btn>\n\n\n\n\n\n\n        </v-row>\n\n\n\n\n      </template>\n\n      <template v-slot:item.offers=\"{ item }\">\n        <v-row wrap justify=\"center\">\n\n          <div v-if=\"item.offers!=''\">\n            <v-btn class=\"mx-2\" v-for=\"offer in item.offers\" icon=\"\" dark\n              @click=\"edite_offer(offer.id,item.id,item.item_price)\">\n              <v-icon color=\"dark\" style=\"margin-left:5px;color:#000;font-size:14px;\">fas fa-edit</v-icon>\n            </v-btn>\n\n\n          </div>\n\n\n\n          <v-btn v-else class=\"mx-2\" small icon=\"\" dark @click=\"add_offer(item.id,item.item_price)\">\n            <v-icon color=\"dark\" style=\"color:#000;font-size:14px;\">fas fa-plus</v-icon>\n          </v-btn>\n\n\n\n\n\n\n\n\n\n\n\n        </v-row>\n\n\n      </template>\n      <template>\n\n      </template>\n\n      <!-- <template v-slot:activator=\"{ on }\">\n            \n          </template> -->\n\n    </v-data-table>\n\n    <v-row>\n\n\n      <v-dialog v-model=\"offer_dialog\" max-width=\"800\" persistent>\n        <v-form ref=\"form\" v-model=\"valid\">\n          <v-card pa-4>\n\n            <v-card-title class=\"headline grey lighten-2\" primary-title\n              style=\"\tfont-family: 'droid_bold' !important;    background-color: #435c6f!important;color:#fff\">\n              اضافه عرض\n            </v-card-title>\n\n\n            <v-container>\n              <v-flex pa-3 xs12>\n                <v-text-field background-color=\"#eeeeee\" height=\"40\" style=\"\" label=\"اسم العرض\"\n                  v-model=\"offer_info.offer_name\" :rules=\"nameRules\" required></v-text-field>\n              </v-flex>\n\n              <v-layout row wrap>\n\n                <v-flex xs4 pa-3>\n                  <v-text-field label=\"نسبه الخصم\" background-color=\"#eeeeee\" height=\"40\" @input=\"price_percentage\"\n                    @change=\"price_percentage\" v-model=\"offer_info.discount_percentage\" append-icon=\"fas fa-percent\"\n                    filled>\n                  </v-text-field>\n                </v-flex>\n\n\n\n                <v-flex pa-3 xs4>\n\n                  <v-text-field background-color=\"#eeeeee\" height=\"40\" label=\"السعر السابق\"\n                    v-model=\"offer_info.old_price\" filled disabled append-icon=\"fas fa-dollar-sign\" :rules=\"nameRules\"\n                    required>\n                  </v-text-field>\n                </v-flex>\n\n\n\n\n\n                <v-flex pa-3 xs4>\n\n                  <v-text-field background-color=\"#eeeeee\" height=\"40\" value label=\"السعر الجديد\"\n                    v-model=\"offer_info.new_price\" filled disabled append-icon=\"fas fa-dollar-sign\">\n                  </v-text-field>\n                </v-flex>\n\n\n\n              </v-layout>\n\n              <v-layout row wrap>\n\n\n                <v-flex xs6 pr-3 pl-4>\n                  <v-menu v-model=\"menu_date_from\" :close-on-content-click=\"false\" :nudge-right=\"40\"\n                    transition=\"scale-transition\" offset-y min-width=\"290px\">\n                    <template v-slot:activator=\"{ on }\">\n                      <v-text-field v-model=\"offer_info.offer_from_date\" label=\"تاريخ بدا العرض\" append-icon=\"event\"\n                        background-color=\"#eeeeee\" height=\"40\" readonly v-on=\"on\"></v-text-field>\n                    </template>\n                    <v-date-picker v-model=\"offer_info.offer_from_date\" @input=\"menu_date_from = false\"></v-date-picker>\n                  </v-menu>\n\n                </v-flex>\n\n\n                <v-flex xs6 pr-3 pl-4>\n                  <v-menu v-model=\"menu_date_to\" :close-on-content-click=\"false\" :nudge-right=\"40\"\n                    transition=\"scale-transition\" offset-y min-width=\"290px\">\n                    <template v-slot:activator=\"{ on }\">\n                      <v-text-field v-model=\"offer_info.offer_to_date\" label=\"تاريخ انتهاء العرض\" append-icon=\"event\"\n                        background-color=\"#eeeeee\" height=\"40\" readonly v-on=\"on\"></v-text-field>\n                    </template>\n                    <v-date-picker v-model=\"offer_info.offer_to_date\" @input=\"menu_date_to = false\"></v-date-picker>\n                  </v-menu>\n\n                </v-flex>\n              </v-layout>\n\n              <br>\n              <br>\n\n              <v-layout>\n                <v-flex xs12>\n                  <v-textarea filled name=\"input-7-4\" v-model=\"offer_info.offer_disc\" label=\"وصف العرض\" height=\"200\">\n                  </v-textarea>\n\n                </v-flex>\n              </v-layout>\n\n\n               <v-container fluid>\n               \n\n                <p >\n                  حاله العرض :\n                  <span v-if=\"offer_info.valid==2\">\n                      مفعل \n                  </span>\n\n                   <span v-else>\n                    ملغي\n                  </span>\n                  \n                  </p>\n              \n                <v-radio-group v-model=\"offer_info.valid\" :mandatory=\"false\">\n                  <v-radio label=\"تفعيل\" value=\"2\"></v-radio>\n                  <v-radio label=\"ايقاف\" value=\"1\"></v-radio>\n                </v-radio-group>\n              </v-container>\n         \n              <br>\n              <br>\n\n              <v-layout row wrap pr-5>\n\n\n                <v-btn @click=\"submit_offer(item_id_offer)\" color=\"success\" style=\"margin-left:10px\" width=\"150px\">\n                  <span v-show=\"!loading\">حفظ</span>\n                  <v-progress-circular indeterminate color=\"white\" v-show=\"loading\"></v-progress-circular>\n                </v-btn>\n                <v-btn @click=\"close_offer()\" color=\"red\" dark=\"\" width=\"150px\"> خروج</v-btn>\n              </v-layout>\n\n\n\n            </v-container>\n\n\n          </v-card>\n        </v-form>\n      </v-dialog>\n\n\n      <v-dialog v-model=\"dialog\" max-width=\"1000\">\n\n        <v-form ref=\"form\" v-model=\"valid\">\n          <v-card>\n\n\n            <v-row class=\"mb-6\" style=\"background:#424242; padding:10px\" justify=\"center\">\n\n\n              <h2 style=\"color:#fff\">اضافة حجز </h2>\n\n            </v-row>\n\n            <v-container style=\"padding:20px\">\n\n              <h3 class=\"mb-3\">اضافة معلومات الحجز </h3>\n\n\n\n              <v-divider class=\"mb-4\"></v-divider>\n\n\n\n              <v-layout row wrap>\n                <v-flex pa-3 xs6>\n                  <v-text-field background-color=\"#eeeeee\" height=\"40\" style=\"\" placeholder=\"اسم الحجز\" v-model=\"name\"\n                    :rules=\"nameRules\" required></v-text-field>\n                </v-flex>\n                <v-flex xs6 pa-3>\n                  <v-text-field background-color=\"#eeeeee\" height=\"40\" placeholder=\" سعر الحجز\" data-vv-name=\"name\"\n                    v-model=\"price\" :rules=\"numberRul\" required>\n                  </v-text-field>\n                </v-flex>\n                <!-- <v-flex pa-3 xs6>\n              <v-text-field  \n                background-color=\"#eeeeee\" \n             height=\"40\"\n             placeholder=\" عدد الاشياء\" v-model=\"number\" :rules=\"numberRul\" required></v-text-field>\n            </v-flex> -->\n\n              </v-layout>\n\n              <v-layout row wrap>\n\n                <v-flex pa-3 xs6>\n                  <v-select background-color=\"#eeeeee\" height=\"40\" :rules=\"nameRules\" class=\"my-2\" :items=\"category\"\n                    item-value=\"id\" item-text=\"name\" v-model=\"category_id\" placeholder=\"  التصنيف الرئيسي\"\n                    @change=\"getSubCategory()\" required></v-select>\n                </v-flex>\n\n\n                <v-flex pa-3 xs6>\n                  <v-select :rules=\"nameRules\" segmented class=\"my-2\" :items=\"subcategory\" item-value=\"id\"\n                    item-text=\"name\" background-color=\"#eeeeee\" height=\"40\" v-model=\"sub_category_id\"\n                    placeholder=\" التصنيف الفرعي\" @change=\"dis()\" required></v-select>\n                </v-flex>\n\n              </v-layout>\n\n\n\n\n\n\n\n\n\n              <v-layout column=\"\" wrap pa-2>\n                <h3>معلومات الموقع </h3>\n\n\n              </v-layout>\n              <v-divider class=\"mb-4\"></v-divider>\n\n\n              <v-row justify=\"center\">\n\n\n                <v-flex pa-3 xs2>\n                  <v-select background-color=\"#eeeeee\" height=\"40\" item-value=\"id\" item-text=\"province_name\"\n                    :items=\"province\" placeholder=\" المحافظة\" target=\"#dropdown-example\" v-model=\"prov_id\" required\n                    :rules=\"nameRules\"></v-select>\n                </v-flex>\n\n\n                <v-flex pa-3 xs3>\n                  <v-text-field background-color=\"#eeeeee\" height=\"40\" placeholder=\" الوصف \"\n                    v-model=\"addressDiscription\" :rules=\"nameRules\" required></v-text-field>\n                </v-flex>\n\n<v-flex pa-3 xs2>\n                  <v-text-field background-color=\"#eeeeee\" height=\"40\" placeholder=\" الطول \" disabled readonly\n                    v-model=\"lat\" :rules=\"nameRules\" required></v-text-field>\n                </v-flex>\n\n                <v-flex pa-3 xs2>\n                  <v-text-field background-color=\"#eeeeee\" height=\"40\" placeholder=\" العرض \"\n                  disabled readonly\n                    v-model=\"lng\" :rules=\"nameRules\" required></v-text-field>\n                </v-flex>\n\n\n                <v-flex xs3 pt-7>\n                  <v-btn color=\"info\" @click=\"map_dialog=true\">اختيار موقع</v-btn>\n                </v-flex>\n\n              </v-row>\n\n\n              <v-dialog v-model=\"map_dialog\" max-width=\"700px\">\n                <!-- <GmapMap :center=\"{lat:10, lng:10}\" \n   :zoom=\"7\" map-type-id=\"terrain\" \n   style=\"width: 500px; height: 260px\">\n                  <GmapMarker :key=\"index\" v-for=\"(m, index) in markers\" :position=\"m.position\" :clickable=\"true\"\n                    :draggable=\"true\" @click=\"center=m.position\" />\n                </GmapMap> -->\n                <google-map @getmyLocation=\"getlocation\" @cancel=\"map_dialog=false\" />\n\n              </v-dialog>\n\n\n              <v-layout column=\"\" wrap pa-2>\n                <h3>معلومات الدفع </h3>\n\n\n              </v-layout>\n              <v-divider class=\"mb-4\"></v-divider>\n\n\n              <v-row justify=\"center\">\n\n                <v-flex xs3 pa-1>\n                  <v-checkbox v-model=\"payment\" label=\"الحجز بدون بطاقة دفع\" @change=\"change_payment\" required>\n                  </v-checkbox>\n                </v-flex>\n                <!-- :disabled=\"payment\" -->\n                <v-flex xs3 pa-1>\n                  <v-checkbox v-model=\"free_cancelation\" label=\"امكانية الغاء الحجز\" required></v-checkbox>\n                </v-flex>\n\n                <v-flex xs4>\n\n\n                  <v-text-field v-if=\"!payment\" prepend-inner-icon=\"fas fa-percent\" background-color=\"#eeeeee\"\n                    class=\"deucation_txfield\" height=\"40\" placeholder=\"  نسبة الاستقطاع\" data-vv-name=\"name\"\n                    :disabled=\"!free_cancelation\"   :readonly=\"!free_cancelation\" v-model=\"deductionvalue\" :rules=\"numberRul1\">\n                  </v-text-field>\n\n                  <!-- <v-select v-show=\"free_cancelation\"\n                background-color=\"#eeeeee\" \n                :disabled=\"!free_cancelation\"\n             height=\"40\"\n             :items=\"deduction\" placeholder=\"نسبة الاستقطاع\" \n                v-model=\"deductionvalue\" ></v-select> -->\n                </v-flex>\n                <v-flex xs2>\n\n                </v-flex>\n              </v-row>\n\n\n              <v-row>\n                <v-col>\n\n                </v-col>\n              </v-row>\n\n\n\n\n\n\n              <v-layout column=\"\" wrap pa-2>\n                <h3>جدول الحجز</h3>\n\n\n              </v-layout>\n              <v-divider></v-divider>\n\n\n              <v-row>\n\n                <v-flex xs2>\n                  <v-checkbox v-model=\"everyday\" label=\" كل الايام \" @change=\"change_timeday\"></v-checkbox>\n                </v-flex>\n                <v-flex xs2>\n                  <v-checkbox v-model=\"everytime\" label=\"كل الساعات  \" @change=\"change_timeday\"></v-checkbox>\n                </v-flex>\n\n\n                <v-flex xs3 pl-3 v-if=\"everyday\">\n                  <v-select v-if=\"everytime\" background-color=\"#eeeeee\" height=\"40\" :items=\"reve_type\"\n                    placeholder=\" نوع الحجز\" item-value=\"id\" item-text=\"duration\" @change=\"select_reser_type\">\n                  </v-select>\n                </v-flex>\n\n\n                <v-flex xs3>\n\n\n\n\n\n                  <v-menu v-if=\"book_dur_status\" v-show=\"everyday\" ref=\"menu3\" v-model=\"menu4\"\n                    :close-on-content-click=\"false\" :nudge-right=\"40\" :return-value.sync=\"reservation_duration\"\n                    transition=\"scale-transition\" offset-y max-width=\"290px\" min-width=\"290px\">\n                    <template v-slot:activator=\"{ on }\">\n                      <v-text-field v-model=\"reservation_duration\" placeholder=\" مدة الحجز الواحد \"\n                        background-color=\"#eeeeee\" height=\"40\" required readonly v-on=\"on\"></v-text-field>\n                    </template>\n                    <v-time-picker v-if=\"menu4\" v-model=\"reservation_duration\" full-width\n                      @click:minute=\"$refs.menu3.save(reservation_duration)\"></v-time-picker>\n                  </v-menu>\n\n\n\n\n                  <v-text-field v-if=\"book_num_status\" background-color=\"#eeeeee\" height=\"40\"\n                    placeholder=\"   عدد الحجز باليوم الواحد \" :rules=\"numberRul\" v-model=\"request\"></v-text-field>\n                </v-flex>\n\n              </v-row>\n\n\n\n\n\n\n              <v-form ref=\"form_day\" v-model=\"valid_day\">\n                <v-layout row wrap v-if=\"everyday==false || everytime==false\">\n                  <v-flex pa-2 xs2 v-if=\"!everyday\">\n                    <v-select background-color=\"#eeeeee\" height=\"40\" class=\"my-2\" :items=\"days\" v-model=\"fromday\"\n                      placeholder=\"  اليوم\" :rules=\"nameRules\" required></v-select>\n                  </v-flex>\n\n\n\n\n\n                  <v-flex pa-3 xs2 v-if=\"!everytime\">\n\n                    <v-menu ref=\"menu\" v-model=\"menu1\" :close-on-content-click=\"false\" :nudge-right=\"40\"\n                      :return-value.sync=\"fromtime\" transition=\"scale-transition\" offset-y max-width=\"290px\"\n                      min-width=\"290px\">\n                      <template v-slot:activator=\"{ on }\">\n                        <v-text-field v-model=\"fromtime\" placeholder=\"من الساعة \" background-color=\"#eeeeee\" height=\"40\"\n                          required readonly v-on=\"on\"></v-text-field>\n                      </template>\n                      <v-time-picker v-if=\"menu1\" v-model=\"fromtime\" full-width\n                        @click:minute=\"$refs.menu.save(fromtime)\"></v-time-picker>\n                    </v-menu>\n\n                  </v-flex>\n\n                  <v-flex pa-3 xs2 v-if=\"!everytime\">\n\n                    <v-menu ref=\"menu1\" v-model=\"menu2\" :close-on-content-click=\"false\" :nudge-right=\"40\"\n                      :return-value.sync=\"totime\" transition=\"scale-transition\" offset-y max-width=\"290px\"\n                      min-width=\"290px\">\n                      <template v-slot:activator=\"{ on }\">\n                        <v-text-field v-model=\"totime\" placeholder=\" الى الساعة \" background-color=\"#eeeeee\" height=\"40\"\n                          required readonly :allowed-hours=\"allowedHours\" v-on=\"on\"></v-text-field>\n                      </template>\n                      <v-time-picker v-if=\"menu2\" v-model=\"totime\" full-width @click:minute=\"$refs.menu1.save(totime)\">\n                      </v-time-picker>\n                    </v-menu>\n\n                  </v-flex>\n                  <v-flex xs2 pa-3>\n                    <v-select background-color=\"#eeeeee\" height=\"40\" :items=\"reve_type1\" placeholder=\" نوع الحجز\"\n                      item-value=\"id\" item-text=\"duration\" @change=\"select_reser_type1\"></v-select>\n                  </v-flex>\n\n\n                  <v-flex xs2 pa-3>\n\n\n\n\n\n                    <v-menu v-if=\"reserv_type_id1==1\" ref=\"menu4\" v-model=\"menu3\" :close-on-content-click=\"false\"\n                      :nudge-right=\"40\" :return-value.sync=\"reservation_duration_foroneday\"\n                      transition=\"scale-transition\" offset-y max-width=\"290px\" min-width=\"290px\">\n                      <template v-slot:activator=\"{ on }\">\n\n                        <v-text-field v-model=\"reservation_duration_foroneday\" placeholder=\" مدة الحجز  \"\n                          background-color=\"#eeeeee\" height=\"40\" required readonly v-on=\"on\"></v-text-field>\n                      </template>\n                      <v-time-picker v-if=\"menu3\" v-model=\"reservation_duration_foroneday\" full-width\n                        @click:minute=\"$refs.menu4.save(reservation_duration_foroneday)\"></v-time-picker>\n                    </v-menu>\n\n\n\n\n                    <v-text-field v-if=\"reserv_type_id1==2\" background-color=\"#eeeeee\" height=\"40\"\n                      placeholder=\"   عدد الحجز   \" :rules=\"numberRul\" v-model=\"request\"></v-text-field>\n                  </v-flex>\n\n\n\n                  <v-flex pa-3 mt-5 xs2>\n                    <v-btn color=\"success\" @click=\"addday\">اضافة</v-btn>\n                  </v-flex>\n                </v-layout>\n              </v-form>\n              <v-row>\n                <v-flex xs5 pa-3 v-for=\"item in day_to_open \">\n                  <v-card outlined=\"\" class=\"mb-6\">\n                    <v-row>\n                      <v-card-title pl-5 pr-5>\n                        <span v-if=\"!everyday\"> {{days[item.from_day]}}</span>\n\n                        <span v-else>كل الايام</span>\n\n\n\n                      </v-card-title>\n                      <v-divider vertical=\"\"></v-divider>\n                      <v-row v-if=\"!everytime\">\n\n\n                        <v-card-title>\n                          {{item.from_time}}\n                        </v-card-title>\n                        <v-divider vertical=\"\"></v-divider>\n                        <v-card-title>\n                          الى\n                        </v-card-title>\n                        <v-divider vertical=\"\"></v-divider>\n                        <v-card-title>\n                          {{item.to_time}}\n                        </v-card-title>\n\n                      </v-row>\n                      <v-row v-else>\n\n\n\n                        <v-card-title>\n                          كل الاوقات\n                        </v-card-title>\n\n                      </v-row>\n\n\n\n                    </v-row>\n                  </v-card>\n                </v-flex>\n                <v-flex xs4>\n\n                </v-flex>\n              </v-row>\n              <v-row justify=\"center\">\n\n                <v-alert dense outlined type=\"error\" v-show=\"msg_error\">\n                  <span style=\"padding-right:10px\">{{msg_error_txt}} </span>\n\n                </v-alert>\n\n              </v-row>\n              <v-layout row wrap pa-2>\n                <v-textarea name=\"input-7-1\" placeholder=\"الوصف \" v-model=\"description\" :rules=\"descriptRules\" required>\n                </v-textarea>\n              </v-layout>\n\n              <v-row justify=\"center\">\n                <v-flex pa-5 xs3>\n                  <!-- <v-text-field label=\"اختر صورة \" solo=\"\" @click='pickFile' append-icon='fas fa-image'></v-text-field> -->\n                </v-flex>\n                <v-flex pa-5>\n                  <input type=\"file\" style=\"display: none\" ref=\"image\" accept=\"image/*\" @change=\"onFilePicked\">\n                </v-flex>\n\n              </v-row>\n\n              <span>{{img_name}}</span>\n              <v-layout row wrap>\n                <v-row justify=\"center\">\n                  <v-flex xs2 v-for=\"(img ,index) in images\" pa-2>\n\n                    <v-card height=\"150\" width=\"150\" class=\"card_img\">\n                      <v-img :src=\"img\" height=\"150\" width=\"150\" class=\"card_img\" v-if=\"img!='a'\">\n                        <v-btn icon=\"\" @click=\"images[index]='a';img_name=''\">\n                          <v-icon>fas fa-window-close</v-icon>\n                        </v-btn>\n\n                      </v-img>\n\n                      <v-btn icon v-else @click='pickFile(index)'>\n                        <v-icon style=\"margin:0px\" size=\"40\">fas fa-plus-square</v-icon>\n                      </v-btn>\n\n                      <!-- <v-container fluid=\"\"     style=\"width:100%;height:100%\" @>\n            \n           </v-container> -->\n\n                    </v-card>\n\n\n                  </v-flex>\n                </v-row>\n              </v-layout>\n\n\n\n              <v-card-actions>\n                <v-row>\n\n\n                  <v-btn @click=\"submit\" color=\"success\" style=\"margin-left:10px\">\n                    <span v-show=\"!loading\">حفظ</span>\n                    <v-progress-circular indeterminate color=\"white\" v-show=\"loading\"></v-progress-circular>\n                  </v-btn>\n                  <v-btn @click=\"close\" color=\"red\" dark=\"\"> الغاء</v-btn>\n                </v-row>\n\n                <v-spacer></v-spacer>\n\n              </v-card-actions>\n\n            </v-container>\n          </v-card>\n        </v-form>\n      </v-dialog>\n\n      <v-dialog v-model=\"editdailog\" max-width=\"1000px\">\n        <itemForm v-if=\"editdailog\" @changeStatus=\"editdailog=false\" :itemId=\"itemId\" :hidden=\"editdailog\">\n        </itemForm>\n      </v-dialog>\n\n    </v-row>\n  </v-layout>\n</template>\n\n\n<script>\n  import GoogleMap from '../components/map'\n  import itemForm from '../components/item_form'\n\n  export default {\n    data: () => ({\n      dialog: false,\n      switch1: true,\n        switch2: false,\n      item_id_offer: '',\n      radios: 'radio-1',\n      submit_name: '',\n      // price_percentage:'',\n      item_new_price: '',\n      menu_date_from: false,\n      menu_date_to: false,\n      editdailog: false,\n      user_info: {},\n      itemId: '',\n      token: '',\n      err_show: false,\n      menu1: false,\n      menu2: false,\n      menu3: false,\n      menu4: false,\n      map_dialog: false,\n      modal2: false,\n      book_dur_status: false,\n      book_num_status: false,\n      offer_info: {\n\n\n      }\n\n      ,\n      reve_type: [{\n        id: 0,\n        duration: 'غير محدود'\n      }, {\n        id: 1,\n        duration: 'اختيار فترة'\n      }, {\n        id: 2,\n        duration: 'اختيار عدد لليوم الواحد'\n      }],\n      reve_type1: [{\n        id: 0,\n        duration: 'غير محدود'\n      }, {\n        id: 1,\n        duration: 'اختيار فترة'\n      }, {\n        id: 2,\n        duration: 'اختيار عدد  '\n      }],\n      error: '',\n      msg_error_txt: 'هذا اليوم مكرر ',\n      urL: 'http://109.224.53.155',\n      headers: [{\n          text: 'رقم التعريف',\n          align: 'center',\n          sortable: false,\n          value: 'id',\n        },\n        {\n          text: 'اسم الحجز',\n          align: 'center',\n          sortable: false,\n          value: 'name',\n        },\n\n\n        // { text: 'الوصف', value: 'disc' },\n        {\n          text: 'سعر الحجز',\n          value: 'item_price.price',\n          align: 'center',\n        },\n\n        {\n          text: ' عدد الحجوزات في اليوم',\n          value: 'max_requests',\n          sortable: false,\n          align: 'center',\n        },\n        {\n          text: 'تاديخ الاضافة',\n          value: 'created_at',\n          sortable: false,\n          align: 'center',\n        },\n\n        {\n          text: 'العروض',\n          value: 'offers',\n          sortable: false,\n          align: 'center',\n        },\n\n\n        {\n          text: ' ',\n          value: 'action',\n          align: 'center',\n        },\n\n      ],\n      items: [],\n      editedIndex: -1,\n      editedItem: {\n        name: '',\n        calories: 0,\n        fat: 0,\n        carbs: 0,\n        protein: 0,\n      },\n      defaultItem: {\n        name: '',\n        calories: 0,\n        fat: 0,\n        carbs: 0,\n        protein: 0,\n      },\n\n\n      valid: false,\n      deduction: '',\n      days: [\"السبت\", \"الاحد\", \"الاثنين\", \"الثلاثاء\", \"الاربعاء\", \"الخميس\", \"الجمعة\", \"كل الايام\"],\n      times: [\"1:00 م\", \"2:00 م\", \"3:00 م\", \"4:00 م \", \"5:00 م\", \"6:00 م\", \"7:00 م \", \"8:00 م\", \"9:00 م\", \"10:00 م\",\n        \"11:00 م\", \"12:00 م\",\n        \"1:00 ص\", \"2:00 ص\", \"3:00 ص\", \"4:00 ص \", \"5:00 ص\", \"6:00 ص\", \"7:00 ص \", \"8:00 ص\", \"9:00 ص\", \"10:00 ص\",\n        \"11:00 ص\", \"12:00 ص\"\n      ],\n\n      img_cliced: -1,\n      day_to_open: [],\n\n      nameRules: [\n        v => !!v || 'هذا الحقل مطلوب  ',\n\n      ],\n      numberRul: [\n        v => !!v || 'هذا الحقل مطلوب  ',\n\n        v => !isNaN(v) || 'يجب ادخال رقم ',\n      ],\n      numberRul1: [\n\n        v => !isNaN(v) || 'يجب ادخال رقم ',\n      ],\n      descriptRules: [\n        v => !!v || 'هذا الحقل مطلوب  ',\n      v => v.length >= 20 ||  'يجب ان يكون الوصف اكثر من ٢٠ حرف ',\n      ],\n      loading: false,\n      province: [],\n      imageName: '',\n      item_old_price: '',\n      imageUrl: '',\n      imageFile: '',\n      images: ['a', 'a', 'a', 'a'],\n      name: '',\n      number: '',\n      description: '',\n      price: '',\n      request: 0,\n      payment: false,\n      //vaild:'مفعل',\n      free_cancelation: false,\n      deductionvalue: 0,\n      everyday: false,\n      everytime: false,\n      fromday: '',\n      today: '',\n      fromtime: '',\n      totime: '',\n      current_page: 0,\n      last_page: 0,\n      offer_dialog: false,\n      subcategory: [],\n      sub_category_id: '',\n      category: [],\n      category_id: '',\n      addressDiscription: '',\n      prov_id: '',\n      msg_error: false,\n      reserv_type_id: -1,\n      offer_url: '',\n      reservation_duration: '',\n      reservation_duration_foroneday: '',\n      reserv_type_id1: -1,\n      valid_day: true,\n      img_name: '',\n      lat:0\n      ,lng:0\n    }),\n\n    computed: {\n\n    },\n\n\n    methods: {\n      getlocation(lat,lng){\n        this.lat=lat;\n        this.lng=lng\n      \n        this.map_dialog=false;\n\n\n      },\n      price_percentage(v) {\n\n        this.offer_info.new_price = this.offer_info.old_price;\n        this.offer_info.new_price = this.offer_info.old_price - (this.offer_info.old_price * (v / 100));\n        this.offer_info.discount_percentage = v;\n\n\n\n      },\n      getOfferById(id, old_price) {\n\n\n        var url = this.urL + \"/getByOfferId/\" + id;\n        axios({\n          method: 'get',\n          url: url,\n          headers: {}\n\n        }).then(response => {\n          this.offer_info = response.data.Data;\n\n\n\n          this.offer_info.old_price = old_price.price;\n\n\n        }).catch(error => {\n          this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n        }).finally(d => {\n\n\n        });\n\n\n      },\n\n      close_offer() {\n        this.offer_dialog = false;\n        this.offer_info.new_price = '';\n        this.offer_info.old_price = '';\n        this.offer_info.discount_percentage = '';\n\n\n      },\n\n      submit_offer(item_id) {\n\n    \n\n        if (this.$refs.form.validate()) {\n          \n\n       \n          var data = {\n\n            item_id: item_id,\n            offer_name: this.offer_info.offer_name,\n            discount_percentage: this.offer_info.discount_percentage,\n            offer_disc: this.offer_info.offer_disc,\n            offer_from_date: this.offer_info.offer_from_date,\n            offer_to_date: this.offer_info.offer_to_date,\n            old_price: this.offer_info.old_price,\n            vaild:this.offer_info.valid,\n           \n          };\n\n\n          if (this.submit_name == 'edite') {\n            this.offer_url = this.urL + '/updateOffer/' + this.offer_info.id;\n\n\n          } else if (this.submit_name == 'add') {\n            this.offer_url = this.urL + '/addOffer';\n\n          } else {\n\n          }\n\n\n\n\n          this.loading = true;\n          axios({\n              method: 'post',\n              url: this.offer_url,\n              data: data,\n              headers: {\n                token: this.token\n              }\n\n            })\n            .then(response => {\n              this.$swal('تم', \"    تم اضافة العرض\", 'success')\n              this.offer_dialog = false;\n              this.offer_info.new_price = '';\n              this.offer_info.old_price = '';\n              this.offer_info.discount_percentage = '';\n\n\n              this.getitems();\n              this.$refs.form.reset();\n\n              if (response.data.success == true) {\n                this.$refs.form.reset()\n                this.dialog = false;\n\n\n              }\n              // \n\n\n\n            })\n            .catch(error => {\n              this.err_show = true;\n              this.$swal('خطاء', \"     لم يتم اضافة الحجز\", 'error')\n\n            }).finally(d => {\n              this.offer_dialog = false;\n              this.loading = false;\n            });\n        } else {\n\n          this.err_show = true;\n\n\n\n\n        }\n\n      },\n\n      delete_item(id) {\n        const Swal = require('sweetalert2')\n\n\n        Swal.fire({\n          title: \"هل انت متاكد من الحذف ؟\",\n\n          icon: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: '#3085d6',\n          cancelButtonColor: '#d33',\n          confirmButtonText: 'Yes, delete it!'\n\n        }).then((result) => {\n          if (result.value) {\n            var url = this.urL + \"/deletedItem/\" + id;\n            axios({\n              method: 'get',\n              url: url,\n              headers: {\n                token: this.token\n              }\n\n            }).then(response => {\n\n\n\n\n            }).catch(error => {\n              this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n            }).finally(d => {\n              Swal.fire(\n                'تم الحذف بنجاح',\n                '',\n                'success'\n              )\n              this.getitems();\n            });\n\n\n\n          }\n        })\n\n\n\n      },\n\n\n\n      change_timeday() {\n        this.day_to_open.length = 0;\n      },\n      select_reser_type1(id) {\n\n        this.reserv_type_id1 = id;\n      },\n      select_reser_type(id) {\n\n        this.reserv_type_id = id;\n        if (id == 1) {\n          this.book_dur_status = true;\n          this.book_num_status = false;\n        } else if (id == 2) {\n          this.book_dur_status = false;\n          this.book_num_status = true;\n        } else {\n          this.book_dur_status = false;\n          this.book_num_status = false;\n        }\n      },\n\n      allowedHours(v) {\n\n        return false;\n      },\n\n      comput_maxRequest(id, time_duration, from_tim, to_tim) {\n\n        if (id == 0) {\n          return 0;\n        } else if (id == 1) {\n          // this.reservation_duration\n\n          var from_hour = parseInt(from_tim.split(\":\")[0])\n          var from_min = parseInt(from_tim.split(\":\")[1])\n\n\n          var to_hour = parseInt(to_tim.split(\":\")[0])\n          var to_min = parseInt(to_tim.split(\":\")[1])\n\n          var from = from_hour * 60 + from_min;\n\n\n          var to = to_hour * 60 + to_min;\n\n          var result = to - from;\n\n          var houer = parseInt(time_duration.split(\":\")[0]);\n          var minit = parseInt(time_duration.split(\":\")[1]);\n\n          var dur = houer * 60 + minit;\n\n          result = result / dur\n\n          return result\n\n        } else {\n          return 0\n        }\n\n\n\n\n      },\n      submit() {\n\n\n\n       \n\n\n        if (this.everyday && this.everytime) {\n          this.day_to_open.length = 0\n          this.day_to_open.push({\n            every_day: this.everyday,\n            every_time: this.everytime,\n            from_day: 0,\n            from_time: \"00:00\",\n            to_day: 6,\n            to_time: \"24:00\",\n            max_requests: this.comput_maxRequest(this.reserv_type_id, this.reservation_duration, \"00:00\", \"24:00\")\n          });\n\n        }\n\n        if (this.day_to_open.length == 0) {\n          this.$swal('تحذير', \"    يجب اختيار جدول الحجز\", 'warning')\n        }\n\n        if (this.images.find(im => im === 'a')) {\n          this.$swal('تحذير', \" يجب اختيار 4 من الصور\", 'warning')\n        }\n\n\n        if (this.$refs.form.validate() && this.day_to_open.length > 0) {\n\n\n          var data = {\n\n            province_id: this.prov_id,\n            country_id: \"1\",\n            category_id: \"1\",\n            long: this.lng,\n            lat: this.lat,\n\n            name: this.name,\n            number: 0,\n            discraption: this.description,\n            address_discraption: this.addressDiscription,\n            max_requests: this.request,\n\n            sub_category_id: this.sub_category_id,\n\n            owner_id: \"8\",\n\n            price: this.price,\n\n            book_without_credit_card: this.payment,\n\n            free_cancellation: this.free_cancelation,\n            deduction:this.deductionvalue,\n\n            no_prepayment: \"1\",\n            cancellation_deduction_ratio: \"1\",\n            work_times: this.day_to_open,\n\n            type: \"png\",\n            images: this.images\n          };\n          // this.description=JSON.stringify(data);\n          this.loading = true;\n          axios({\n              method: 'post',\n              url: this.urL + \"/addItem\",\n              data: data,\n              headers: {\n                token: this.token\n              }\n\n            })\n            .then(response => {\n              this.$swal('تم', \"    تم اضافة الحجز\", 'success')\n\n              this.dialog = false;\n              this.current_page = 0;\n              this.getitems();\n              this.$refs.form.reset();\n\n              if (response.data.success == true) {\n                this.$refs.form.reset()\n                this.dialog = false;\n                this.current_page = 0;\n                this.getitems();\n              }\n              // \n\n\n\n            })\n            .catch(error => {\n              this.err_show = true;\n              this.$swal('خطاء', \"     لم يتم اضافة الحجز\", 'error')\n\n            }).finally(d => {\n              this.loading = false;\n              this.everyday=false;\n              this.everytime=false;\n            });\n        } else {\n\n          this.err_show = true;\n\n\n\n\n        }\n\n\n\n\n      },\n      edite_offer(id, item_id, old_price) {\n        this.submit_name = 'edite';\n\n\n        this.item_id_offer = item_id;\n\n        this.offer_dialog = true;\n        this.getOfferById(id, old_price);\n\n\n\n      },\n\n      add_offer(item_id, item_price) {\n        this.offer_info = {};\n\n        this.submit_name = 'add';\n\n\n        this.item_id_offer = item_id;\n        this.offer_dialog = true;\n        this.offer_info.old_price = item_price.price;\n\n\n\n      },\n      getitems() {\n\n\n        this.loading = true\n\n        var url = this.urL + \"/getOwnerItems\";\n        axios({\n          method: 'get',\n          url: url,\n          headers: {\n            token: this.token\n          }\n\n        }).then(response => {\n          this.items = response.data.Data;\n\n\n\n        }).catch(error => {\n          this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n        }).finally(d => {\n          this.loading = false;\n        });\n\n      },\n      getCategory() {\n\n        var url = this.urL + \"/getInfo/Category\";\n        axios.get(url).then(response => {\n          this.category = response.data.Data;\n\n\n\n        })\n      },\n      getSubCategory() {\n\n        var url = this.urL + \"/getInfo/SubCategory/\" + this.category_id;\n        axios.get(url).then(response => {\n          this.subcategory = response.data.Data;\n\n\n\n        })\n      },\n      getProvince() {\n\n        var url = this.urL + \"/getInfo/Province/1\";\n        axios.get(url).then(response => {\n          this.province = response.data.Data;\n\n\n\n        })\n      },\n\n\n      addday() {\n        if (this.$refs.form_day.validate()) {\n\n\n          this.msg_error = false;\n\n\n          let search = this.day_to_open.find((o, i) => {\n            if (o.from_day == this.days.indexOf(this.fromday)) {\n              return o;\n            }\n          });\n\n\n          if (search == undefined) {\n            if (this.everytime && !this.everyday) {\n              this.add_day_reversation();\n            } else if (this.everyday && !this.everytime) {\n              this.add_time_reversation();\n            } else {\n              this.add_dayTime_reversation();\n\n            }\n          } else {\n            this.$swal('تحذير', \"  لايمكن تكرار اليوم\", 'warning')\n\n            this.$refs.form_day.reset();\n          }\n\n        }\n\n      },\n      add_dayTime_reversation() {\n\n\n        this.day_to_open.push({\n          every_day: this.everyday,\n          every_time: this.everytime,\n          from_day: this.days.indexOf(this.fromday),\n          from_time: this.fromtime,\n          to_day: this.days.indexOf(this.fromday),\n          to_time: this.totime,\n          max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, this\n            .fromtime, this.totime)\n        });\n\n        this.$refs.form_day.reset();\n\n      },\n      add_day_reversation() {\n        this.day_to_open.push({\n          every_day: this.everyday,\n          every_time: this.everytime,\n          from_day: this.days.indexOf(this.fromday),\n          from_time: 0,\n          to_day: this.days.indexOf(this.fromday),\n          to_time: 23,\n          max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, \"00:00\",\n            \"23:00\")\n        });\n\n        this.$refs.form_day.reset();\n\n      },\n      add_time_reversation() {\n\n        if (this.day_to_open.length < 1) {\n          this.day_to_open.push({\n            every_day: this.everyday,\n            every_time: this.everytime,\n            from_day: 0,\n            from_time: this.fromtime,\n            to_day: 6,\n            to_time: this.totime,\n            max_requests: this.comput_maxRequest(this.reserv_type_id1, this.reservation_duration_foroneday, this\n              .fromtime, this.totime)\n          });\n\n          this.$refs.form_day.reset();\n        } else {\n          this.$swal('تحذير', \" لايمكن اضافة وقت اخر\", 'warning')\n        }\n\n\n      },\n      pickFile(index) {\n\n        this.img_cliced = index\n        this.$refs.image.click()\n      },\n\n      onFilePicked(e) {\n\n        const files = e.target.files\n        if (files[0] !== undefined) {\n          this.imageName = files[0].name\n          if (this.imageName.lastIndexOf('.') <= 0) {\n            return\n          }\n          const fr = new FileReader()\n          fr.readAsDataURL(files[0])\n          fr.addEventListener('load', () => {\n            this.imageUrl = fr.result\n            this.imageFile = files[0]\n\n            this.images[this.img_cliced] = fr.result;\n            var a = this.img_cliced + 1;\n            this.img_name = \"   صورة رقم \" + a\n\n          })\n\n        } else {\n          this.imageName = ''\n          this.imageFile = ''\n          this.imageUrl = ''\n        }\n      },\n\n      change_payment(status) {\n        if (status == true) {\n          this.free_cancelation = false;\n          this.deductionvalue=0;\n        }\n      },\n      confirme_Item_booking(item) {\n        // this.editedIndex = this.desserts.indexOf(item)\n        // this.editedItem = Object.assign({}, item)\n        // this.dialog = true\n        var data = {\n          reservation_id: item.id\n        };\n\n        axios({\n            method: 'post',\n            url: this.urL + \"/confirmReservation\",\n            data: data\n          })\n          .then(response => {\n\n\n            this.getitems()\n          })\n          .catch(error => {\n            this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n          });\n\n\n      },\n\n      deleteItem(item) {\n        const index = this.items.indexOf(item)\n        confirm('تآكيد الغاء الحجز') && axios({\n            method: 'post',\n            url: this.urL + \"/cancelReservation\",\n            data: {\n              reservation_id: item.id\n            }\n          })\n          .then(response => {\n\n\n            this.getitems()\n            // this.items.splice(index, 1)\n          })\n          .catch(error => {\n            this.$swal('خطاء', \"خطاء بالاتصال\", 'error')\n          }) || alert(\"تم الغاء الامر\")\n\n      },\n\n      close() {\n        this.dialog = false\n        setTimeout(() => {\n          this.editedItem = Object.assign({}, this.defaultItem)\n          this.editedIndex = -1\n        }, 300)\n      },\n\n      save() {\n        if (this.editedIndex > -1) {\n          Object.assign(this.desserts[this.editedIndex], this.editedItem)\n        } else {\n          this.desserts.push(this.editedItem)\n        }\n        this.close()\n      },\n\n    },\n\n    watch: {\n      // price_percentage:function(v)\n      // {\n      //   alert('aasdas');\n      //   this.offer_info.new_price=this.offer_info.old;\n      // this.offer_info.new_price=this.offer_info.old_price-(this.offer_info.old_price*(v/100));\n      // this.offer_info.discount_percentage=v;\n\n      // }\n    },\n    mounted() {\n      this.token = localStorage.getItem('access_token');\n      this.user_info = JSON.parse(localStorage.getItem('user_info'));\n\n      this.getitems();\n      this.getCategory();\n      this.getProvince();\n    },\n    components: {\n      GoogleMap,\n      itemForm\n    }\n  }\n</script>"]}]}